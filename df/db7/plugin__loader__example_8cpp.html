<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: examples/plugin_example/plugin_loader_example.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="../../dir_d6dea23286941972b437f22813ac7539.html">plugin_example</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">plugin_loader_example.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Example demonstrating dynamic plugin loading.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d2/dd5/collector__registry_8h_source.html">kcenon/monitoring/plugins/collector_registry.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/db6/plugin__loader_8h_source.html">kcenon/monitoring/plugins/plugin_loader.h</a>&quot;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for plugin_loader_example.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d81/plugin__loader__example_8cpp__incl.png" border="0" usemap="#aexamples_2plugin__example_2plugin__loader__example_8cpp" alt=""/></div>
<map name="aexamples_2plugin__example_2plugin__loader__example_8cpp" id="aexamples_2plugin__example_2plugin__loader__example_8cpp">
<area shape="rect" title="Example demonstrating dynamic plugin loading." alt="" coords="1509,5,1715,45"/>
<area shape="rect" href="../../d2/dd5/collector__registry_8h.html" title="Registry for managing collector plugin lifecycle." alt="" coords="913,93,1108,133"/>
<area shape="poly" title=" " alt="" coords="1510,44,1122,99,1121,94,1509,39"/>
<area shape="rect" title=" " alt="" coords="1232,577,1299,603"/>
<area shape="poly" title=" " alt="" coords="1615,46,1615,193,1615,437,1612,461,1605,482,1595,501,1580,517,1544,544,1499,563,1450,576,1400,585,1313,592,1313,586,1399,580,1449,571,1497,558,1541,539,1577,513,1590,497,1601,480,1607,460,1609,437,1609,193,1609,46"/>
<area shape="rect" href="../../de/db6/plugin__loader_8h.html" title="Dynamic plugin loading from shared libraries." alt="" coords="1223,181,1345,207"/>
<area shape="poly" title=" " alt="" coords="1576,48,1320,177,1318,173,1574,43"/>
<area shape="rect" title=" " alt="" coords="1649,101,1729,126"/>
<area shape="poly" title=" " alt="" coords="1631,44,1672,88,1668,92,1627,47"/>
<area shape="rect" title=" " alt="" coords="1753,101,1817,126"/>
<area shape="poly" title=" " alt="" coords="1651,43,1751,92,1749,97,1649,48"/>
<area shape="rect" title=" " alt="" coords="761,181,847,207"/>
<area shape="poly" title=" " alt="" coords="962,136,848,179,846,174,960,131"/>
<area shape="rect" title=" " alt="" coords="872,181,923,207"/>
<area shape="poly" title=" " alt="" coords="985,136,927,175,924,171,982,131"/>
<area shape="rect" title=" " alt="" coords="1171,335,1248,361"/>
<area shape="poly" title=" " alt="" coords="1029,132,1193,323,1189,327,1025,135"/>
<area shape="rect" title=" " alt="" coords="1479,423,1543,449"/>
<area shape="poly" title=" " alt="" coords="1109,124,1229,145,1294,160,1358,179,1443,203,1477,220,1513,253,1532,280,1541,306,1542,334,1537,369,1524,411,1519,410,1532,367,1537,334,1536,307,1528,283,1509,256,1474,225,1441,208,1357,184,1293,165,1228,150,1108,129"/>
<area shape="rect" title=" " alt="" coords="361,739,420,764"/>
<area shape="poly" title=" " alt="" coords="913,122,665,137,365,166,226,186,112,209,68,222,35,236,15,251,8,267,8,591,11,617,18,639,30,659,46,676,88,704,139,724,195,737,252,744,347,749,347,754,251,750,194,742,138,729,86,709,43,680,26,662,13,641,5,618,3,591,3,265,11,248,33,232,67,217,111,204,225,180,364,161,664,132,913,117"/>
<area shape="rect" title=" " alt="" coords="1049,335,1146,361"/>
<area shape="poly" title=" " alt="" coords="1020,133,1091,322,1086,324,1015,135"/>
<area shape="rect" title=" " alt="" coords="1083,577,1207,603"/>
<area shape="poly" title=" " alt="" coords="1013,133,1017,235,1025,301,1040,367,1060,425,1086,480,1133,565,1128,567,1081,482,1055,427,1035,369,1020,302,1012,235,1008,134"/>
<area shape="rect" title=" " alt="" coords="94,577,157,603"/>
<area shape="poly" title=" " alt="" coords="919,136,835,157,749,184,605,236,495,281,390,336,262,418,209,457,167,506,149,536,136,565,132,563,145,533,163,502,206,453,258,414,387,331,493,276,603,231,747,179,834,152,917,131"/>
<area shape="rect" href="../../dc/ded/collector__plugin_8h.html" title="Plugin interface for metric collectors." alt="" coords="835,255,973,280"/>
<area shape="poly" title=" " alt="" coords="999,135,922,245,918,242,995,132"/>
<area shape="poly" title=" " alt="" coords="1077,131,1232,175,1230,180,1075,136"/>
<area shape="poly" title=" " alt="" coords="963,277,1056,298,1159,325,1168,328,1167,333,1158,331,1054,303,962,283"/>
<area shape="poly" title=" " alt="" coords="836,276,629,299,500,318,371,343,250,375,197,393,151,414,112,437,83,461,65,487,59,516,59,591,61,614,67,633,77,651,91,667,126,694,169,714,216,728,264,738,348,746,347,752,263,743,215,733,167,719,123,698,87,671,73,654,62,636,56,615,53,591,53,515,60,485,79,457,109,432,148,409,195,388,249,370,369,338,500,312,628,293,835,271"/>
<area shape="poly" title=" " alt="" coords="933,278,1058,328,1056,333,931,282"/>
<area shape="poly" title=" " alt="" coords="845,283,628,333,493,371,360,418,273,454,238,475,196,506,166,536,142,567,138,564,162,533,193,502,235,470,271,449,358,414,492,366,627,328,844,277"/>
<area shape="poly" title=" " alt="" coords="920,278,1027,370,1178,502,1245,565,1242,569,1174,506,1024,374,916,282"/>
<area shape="rect" href="../../dc/d0b/metric__types__adapter_8h.html" title="Adapter for metric types to support interface definitions." alt="" coords="655,416,801,456"/>
<area shape="poly" title=" " alt="" coords="839,283,794,300,773,313,755,330,744,346,737,365,731,403,725,402,732,363,740,344,751,326,770,309,792,295,837,278"/>
<area shape="rect" href="../../de/d4d/collector__base_8h.html" title="CRTP base class for metric collectors." alt="" coords="765,328,923,368"/>
<area shape="poly" title=" " alt="" coords="897,282,869,319,865,315,893,279"/>
<area shape="poly" title=" " alt="" coords="655,449,541,467,409,495,347,512,293,532,250,554,222,579,212,602,214,624,226,645,245,666,298,703,351,731,349,735,295,708,242,670,222,648,209,625,207,601,218,576,247,550,291,527,346,507,408,490,540,462,654,444"/>
<area shape="poly" title=" " alt="" coords="776,454,968,527,1097,571,1095,576,966,532,774,459"/>
<area shape="rect" href="../../df/d4b/metric__types_8h.html" title="Common metric type definitions for efficient storage." alt="" coords="647,504,809,529"/>
<area shape="poly" title=" " alt="" coords="731,456,731,490,725,490,725,456"/>
<area shape="rect" title=" " alt="" coords="233,577,301,603"/>
<area shape="poly" title=" " alt="" coords="672,459,315,576,313,571,670,454"/>
<area shape="poly" title=" " alt="" coords="647,522,567,527,483,537,410,554,384,565,366,579,356,595,351,614,352,654,364,693,379,725,374,728,359,695,347,655,345,613,351,593,362,576,381,561,409,549,482,531,567,522,646,517"/>
<area shape="poly" title=" " alt="" coords="795,527,1070,573,1069,578,795,532"/>
<area shape="poly" title=" " alt="" coords="647,530,220,580,171,586,170,581,220,575,646,525"/>
<area shape="poly" title=" " alt="" coords="810,522,993,541,1219,575,1218,580,993,547,809,527"/>
<area shape="rect" href="../../d1/d7d/result__types_8h.html" title="Result pattern type definitions for monitoring system." alt="" coords="550,577,709,603"/>
<area shape="poly" title=" " alt="" coords="714,532,658,571,655,567,711,527"/>
<area shape="rect" href="../../de/d11/error__codes_8h.html" title="Monitoring system specific error codes." alt="" coords="833,658,943,683"/>
<area shape="poly" title=" " alt="" coords="791,527,867,547,899,560,919,576,926,594,925,613,908,648,904,645,920,611,921,594,915,579,897,565,866,552,790,532"/>
<area shape="rect" title=" " alt="" coords="959,739,1025,764"/>
<area shape="poly" title=" " alt="" coords="810,520,844,526,879,537,913,553,942,575,967,611,983,651,991,691,994,725,989,725,986,692,978,653,963,613,938,579,910,558,877,542,843,531,809,525"/>
<area shape="poly" title=" " alt="" coords="647,531,495,552,320,580,315,581,314,576,320,575,494,547,646,526"/>
<area shape="rect" title=" " alt="" coords="733,577,819,603"/>
<area shape="poly" title=" " alt="" coords="738,528,763,565,758,568,734,531"/>
<area shape="rect" title=" " alt="" coords="843,577,906,603"/>
<area shape="poly" title=" " alt="" coords="753,527,840,569,837,574,750,532"/>
<area shape="rect" title=" " alt="" coords="377,577,442,603"/>
<area shape="poly" title=" " alt="" coords="673,532,456,580,455,575,672,527"/>
<area shape="rect" title=" " alt="" coords="467,577,525,603"/>
<area shape="poly" title=" " alt="" coords="692,532,539,578,538,573,690,527"/>
<area shape="poly" title=" " alt="" coords="596,605,547,625,496,653,449,691,411,730,408,726,445,687,493,648,545,620,594,600"/>
<area shape="poly" title=" " alt="" coords="668,600,838,652,837,657,666,605"/>
<area shape="rect" title=" " alt="" coords="507,651,695,691"/>
<area shape="poly" title=" " alt="" coords="628,604,615,639,610,637,623,602"/>
<area shape="rect" title=" " alt="" coords="720,658,795,683"/>
<area shape="poly" title=" " alt="" coords="650,601,728,648,725,653,647,605"/>
<area shape="poly" title=" " alt="" coords="842,686,807,693,598,727,434,748,433,742,597,721,806,688,841,681"/>
<area shape="poly" title=" " alt="" coords="905,681,967,728,964,733,902,686"/>
<area shape="poly" title=" " alt="" coords="923,357,1466,426,1465,431,923,362"/>
<area shape="poly" title=" " alt="" coords="849,368,858,409,872,455,890,491,913,523,958,580,975,606,982,634,978,662,958,693,930,707,878,718,729,735,563,746,434,751,433,746,563,741,729,730,877,713,928,702,954,689,973,660,977,634,970,608,954,583,909,526,886,494,867,457,852,410,844,369"/>
<area shape="poly" title=" " alt="" coords="891,366,928,386,962,414,982,444,991,473,999,500,1019,527,1054,553,1092,570,1090,575,1051,557,1015,531,994,502,985,474,977,447,958,418,925,391,889,370"/>
<area shape="poly" title=" " alt="" coords="765,362,658,380,525,409,381,451,310,477,241,506,191,537,150,570,146,566,188,533,239,502,308,472,379,446,524,404,657,375,764,357"/>
<area shape="poly" title=" " alt="" coords="890,366,991,414,1131,497,1239,567,1236,572,1128,501,988,418,887,370"/>
<area shape="poly" title=" " alt="" coords="820,370,766,410,763,406,817,366"/>
<area shape="rect" title=" " alt="" coords="881,423,948,449"/>
<area shape="poly" title=" " alt="" coords="862,367,898,411,894,414,858,370"/>
<area shape="poly" title=" " alt="" coords="1281,208,1223,324,1219,322,1276,206"/>
<area shape="poly" title=" " alt="" coords="1345,194,1382,199,1420,210,1457,227,1487,253,1500,271,1509,291,1519,334,1520,376,1518,410,1512,409,1515,375,1513,335,1504,293,1495,274,1483,256,1454,231,1418,215,1381,204,1344,199"/>
<area shape="poly" title=" " alt="" coords="1291,206,1320,300,1333,366,1339,435,1339,518,1336,565,1329,585,1313,605,1283,627,1244,647,1198,664,1144,680,1021,705,887,724,750,737,623,745,434,752,434,747,622,740,750,732,886,719,1020,700,1143,675,1196,659,1242,642,1280,622,1309,601,1324,582,1331,564,1333,518,1333,435,1328,367,1314,301,1286,208"/>
<area shape="poly" title=" " alt="" coords="1272,209,1124,329,1120,324,1268,205"/>
<area shape="poly" title=" " alt="" coords="1286,207,1281,276,1274,323,1263,369,1240,427,1213,482,1163,567,1158,565,1208,480,1235,425,1257,367,1269,322,1276,276,1281,207"/>
<area shape="poly" title=" " alt="" coords="1223,209,979,255,978,249,1222,204"/>
<area shape="rect" href="../../db/d42/plugin__api_8h.html" title="C API for dynamically loaded collector plugins." alt="" coords="1372,255,1473,280"/>
<area shape="poly" title=" " alt="" coords="1307,204,1389,246,1387,251,1305,209"/>
</map>
</div>
</div>
<p><a href="../../df/db7/plugin__loader__example_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/db7/plugin__loader__example_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Example demonstrating dynamic plugin loading. </p>
<p>This program shows how to:</p><ol type="1">
<li>Load a plugin from a shared library</li>
<li>Initialize and use the plugin</li>
<li>Collect metrics from the plugin</li>
<li>Unload the plugin</li>
</ol>
<p>Build: g++ -o plugin_loader_example <a class="el" href="../../df/db7/plugin__loader__example_8cpp.html" title="Example demonstrating dynamic plugin loading.">plugin_loader_example.cpp</a> \ -I../../include -L../../build -lmonitoring_system -std=c++20</p>
<p>Run: ./plugin_loader_example ./libexample_plugin.so </p>

<p class="definition">Definition in file <a class="el" href="../../df/db7/plugin__loader__example_8cpp_source.html">plugin_loader_example.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/db7/plugin__loader__example_8cpp_source.html#l00057">57</a> of file <a class="el" href="../../df/db7/plugin__loader__example_8cpp_source.html">plugin_loader_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>                                 {</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line"><span class="lineno">   59</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; &lt;plugin_path&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   60</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Example: &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; ./libexample_plugin.so\n&quot;</span>;</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   62</span>    }</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    std::string plugin_path = argv[1];</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;=== Dynamic Plugin Loading Example ===\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">// Get the collector registry instance</span></div>
<div class="line"><span class="lineno">   69</span>    <span class="keyword">auto</span>&amp; registry = <a class="code hl_function" href="../../d7/d36/classkcenon_1_1monitoring_1_1collector__registry.html#afdc59e9198f6dc25d72babcc6edfee69">collector_registry::instance</a>();</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="comment">// Load the plugin from shared library</span></div>
<div class="line"><span class="lineno">   72</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Loading plugin from: &quot;</span> &lt;&lt; plugin_path &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">if</span> (!registry.load_plugin(plugin_path)) {</div>
<div class="line"><span class="lineno">   74</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to load plugin: &quot;</span></div>
<div class="line"><span class="lineno">   75</span>                  &lt;&lt; registry.get_plugin_loader_error() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   77</span>    }</div>
<div class="line"><span class="lineno">   78</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Plugin loaded successfully\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">// Get the loaded plugin</span></div>
<div class="line"><span class="lineno">   81</span>    <span class="keyword">auto</span>* plugin = registry.get_plugin(<span class="stringliteral">&quot;example_plugin&quot;</span>);</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">if</span> (!plugin) {</div>
<div class="line"><span class="lineno">   83</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Plugin not found in registry\n&quot;</span>;</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   85</span>    }</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">// Display plugin metadata</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="keyword">auto</span> metadata = plugin-&gt;get_metadata();</div>
<div class="line"><span class="lineno">   89</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Plugin Metadata:\n&quot;</span>;</div>
<div class="line"><span class="lineno">   90</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Name: &quot;</span> &lt;&lt; plugin-&gt;name() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   91</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Description: &quot;</span> &lt;&lt; metadata.description &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   92</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Version: &quot;</span> &lt;&lt; metadata.version &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   93</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Available: &quot;</span> &lt;&lt; (plugin-&gt;is_available() ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">// Initialize the plugin</span></div>
<div class="line"><span class="lineno">   96</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Initializing plugin...\n&quot;</span>;</div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#a2f6036067a6209b4db3dd1ed9677406b">config_map</a> config;  <span class="comment">// Empty config for this example</span></div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">if</span> (!plugin-&gt;initialize(config)) {</div>
<div class="line"><span class="lineno">   99</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to initialize plugin\n&quot;</span>;</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Plugin initialized\n\n&quot;</span>;</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    <span class="comment">// Collect metrics from the plugin</span></div>
<div class="line"><span class="lineno">  105</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Collecting metrics (5 iterations)...\n&quot;</span>;</div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno">  107</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;\nIteration &quot;</span> &lt;&lt; (i + 1) &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>        <span class="keyword">auto</span> metrics = plugin-&gt;collect();</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a> : metrics) {</div>
<div class="line"><span class="lineno">  111</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>.<a class="code hl_variable" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html#a1d1e2a7a2c83b8cdf0747076e0081174">name</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>.<a class="code hl_variable" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html#abd5d2a90c17aaa351ec39d77d6e0528a">value</a></div>
<div class="line"><span class="lineno">  112</span>                      &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>.unit;</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>            <span class="keywordflow">if</span> (!<a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>.labels.empty()) {</div>
<div class="line"><span class="lineno">  115</span>                std::cout &lt;&lt; <span class="stringliteral">&quot; [&quot;</span>;</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  117</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [key, value] : <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>.labels) {</div>
<div class="line"><span class="lineno">  118</span>                    <span class="keywordflow">if</span> (!first) std::cout &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><span class="lineno">  119</span>                    std::cout &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; value;</div>
<div class="line"><span class="lineno">  120</span>                    first = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  121</span>                }</div>
<div class="line"><span class="lineno">  122</span>                std::cout &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><span class="lineno">  123</span>            }</div>
<div class="line"><span class="lineno">  124</span>            std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  125</span>        }</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        <span class="comment">// Wait before next collection</span></div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">if</span> (i &lt; 4) {</div>
<div class="line"><span class="lineno">  129</span>            std::this_thread::sleep_for(std::chrono::seconds(1));</div>
<div class="line"><span class="lineno">  130</span>        }</div>
<div class="line"><span class="lineno">  131</span>    }</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <span class="comment">// Shutdown and unload the plugin</span></div>
<div class="line"><span class="lineno">  134</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\nShutting down plugin...\n&quot;</span>;</div>
<div class="line"><span class="lineno">  135</span>    plugin-&gt;shutdown();</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Unloading plugin...\n&quot;</span>;</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">if</span> (!registry.unload_plugin(<span class="stringliteral">&quot;example_plugin&quot;</span>)) {</div>
<div class="line"><span class="lineno">  139</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to unload plugin\n&quot;</span>;</div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  141</span>    }</div>
<div class="line"><span class="lineno">  142</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Plugin unloaded successfully\n&quot;</span>;</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Example Complete ===\n&quot;</span>;</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  146</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1collector__registry_html_afdc59e9198f6dc25d72babcc6edfee69"><div class="ttname"><a href="../../d7/d36/classkcenon_1_1monitoring_1_1collector__registry.html#afdc59e9198f6dc25d72babcc6edfee69">kcenon::monitoring::collector_registry::instance</a></div><div class="ttdeci">static auto instance() -&gt; collector_registry &amp;</div><div class="ttdoc">Get the singleton instance.</div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a2f6036067a6209b4db3dd1ed9677406b"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a2f6036067a6209b4db3dd1ed9677406b">kcenon::monitoring::config_map</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::string &gt; config_map</div><div class="ttdoc">Type alias for configuration map.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d4d/collector__base_8h_source.html#l00088">collector_base.h:88</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric_html"><div class="ttname"><a href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">kcenon::monitoring::metric</a></div><div class="ttdoc">Basic metric structure for interface compatibility.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0b/metric__types__adapter_8h_source.html#l00078">metric_types_adapter.h:78</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric_html_a1d1e2a7a2c83b8cdf0747076e0081174"><div class="ttname"><a href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html#a1d1e2a7a2c83b8cdf0747076e0081174">kcenon::monitoring::metric::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0b/metric__types__adapter_8h_source.html#l00079">metric_types_adapter.h:79</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric_html_abd5d2a90c17aaa351ec39d77d6e0528a"><div class="ttname"><a href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html#abd5d2a90c17aaa351ec39d77d6e0528a">kcenon::monitoring::metric::value</a></div><div class="ttdeci">std::variant&lt; double, int64_t, std::string &gt; value</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0b/metric__types__adapter_8h_source.html#l00080">metric_types_adapter.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/db7/plugin__loader__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#adf/db7/plugin__loader__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="adf/db7/plugin__loader__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="adf/db7/plugin__loader__example_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title=" " alt="" coords="5,20,60,45"/>
<area shape="rect" href="../../d7/d36/classkcenon_1_1monitoring_1_1collector__registry.html#afdc59e9198f6dc25d72babcc6edfee69" title="Get the singleton instance." alt="" coords="108,5,256,60"/>
<area shape="poly" title=" " alt="" coords="60,30,94,30,94,35,60,35"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 9 2026 01:40:53 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
