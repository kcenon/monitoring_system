<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: kcenon::monitoring::aggregation_processor Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d03/namespacekcenon.html">kcenon</a></li><li class="navelem"><a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html">monitoring</a></li><li class="navelem"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html">aggregation_processor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d4/d81/classkcenon_1_1monitoring_1_1aggregation__processor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">kcenon::monitoring::aggregation_processor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Processes metric streams and generates aggregated statistics.  
 <a href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for kcenon::monitoring::aggregation_processor:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d61/classkcenon_1_1monitoring_1_1aggregation__processor__coll__graph.png" border="0" usemap="#akcenon_1_1monitoring_1_1aggregation__processor_coll__map" alt="Collaboration graph"/></div>
<map name="akcenon_1_1monitoring_1_1aggregation__processor_coll__map" id="akcenon_1_1monitoring_1_1aggregation__processor_coll__map">
<area shape="rect" title="Processes metric streams and generates aggregated statistics." alt="" coords="1308,2823,1499,3117"/>
<area shape="rect" title=" " alt="" coords="1896,63,2031,128"/>
<area shape="poly" title=" " alt="" coords="2019,126,2068,162,2112,208,2156,267,2186,318,2203,374,2209,447,2209,2707,2203,2734,2187,2759,2163,2783,2130,2805,2047,2844,1944,2877,1831,2905,1717,2928,1515,2959,1515,2953,1716,2923,1830,2900,1943,2872,2045,2839,2128,2800,2159,2778,2183,2756,2198,2732,2203,2706,2203,447,2198,375,2181,320,2152,270,2108,211,2064,166,2016,130"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html" title="Thread&#45;safe metric storage with ring buffer buffering." alt="" coords="856,2188,1041,2588"/>
<area shape="poly" title=" " alt="" coords="1896,109,1779,130,1642,162,1576,181,1518,202,1471,225,1440,250,1403,301,1383,349,1374,396,1374,443,1385,546,1388,606,1383,672,1378,757,1372,866,1361,974,1351,1019,1338,1053,1330,1062,1321,1066,1313,1070,1307,1077,1281,1135,1266,1186,1260,1233,1261,1279,1272,1376,1278,1433,1281,1499,1281,2037,1282,2104,1277,2132,1262,2165,1219,2221,1168,2268,1112,2308,1058,2340,1055,2335,1109,2304,1164,2264,1215,2217,1257,2163,1272,2131,1277,2103,1275,2037,1275,1499,1273,1433,1267,1377,1256,1279,1255,1233,1261,1185,1276,1133,1302,1075,1310,1066,1319,1062,1327,1058,1333,1051,1346,1017,1356,973,1367,866,1372,756,1378,672,1382,605,1380,547,1369,443,1369,395,1377,348,1399,298,1436,246,1468,221,1516,197,1575,176,1641,156,1778,125,1895,104"/>
<area shape="rect" href="../../d3/d10/classkcenon_1_1monitoring_1_1stream__aggregator.html" title="Full&#45;featured streaming aggregation." alt="" coords="1735,1564,1898,1824"/>
<area shape="poly" title=" " alt="" coords="1939,130,1903,184,1887,216,1874,249,1860,305,1849,371,1834,526,1827,702,1826,890,1830,1256,1831,1413,1829,1540,1828,1548,1823,1548,1823,1540,1826,1413,1825,1256,1820,890,1822,702,1829,525,1844,370,1855,304,1869,247,1882,213,1899,181,1935,127"/>
<area shape="rect" href="../../d8/dca/classkcenon_1_1monitoring_1_1online__statistics.html" title="Welford&#39;s algorithm for computing streaming statistics." alt="" coords="2040,672,2185,1052"/>
<area shape="poly" title=" " alt="" coords="1991,127,2028,181,2045,213,2059,247,2087,349,2105,455,2115,559,2120,656,2115,656,2110,559,2100,456,2082,351,2054,249,2040,215,2023,183,1987,130"/>
<area shape="rect" href="../../dc/ded/classkcenon_1_1monitoring_1_1quantile__estimator.html" title="PÂ² algorithm for streaming quantile estimation." alt="" coords="1883,248,2044,648"/>
<area shape="poly" title=" " alt="" coords="1966,128,1966,231,1961,231,1961,128"/>
<area shape="rect" title=" " alt="" coords="989,2665,1204,2745"/>
<area shape="poly" title=" " alt="" coords="1144,2744,1297,2874,1293,2878,1141,2748"/>
<area shape="poly" title=" " alt="" coords="1044,2585,1074,2649,1069,2651,1039,2588"/>
<area shape="rect" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html" title="Configuration for metric storage." alt="" coords="5,1945,239,2125"/>
<area shape="poly" title=" " alt="" coords="240,2116,253,2123,409,2196,569,2260,718,2313,841,2353,839,2358,716,2318,567,2265,407,2201,250,2128,238,2121"/>
<area shape="rect" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html" title="Statistics for metric storage performance." alt="" coords="263,1995,439,2075"/>
<area shape="poly" title=" " alt="" coords="393,2074,453,2123,552,2187,656,2245,842,2337,840,2342,654,2250,550,2191,450,2127,389,2078"/>
<area shape="rect" title=" " alt="" coords="274,1661,429,1727"/>
<area shape="poly" title=" " alt="" coords="354,1727,354,1979,349,1979,349,1727"/>
<area shape="rect" title=" " alt="" coords="463,1988,663,2083"/>
<area shape="poly" title=" " alt="" coords="600,2081,672,2162,758,2239,844,2308,841,2312,755,2243,668,2166,596,2085"/>
<area shape="rect" title=" " alt="" coords="687,1981,911,2090"/>
<area shape="poly" title=" " alt="" coords="796,2090,797,2127,803,2163,823,2212,849,2259,845,2262,818,2215,798,2165,791,2127,791,2090"/>
<area shape="rect" title=" " alt="" coords="996,415,1075,481"/>
<area shape="poly" title=" " alt="" coords="1033,481,972,872,932,1161,895,1460,890,1531,889,1591,891,1693,891,1742,887,1795,877,1854,861,1922,843,1967,838,1965,855,1921,872,1853,881,1794,885,1742,886,1693,883,1591,884,1530,890,1460,926,1161,967,871,1028,480"/>
<area shape="rect" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html" title="Thread&#45;safe time series data storage." alt="" coords="623,1076,781,1436"/>
<area shape="poly" title=" " alt="" coords="1018,482,992,521,956,566,913,611,863,650,839,659,818,659,799,661,781,674,766,705,756,748,752,799,751,855,754,967,751,1052,750,1060,745,1059,746,1052,749,967,746,855,747,799,751,747,761,703,777,670,797,656,817,654,838,654,861,646,909,608,952,563,988,518,1014,479"/>
<area shape="rect" title=" " alt="" coords="950,1460,1121,1540"/>
<area shape="poly" title=" " alt="" coords="1038,481,1038,1443,1033,1443,1033,481"/>
<area shape="rect" title=" " alt="" coords="1294,2651,1513,2760"/>
<area shape="poly" title=" " alt="" coords="1052,480,1087,565,1121,671,1142,777,1151,860,1157,944,1167,1052,1202,1389,1244,1823,1269,2046,1295,2255,1325,2440,1357,2587,1373,2634,1368,2636,1351,2589,1319,2441,1290,2256,1263,2046,1239,1824,1197,1390,1162,1052,1152,945,1146,861,1137,778,1115,673,1082,567,1047,482"/>
<area shape="rect" href="../../d0/dba/structkcenon_1_1monitoring_1_1aggregation__rule.html" title="Configuration for metric aggregation." alt="" coords="1316,1186,1480,1326"/>
<area shape="poly" title=" " alt="" coords="1060,480,1112,564,1140,616,1163,671,1181,728,1190,777,1197,864,1199,905,1205,949,1218,997,1239,1051,1276,1115,1321,1172,1316,1175,1272,1117,1234,1053,1212,998,1200,950,1194,906,1191,864,1185,778,1176,729,1158,673,1135,619,1107,566,1055,482"/>
<area shape="rect" title=" " alt="" coords="970,55,1101,135"/>
<area shape="poly" title=" " alt="" coords="1038,149,1038,415,1033,415,1033,149"/>
<area shape="rect" title=" " alt="" coords="638,1654,830,1734"/>
<area shape="poly" title=" " alt="" coords="744,1734,789,1964,783,1965,739,1735"/>
<area shape="poly" title=" " alt="" coords="718,1436,733,1637,727,1638,712,1436"/>
<area shape="rect" title=" " alt="" coords="571,415,655,481"/>
<area shape="poly" title=" " alt="" coords="612,481,605,578,600,720,605,885,613,969,626,1052,628,1059,622,1060,621,1052,608,970,599,885,595,720,599,578,607,481"/>
<area shape="rect" title=" " alt="" coords="679,401,850,495"/>
<area shape="poly" title=" " alt="" coords="751,496,726,578,706,672,696,771,691,871,692,1060,687,1060,686,871,691,771,701,672,721,576,746,495"/>
<area shape="rect" href="../../da/df4/structkcenon_1_1monitoring_1_1time__point__data.html" title="Single data point in time series." alt="" coords="692,5,837,185"/>
<area shape="poly" title=" " alt="" coords="767,185,767,384,762,384,762,185"/>
<area shape="rect" href="../../d3/d52/structkcenon_1_1monitoring_1_1time__series__config.html" title="Configuration for time series storage." alt="" coords="367,368,547,528"/>
<area shape="poly" title=" " alt="" coords="456,528,457,635,468,768,478,840,493,912,512,983,538,1051,572,1112,615,1166,610,1169,568,1115,533,1053,507,985,488,913,473,841,462,769,452,635,451,528"/>
<area shape="poly" title=" " alt="" coords="1032,1541,1006,1716,978,1946,961,2172,956,2171,973,1945,1000,1715,1026,1540"/>
<area shape="rect" title=" " alt="" coords="987,2003,1132,2068"/>
<area shape="poly" title=" " alt="" coords="1051,2069,1025,2150,1017,2173,1012,2171,1019,2149,1046,2067"/>
<area shape="rect" title=" " alt="" coords="1156,2003,1240,2068"/>
<area shape="poly" title=" " alt="" coords="1184,2070,1147,2127,1120,2151,1053,2235,1049,2231,1116,2148,1143,2124,1180,2067"/>
<area shape="poly" title=" " alt="" coords="1406,2760,1406,2806,1401,2806,1401,2760"/>
<area shape="rect" href="../../d7/d92/structkcenon_1_1monitoring_1_1aggregation__processor_1_1aggregator__entry.html" title=" " alt="" coords="1366,2341,1537,2435"/>
<area shape="poly" title=" " alt="" coords="1447,2436,1417,2635,1411,2634,1442,2435"/>
<area shape="poly" title=" " alt="" coords="1404,1326,1451,2324,1446,2324,1399,1326"/>
<area shape="rect" title=" " alt="" coords="1450,415,1607,481"/>
<area shape="poly" title=" " alt="" coords="1511,482,1465,566,1442,618,1425,673,1411,739,1401,807,1390,942,1389,1067,1394,1169,1388,1170,1384,1068,1385,942,1395,806,1405,738,1419,671,1437,617,1460,564,1506,480"/>
<area shape="poly" title=" " alt="" coords="1530,481,1525,685,1520,985,1524,1272,1531,1376,1543,1435,1578,1495,1623,1548,1673,1594,1723,1632,1720,1637,1670,1598,1619,1552,1573,1498,1538,1437,1526,1376,1519,1272,1515,985,1519,685,1525,481"/>
<area shape="rect" href="../../dd/d14/structkcenon_1_1monitoring_1_1stream__aggregator__config.html" title="Configuration for stream aggregator." alt="" coords="1618,1179,1807,1333"/>
<area shape="poly" title=" " alt="" coords="1538,480,1694,1162,1689,1163,1533,481"/>
<area shape="rect" title=" " alt="" coords="1553,1995,1793,2075"/>
<area shape="poly" title=" " alt="" coords="1650,2077,1491,2328,1487,2325,1646,2074"/>
<area shape="poly" title=" " alt="" coords="1764,1825,1698,1981,1693,1979,1759,1823"/>
<area shape="poly" title=" " alt="" coords="1729,1333,1748,1432,1773,1539,1775,1547,1770,1549,1767,1541,1743,1433,1723,1334"/>
<area shape="poly" title=" " alt="" coords="2122,1052,2122,1190,2115,1332,2108,1397,2098,1456,2084,1505,2067,1541,2035,1580,1997,1612,1956,1638,1915,1659,1912,1655,1953,1634,1994,1607,2031,1576,2062,1539,2079,1503,2093,1455,2103,1397,2110,1331,2117,1190,2117,1052"/>
<area shape="rect" title=" " alt="" coords="1883,1209,2068,1303"/>
<area shape="poly" title=" " alt="" coords="1961,1304,1872,1549,1867,1548,1956,1303"/>
<area shape="poly" title=" " alt="" coords="1954,648,1949,844,1954,1052,1969,1192,1963,1193,1949,1052,1944,844,1949,648"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d92/structkcenon_1_1monitoring_1_1aggregation__processor_1_1aggregator__entry.html">aggregator_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a593ba79d8e2e44589db3c6a7a514a8ad" id="r_a593ba79d8e2e44589db3c6a7a514a8ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a593ba79d8e2e44589db3c6a7a514a8ad">aggregation_processor</a> ()</td></tr>
<tr class="memdesc:a593ba79d8e2e44589db3c6a7a514a8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <br /></td></tr>
<tr class="separator:a593ba79d8e2e44589db3c6a7a514a8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5623eee44b6ff26d525ab658fa7ed6" id="r_a9c5623eee44b6ff26d525ab658fa7ed6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a9c5623eee44b6ff26d525ab658fa7ed6">aggregation_processor</a> (std::shared_ptr&lt; <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &gt; <a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a>)</td></tr>
<tr class="memdesc:a9c5623eee44b6ff26d525ab658fa7ed6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor with storage backend.  <br /></td></tr>
<tr class="separator:a9c5623eee44b6ff26d525ab658fa7ed6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3857047a067fdf6e298c03ea6dbaa1f1" id="r_a3857047a067fdf6e298c03ea6dbaa1f1"><td class="memItemLeft" align="right" valign="top">common::VoidResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a3857047a067fdf6e298c03ea6dbaa1f1">add_aggregation_rule</a> (const <a class="el" href="../../d0/dba/structkcenon_1_1monitoring_1_1aggregation__rule.html">aggregation_rule</a> &amp;rule)</td></tr>
<tr class="memdesc:a3857047a067fdf6e298c03ea6dbaa1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an aggregation rule.  <br /></td></tr>
<tr class="separator:a3857047a067fdf6e298c03ea6dbaa1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c07c71b390ed86f45024b6c846a7d8" id="r_a85c07c71b390ed86f45024b6c846a7d8"><td class="memItemLeft" align="right" valign="top">common::VoidResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a85c07c71b390ed86f45024b6c846a7d8">process_observation</a> (const std::string &amp;metric_name, double value)</td></tr>
<tr class="memdesc:a85c07c71b390ed86f45024b6c846a7d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process an observation for a metric.  <br /></td></tr>
<tr class="separator:a85c07c71b390ed86f45024b6c846a7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa610f99d1e367de19dd4dd4ffe116827" id="r_aa610f99d1e367de19dd4dd4ffe116827"><td class="memItemLeft" align="right" valign="top">common::Result&lt; <a class="el" href="../../d9/dae/structkcenon_1_1monitoring_1_1streaming__statistics.html">streaming_statistics</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#aa610f99d1e367de19dd4dd4ffe116827">get_current_statistics</a> (const std::string &amp;metric_name) const</td></tr>
<tr class="memdesc:aa610f99d1e367de19dd4dd4ffe116827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current statistics for a metric.  <br /></td></tr>
<tr class="separator:aa610f99d1e367de19dd4dd4ffe116827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6731d5b273f0eb63f6fdc6e395d4a9a" id="r_ad6731d5b273f0eb63f6fdc6e395d4a9a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#ad6731d5b273f0eb63f6fdc6e395d4a9a">get_configured_metrics</a> () const</td></tr>
<tr class="memdesc:ad6731d5b273f0eb63f6fdc6e395d4a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of configured metrics.  <br /></td></tr>
<tr class="separator:ad6731d5b273f0eb63f6fdc6e395d4a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7046374cb5c813c11edcc204ae4ae34e" id="r_a7046374cb5c813c11edcc204ae4ae34e"><td class="memItemLeft" align="right" valign="top">common::Result&lt; <a class="el" href="../../d8/de5/structkcenon_1_1monitoring_1_1stream__aggregation__result.html">stream_aggregation_result</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a7046374cb5c813c11edcc204ae4ae34e">force_aggregation</a> (const std::string &amp;metric_name)</td></tr>
<tr class="memdesc:a7046374cb5c813c11edcc204ae4ae34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force aggregation for a metric.  <br /></td></tr>
<tr class="separator:a7046374cb5c813c11edcc204ae4ae34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52532800c11af76ba3494751189d5add" id="r_a52532800c11af76ba3494751189d5add"><td class="memItemLeft" align="right" valign="top">common::VoidResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a52532800c11af76ba3494751189d5add">remove_aggregation_rule</a> (const std::string &amp;metric_name)</td></tr>
<tr class="memdesc:a52532800c11af76ba3494751189d5add"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an aggregation rule.  <br /></td></tr>
<tr class="separator:a52532800c11af76ba3494751189d5add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a8a66d06f6866f3dedad9e7e74678d" id="r_a68a8a66d06f6866f3dedad9e7e74678d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a68a8a66d06f6866f3dedad9e7e74678d">has_rule</a> (const std::string &amp;metric_name) const</td></tr>
<tr class="memdesc:a68a8a66d06f6866f3dedad9e7e74678d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a metric has an aggregation rule.  <br /></td></tr>
<tr class="separator:a68a8a66d06f6866f3dedad9e7e74678d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad832569d8ae5297a0cbfed7a42dcd989" id="r_ad832569d8ae5297a0cbfed7a42dcd989"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#ad832569d8ae5297a0cbfed7a42dcd989">rule_count</a> () const</td></tr>
<tr class="memdesc:ad832569d8ae5297a0cbfed7a42dcd989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of configured rules.  <br /></td></tr>
<tr class="separator:ad832569d8ae5297a0cbfed7a42dcd989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d6f067d00f51c63372d7ef5302262a6" id="r_a4d6f067d00f51c63372d7ef5302262a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4d6f067d00f51c63372d7ef5302262a6">clear</a> ()</td></tr>
<tr class="memdesc:a4d6f067d00f51c63372d7ef5302262a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all aggregation rules.  <br /></td></tr>
<tr class="separator:a4d6f067d00f51c63372d7ef5302262a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4692b371ac0201c870e932dd49a89a7a" id="r_a4692b371ac0201c870e932dd49a89a7a"><td class="memItemLeft" align="right" valign="top">std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a></td></tr>
<tr class="separator:a4692b371ac0201c870e932dd49a89a7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034e2a680a4b5ad0fabea54fde61dc96" id="r_a034e2a680a4b5ad0fabea54fde61dc96"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a></td></tr>
<tr class="separator:a034e2a680a4b5ad0fabea54fde61dc96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd931641dc38216b2708840b966d789" id="r_adbd931641dc38216b2708840b966d789"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, <a class="el" href="../../d7/d92/structkcenon_1_1monitoring_1_1aggregation__processor_1_1aggregator__entry.html">aggregator_entry</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a></td></tr>
<tr class="separator:adbd931641dc38216b2708840b966d789"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Processes metric streams and generates aggregated statistics. </p>
<p>The aggregation processor manages multiple stream aggregators, one for each configured metric, and periodically computes and stores aggregated statistics. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00112">112</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a593ba79d8e2e44589db3c6a7a514a8ad" name="a593ba79d8e2e44589db3c6a7a514a8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593ba79d8e2e44589db3c6a7a514a8ad">&#9670;&#160;</a></span>aggregation_processor() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kcenon::monitoring::aggregation_processor::aggregation_processor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00117">117</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  117</span>: <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>(<span class="keyword">nullptr</span>) {}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1aggregation__processor_html_a034e2a680a4b5ad0fabea54fde61dc96"><div class="ttname"><a href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">kcenon::monitoring::aggregation_processor::storage_</a></div><div class="ttdeci">std::shared_ptr&lt; metric_storage &gt; storage_</div><div class="ttdef"><b>Definition</b> <a href="../../d6/db7/aggregation__processor_8h_source.html#l00325">aggregation_processor.h:325</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c5623eee44b6ff26d525ab658fa7ed6" name="a9c5623eee44b6ff26d525ab658fa7ed6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5623eee44b6ff26d525ab658fa7ed6">&#9670;&#160;</a></span>aggregation_processor() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kcenon::monitoring::aggregation_processor::aggregation_processor </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &gt;&#160;</td>
          <td class="paramname"><em>storage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor with storage backend. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage</td><td>Shared pointer to metric storage </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00123">123</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  124</span>        : <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>(std::move(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a>)) {}</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">kcenon::monitoring::sensor_type::storage</a></div><div class="ttdeci">@ storage</div><div class="ttdoc">Storage device sensor.</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3857047a067fdf6e298c03ea6dbaa1f1" name="a3857047a067fdf6e298c03ea6dbaa1f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3857047a067fdf6e298c03ea6dbaa1f1">&#9670;&#160;</a></span>add_aggregation_rule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::VoidResult kcenon::monitoring::aggregation_processor::add_aggregation_rule </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/dba/structkcenon_1_1monitoring_1_1aggregation__rule.html">aggregation_rule</a> &amp;&#160;</td>
          <td class="paramname"><em>rule</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add an aggregation rule. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rule</td><td>The aggregation rule to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result indicating success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00131">131</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>                                                                        {</div>
<div class="line"><span class="lineno">  132</span>        <span class="keyword">auto</span> validation = rule.validate();</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">if</span> (validation.is_err()) {</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">return</span> validation;</div>
<div class="line"><span class="lineno">  135</span>        }</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>        <span class="comment">// Check for duplicate</span></div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(rule.source_metric) != <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end()) {</div>
<div class="line"><span class="lineno">  141</span>            <span class="keywordflow">return</span> common::VoidResult::err(error_info(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea7a6f43ded24333b44b8a5d5dc159c4ea">monitoring_error_code::already_exists</a>,</div>
<div class="line"><span class="lineno">  142</span>                                   <span class="stringliteral">&quot;Aggregation rule already exists for metric: &quot;</span> +</div>
<div class="line"><span class="lineno">  143</span>                                   rule.source_metric).to_common_error());</div>
<div class="line"><span class="lineno">  144</span>        }</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        <span class="comment">// Create stream aggregator config</span></div>
<div class="line"><span class="lineno">  147</span>        stream_aggregator_config config;</div>
<div class="line"><span class="lineno">  148</span>        config.enable_outlier_detection = rule.detect_outliers;</div>
<div class="line"><span class="lineno">  149</span>        config.outlier_threshold = rule.outlier_threshold;</div>
<div class="line"><span class="lineno">  150</span>        config.percentiles_to_track = rule.percentiles;</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>        <span class="comment">// Create aggregator</span></div>
<div class="line"><span class="lineno">  153</span>        aggregator_entry entry;</div>
<div class="line"><span class="lineno">  154</span>        entry.rule = rule;</div>
<div class="line"><span class="lineno">  155</span>        entry.aggregator = std::make_unique&lt;stream_aggregator&gt;(config);</div>
<div class="line"><span class="lineno">  156</span>        entry.last_aggregation = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>        <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.emplace(rule.source_metric, std::move(entry));</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">return</span> common::ok();</div>
<div class="line"><span class="lineno">  161</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1aggregation__processor_html_a4692b371ac0201c870e932dd49a89a7a"><div class="ttname"><a href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">kcenon::monitoring::aggregation_processor::mutex_</a></div><div class="ttdeci">std::shared_mutex mutex_</div><div class="ttdef"><b>Definition</b> <a href="../../d6/db7/aggregation__processor_8h_source.html#l00324">aggregation_processor.h:324</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1aggregation__processor_html_adbd931641dc38216b2708840b966d789"><div class="ttname"><a href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">kcenon::monitoring::aggregation_processor::aggregators_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, aggregator_entry &gt; aggregators_</div><div class="ttdef"><b>Definition</b> <a href="../../d6/db7/aggregation__processor_8h_source.html#l00326">aggregation_processor.h:326</a></div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_ab0f9a44e05c0521f5686fd2ac5d2c83ea7a6f43ded24333b44b8a5d5dc159c4ea"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea7a6f43ded24333b44b8a5d5dc159c4ea">kcenon::monitoring::monitoring_error_code::already_exists</a></div><div class="ttdeci">@ already_exists</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_cgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_cgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_cgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_cgraph">
<area shape="rect" title="Add an aggregation rule." alt="" coords="5,34,184,89"/>
<area shape="rect" href="../../d5/d36/structkcenon_1_1monitoring_1_1error__info.html#a708459545c76e0e9c5d07ffa9b9e2785" title="Convert to common_system error_info." alt="" coords="232,5,448,45"/>
<area shape="poly" title=" " alt="" coords="184,46,218,41,219,46,185,51"/>
<area shape="rect" href="../../d0/dba/structkcenon_1_1monitoring_1_1aggregation__rule.html#aef5be74034315bf7cabea8c2d954c860" title="Validate the aggregation rule." alt="" coords="266,70,414,125"/>
<area shape="poly" title=" " alt="" coords="185,72,253,82,252,87,184,77"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_icgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_icgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_icgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a3857047a067fdf6e298c03ea6dbaa1f1_icgraph">
<area shape="rect" title="Add an aggregation rule." alt="" coords="123,65,301,120"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ab0ef68a15301bb34ada351c58bb424f5" title=" " alt="" coords="5,5,75,31"/>
<area shape="poly" title=" " alt="" coords="135,62,69,33,71,28,137,57"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ae5371f8050a47c0081c6d971af684e4d" title=" " alt="" coords="5,55,75,80"/>
<area shape="poly" title=" " alt="" coords="109,80,74,75,75,70,109,75"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#a4227fb8fd285d757ee063d5729a9e307" title=" " alt="" coords="5,104,75,129"/>
<area shape="poly" title=" " alt="" coords="109,110,75,115,74,109,109,104"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#aefb77db560ad73ad96f2e7ddfcbc1d24" title=" " alt="" coords="5,153,75,179"/>
<area shape="poly" title=" " alt="" coords="136,128,72,156,70,151,134,123"/>
</map>
</div>

</div>
</div>
<a id="a4d6f067d00f51c63372d7ef5302262a6" name="a4d6f067d00f51c63372d7ef5302262a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d6f067d00f51c63372d7ef5302262a6">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kcenon::monitoring::aggregation_processor::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear all aggregation rules. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00312">312</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  312</span>                 {</div>
<div class="line"><span class="lineno">  313</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  314</span>        <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.clear();</div>
<div class="line"><span class="lineno">  315</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7046374cb5c813c11edcc204ae4ae34e" name="a7046374cb5c813c11edcc204ae4ae34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7046374cb5c813c11edcc204ae4ae34e">&#9670;&#160;</a></span>force_aggregation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::Result&lt; <a class="el" href="../../d8/de5/structkcenon_1_1monitoring_1_1stream__aggregation__result.html">stream_aggregation_result</a> &gt; kcenon::monitoring::aggregation_processor::force_aggregation </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>metric_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Force aggregation for a metric. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>The metric name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result containing the aggregation result </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00221">221</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  221</span>                                                                                            {</div>
<div class="line"><span class="lineno">  222</span>        <span class="keyword">auto</span> start_time = std::chrono::steady_clock::now();</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(metric_name);</div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end()) {</div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">return</span> common::make_error&lt;stream_aggregation_result&gt;(</div>
<div class="line"><span class="lineno">  229</span>                <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea56d6e1482db93bec9f173a8a021b9735">monitoring_error_code::metric_not_found</a>),</div>
<div class="line"><span class="lineno">  230</span>                <span class="stringliteral">&quot;No aggregator found for metric: &quot;</span> + metric_name);</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>        <span class="keyword">auto</span>&amp; entry = it-&gt;second;</div>
<div class="line"><span class="lineno">  234</span>        <span class="keyword">auto</span> stats = entry.aggregator-&gt;get_statistics();</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>        <span class="keyword">auto</span> end_time = std::chrono::steady_clock::now();</div>
<div class="line"><span class="lineno">  237</span>        <span class="keyword">auto</span> duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(</div>
<div class="line"><span class="lineno">  238</span>            end_time - start_time);</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>        stream_aggregation_result agg_result;</div>
<div class="line"><span class="lineno">  241</span>        agg_result.source_metric = metric_name;</div>
<div class="line"><span class="lineno">  242</span>        agg_result.samples_processed = stats.count;</div>
<div class="line"><span class="lineno">  243</span>        agg_result.processing_duration = duration;</div>
<div class="line"><span class="lineno">  244</span>        agg_result.statistics = stats;</div>
<div class="line"><span class="lineno">  245</span>        agg_result.timestamp = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>        <span class="comment">// Store aggregated metrics if storage is available</span></div>
<div class="line"><span class="lineno">  248</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>) {</div>
<div class="line"><span class="lineno">  249</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; prefix = entry.rule.target_metric_prefix;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>            <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + <span class="stringliteral">&quot;.mean&quot;</span>, stats.mean, <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>);</div>
<div class="line"><span class="lineno">  252</span>            <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + <span class="stringliteral">&quot;.min&quot;</span>, stats.min_value, <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>);</div>
<div class="line"><span class="lineno">  253</span>            <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + <span class="stringliteral">&quot;.max&quot;</span>, stats.max_value, <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>);</div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + <span class="stringliteral">&quot;.stddev&quot;</span>, stats.std_deviation, <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>);</div>
<div class="line"><span class="lineno">  255</span>            <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + <span class="stringliteral">&quot;.count&quot;</span>,</div>
<div class="line"><span class="lineno">  256</span>                                   <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(stats.count), <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a886bb73b3156b0aa24aac99d2de0b238">metric_type::counter</a>);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [p, value] : stats.percentiles) {</div>
<div class="line"><span class="lineno">  259</span>                std::string suffix = <span class="stringliteral">&quot;.p&quot;</span> + std::to_string(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(p * 100));</div>
<div class="line"><span class="lineno">  260</span>                <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a034e2a680a4b5ad0fabea54fde61dc96">storage_</a>-&gt;store_metric(prefix + suffix, value, <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>);</div>
<div class="line"><span class="lineno">  261</span>            }</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>            agg_result.stored_successfully = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  264</span>        }</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">// Reset the aggregator for next interval</span></div>
<div class="line"><span class="lineno">  267</span>        entry.aggregator-&gt;reset();</div>
<div class="line"><span class="lineno">  268</span>        entry.last_aggregation = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">return</span> common::ok(agg_result);</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">kcenon::monitoring::metric_type::gauge</a></div><div class="ttdeci">@ gauge</div><div class="ttdoc">Instantaneous value that can go up and down.</div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a02c7867f24a6cbd907fdc07b4f294727a886bb73b3156b0aa24aac99d2de0b238"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a886bb73b3156b0aa24aac99d2de0b238">kcenon::monitoring::metric_type::counter</a></div><div class="ttdeci">@ counter</div><div class="ttdoc">Monotonically increasing counter.</div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_ab0f9a44e05c0521f5686fd2ac5d2c83ea56d6e1482db93bec9f173a8a021b9735"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea56d6e1482db93bec9f173a8a021b9735">kcenon::monitoring::monitoring_error_code::metric_not_found</a></div><div class="ttdeci">@ metric_not_found</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a7046374cb5c813c11edcc204ae4ae34e_icgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a7046374cb5c813c11edcc204ae4ae34e_icgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a7046374cb5c813c11edcc204ae4ae34e_icgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a7046374cb5c813c11edcc204ae4ae34e_icgraph">
<area shape="rect" title="Force aggregation for a metric." alt="" coords="123,5,301,60"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ae5371f8050a47c0081c6d971af684e4d" title=" " alt="" coords="5,20,75,45"/>
<area shape="poly" title=" " alt="" coords="109,35,75,35,75,30,109,30"/>
</map>
</div>

</div>
</div>
<a id="ad6731d5b273f0eb63f6fdc6e395d4a9a" name="ad6731d5b273f0eb63f6fdc6e395d4a9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6731d5b273f0eb63f6fdc6e395d4a9a">&#9670;&#160;</a></span>get_configured_metrics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; kcenon::monitoring::aggregation_processor::get_configured_metrics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get list of configured metrics. </p>
<dl class="section return"><dt>Returns</dt><dd>Vector of metric names </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00203">203</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  203</span>                                                        {</div>
<div class="line"><span class="lineno">  204</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>        std::vector&lt;std::string&gt; metrics;</div>
<div class="line"><span class="lineno">  207</span>        metrics.reserve(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.size());</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [name, entry] : <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>) {</div>
<div class="line"><span class="lineno">  210</span>            metrics.push_back(name);</div>
<div class="line"><span class="lineno">  211</span>        }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">return</span> metrics;</div>
<div class="line"><span class="lineno">  214</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_ad6731d5b273f0eb63f6fdc6e395d4a9a_icgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_ad6731d5b273f0eb63f6fdc6e395d4a9a_icgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_ad6731d5b273f0eb63f6fdc6e395d4a9a_icgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_ad6731d5b273f0eb63f6fdc6e395d4a9a_icgraph">
<area shape="rect" title="Get list of configured metrics." alt="" coords="123,5,305,60"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#aefb77db560ad73ad96f2e7ddfcbc1d24" title=" " alt="" coords="5,20,75,45"/>
<area shape="poly" title=" " alt="" coords="109,35,75,35,75,30,109,30"/>
</map>
</div>

</div>
</div>
<a id="aa610f99d1e367de19dd4dd4ffe116827" name="aa610f99d1e367de19dd4dd4ffe116827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa610f99d1e367de19dd4dd4ffe116827">&#9670;&#160;</a></span>get_current_statistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::Result&lt; <a class="el" href="../../d9/dae/structkcenon_1_1monitoring_1_1streaming__statistics.html">streaming_statistics</a> &gt; kcenon::monitoring::aggregation_processor::get_current_statistics </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>metric_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get current statistics for a metric. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>The metric name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result containing the statistics </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00186">186</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>                                                                                                  {</div>
<div class="line"><span class="lineno">  187</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(metric_name);</div>
<div class="line"><span class="lineno">  190</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end()) {</div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">return</span> common::make_error&lt;streaming_statistics&gt;(</div>
<div class="line"><span class="lineno">  192</span>                <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea56d6e1482db93bec9f173a8a021b9735">monitoring_error_code::metric_not_found</a>),</div>
<div class="line"><span class="lineno">  193</span>                <span class="stringliteral">&quot;No aggregator found for metric: &quot;</span> + metric_name);</div>
<div class="line"><span class="lineno">  194</span>        }</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">return</span> common::ok(it-&gt;second.aggregator-&gt;get_statistics());</div>
<div class="line"><span class="lineno">  197</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_aa610f99d1e367de19dd4dd4ffe116827_icgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_aa610f99d1e367de19dd4dd4ffe116827_icgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_aa610f99d1e367de19dd4dd4ffe116827_icgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_aa610f99d1e367de19dd4dd4ffe116827_icgraph">
<area shape="rect" title="Get current statistics for a metric." alt="" coords="123,5,301,60"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ab0ef68a15301bb34ada351c58bb424f5" title=" " alt="" coords="5,20,75,45"/>
<area shape="poly" title=" " alt="" coords="109,35,75,35,75,30,109,30"/>
</map>
</div>

</div>
</div>
<a id="a68a8a66d06f6866f3dedad9e7e74678d" name="a68a8a66d06f6866f3dedad9e7e74678d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68a8a66d06f6866f3dedad9e7e74678d">&#9670;&#160;</a></span>has_rule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool kcenon::monitoring::aggregation_processor::has_rule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>metric_name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a metric has an aggregation rule. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>The metric name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if rule exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00296">296</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  296</span>                                                      {</div>
<div class="line"><span class="lineno">  297</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(metric_name) != <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end();</div>
<div class="line"><span class="lineno">  299</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a85c07c71b390ed86f45024b6c846a7d8" name="a85c07c71b390ed86f45024b6c846a7d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c07c71b390ed86f45024b6c846a7d8">&#9670;&#160;</a></span>process_observation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::VoidResult kcenon::monitoring::aggregation_processor::process_observation </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>metric_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process an observation for a metric. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>The metric name </td></tr>
    <tr><td class="paramname">value</td><td>The observed value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result indicating success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00169">169</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>                                                                                     {</div>
<div class="line"><span class="lineno">  170</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(metric_name);</div>
<div class="line"><span class="lineno">  173</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end()) {</div>
<div class="line"><span class="lineno">  174</span>            <span class="comment">// No rule for this metric, silently accept</span></div>
<div class="line"><span class="lineno">  175</span>            <span class="keywordflow">return</span> common::ok();</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordflow">return</span> it-&gt;second.aggregator-&gt;add_observation(value);</div>
<div class="line"><span class="lineno">  179</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a85c07c71b390ed86f45024b6c846a7d8_icgraph.png" border="0" usemap="#adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a85c07c71b390ed86f45024b6c846a7d8_icgraph" alt=""/></div>
<map name="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a85c07c71b390ed86f45024b6c846a7d8_icgraph" id="adf/d6f/classkcenon_1_1monitoring_1_1aggregation__processor_a85c07c71b390ed86f45024b6c846a7d8_icgraph">
<area shape="rect" title="Process an observation for a metric." alt="" coords="123,40,301,95"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ab0ef68a15301bb34ada351c58bb424f5" title=" " alt="" coords="5,5,75,31"/>
<area shape="poly" title=" " alt="" coords="109,40,74,30,75,25,110,35"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#ae5371f8050a47c0081c6d971af684e4d" title=" " alt="" coords="5,55,75,80"/>
<area shape="poly" title=" " alt="" coords="109,70,75,70,75,65,109,65"/>
<area shape="rect" href="../../db/d5e/test__stream__aggregation_8cpp.html#aefb77db560ad73ad96f2e7ddfcbc1d24" title=" " alt="" coords="5,104,75,129"/>
<area shape="poly" title=" " alt="" coords="110,99,75,109,74,104,109,94"/>
</map>
</div>

</div>
</div>
<a id="a52532800c11af76ba3494751189d5add" name="a52532800c11af76ba3494751189d5add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52532800c11af76ba3494751189d5add">&#9670;&#160;</a></span>remove_aggregation_rule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::VoidResult kcenon::monitoring::aggregation_processor::remove_aggregation_rule </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>metric_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove an aggregation rule. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metric_name</td><td>The metric name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result indicating success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00278">278</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  278</span>                                                                           {</div>
<div class="line"><span class="lineno">  279</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.find(metric_name);</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.end()) {</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">return</span> common::VoidResult::err(error_info(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83ea56d6e1482db93bec9f173a8a021b9735">monitoring_error_code::metric_not_found</a>,</div>
<div class="line"><span class="lineno">  284</span>                                   <span class="stringliteral">&quot;No aggregator found for metric: &quot;</span> + metric_name).to_common_error());</div>
<div class="line"><span class="lineno">  285</span>        }</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>        <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.erase(it);</div>
<div class="line"><span class="lineno">  288</span>        <span class="keywordflow">return</span> common::ok();</div>
<div class="line"><span class="lineno">  289</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad832569d8ae5297a0cbfed7a42dcd989" name="ad832569d8ae5297a0cbfed7a42dcd989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad832569d8ae5297a0cbfed7a42dcd989">&#9670;&#160;</a></span>rule_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t kcenon::monitoring::aggregation_processor::rule_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of configured rules. </p>

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00304">304</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  304</span>                              {</div>
<div class="line"><span class="lineno">  305</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#a4692b371ac0201c870e932dd49a89a7a">mutex_</a>);</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../df/d6f/classkcenon_1_1monitoring_1_1aggregation__processor.html#adbd931641dc38216b2708840b966d789">aggregators_</a>.size();</div>
<div class="line"><span class="lineno">  307</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="adbd931641dc38216b2708840b966d789" name="adbd931641dc38216b2708840b966d789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd931641dc38216b2708840b966d789">&#9670;&#160;</a></span>aggregators_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, <a class="el" href="../../d7/d92/structkcenon_1_1monitoring_1_1aggregation__processor_1_1aggregator__entry.html">aggregator_entry</a>&gt; kcenon::monitoring::aggregation_processor::aggregators_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00326">326</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>

</div>
</div>
<a id="a4692b371ac0201c870e932dd49a89a7a" name="a4692b371ac0201c870e932dd49a89a7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4692b371ac0201c870e932dd49a89a7a">&#9670;&#160;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_mutex kcenon::monitoring::aggregation_processor::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00324">324</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>

</div>
</div>
<a id="a034e2a680a4b5ad0fabea54fde61dc96" name="a034e2a680a4b5ad0fabea54fde61dc96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034e2a680a4b5ad0fabea54fde61dc96">&#9670;&#160;</a></span>storage_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a>&gt; kcenon::monitoring::aggregation_processor::storage_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html#l00325">325</a> of file <a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/kcenon/monitoring/utils/<a class="el" href="../../d6/db7/aggregation__processor_8h_source.html">aggregation_processor.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 21 2026 12:10:20 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
