<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: tests/test_event_bus.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">test_event_bus.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Test for event-driven communication system.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;gtest/gtest.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d46/logger__system__adapter_8h_source.html">kcenon/monitoring/adapters/logger_system_adapter.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d9/d7a/thread__system__adapter_8h_source.html">kcenon/monitoring/adapters/thread_system_adapter.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/d6d/event__bus_8h_source.html">kcenon/monitoring/core/event_bus.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../de/d0f/event__types_8h_source.html">kcenon/monitoring/core/event_types.h</a>&gt;</code><br />
<code>#include &lt;atomic&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;condition_variable&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_event_bus.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/df6/test__event__bus_8cpp__incl.png" border="0" usemap="#atests_2test__event__bus_8cpp" alt=""/></div>
<map name="atests_2test__event__bus_8cpp" id="atests_2test__event__bus_8cpp">
<area shape="rect" title="Test for event&#45;driven communication system." alt="" coords="1527,5,1711,31"/>
<area shape="rect" title=" " alt="" coords="5,86,109,111"/>
<area shape="poly" title=" " alt="" coords="1526,23,1227,28,823,38,422,56,255,67,128,81,108,85,107,80,128,76,254,62,421,50,823,33,1227,23,1526,18"/>
<area shape="rect" href="../../d8/d46/logger__system__adapter_8h.html" title=" " alt="" coords="1028,79,1233,119"/>
<area shape="poly" title=" " alt="" coords="1548,33,1248,81,1247,76,1547,28"/>
<area shape="rect" title=" " alt="" coords="3303,343,3369,368"/>
<area shape="poly" title=" " alt="" coords="1711,20,2081,38,2581,68,2828,88,3046,110,3212,136,3270,150,3308,164,3335,182,3353,201,3366,223,3377,254,3381,275,3377,295,3369,316,3357,333,3353,330,3364,313,3372,294,3376,275,3372,255,3361,226,3349,204,3332,186,3305,169,3269,155,3211,141,3045,116,2828,93,2581,73,2081,43,1711,26"/>
<area shape="rect" title=" " alt="" coords="925,416,992,441"/>
<area shape="poly" title=" " alt="" coords="1526,25,1209,38,795,64,594,83,421,107,349,121,291,135,248,151,223,168,213,188,218,207,235,227,264,246,303,266,350,285,463,321,590,353,715,380,912,417,911,422,714,386,588,358,462,326,348,290,301,271,261,251,231,231,213,209,208,187,219,165,246,147,289,130,348,115,420,102,594,78,795,59,1209,32,1526,19"/>
<area shape="rect" title=" " alt="" coords="2208,262,2272,287"/>
<area shape="poly" title=" " alt="" coords="1711,25,1850,42,2008,70,2084,89,2150,111,2204,136,2224,150,2239,165,2250,185,2254,207,2250,249,2244,249,2249,208,2245,187,2235,168,2221,154,2201,140,2148,116,2082,94,2007,76,1849,48,1710,30"/>
<area shape="rect" href="../../dd/d6d/event__bus_8h.html" title="Lightweight event bus implementation for monitoring system." alt="" coords="2398,174,2543,199"/>
<area shape="poly" title=" " alt="" coords="1711,19,1857,25,2029,36,2191,52,2257,63,2308,76,2349,94,2388,117,2449,163,2446,167,2385,122,2347,99,2306,81,2256,68,2190,58,2029,41,1857,30,1711,24"/>
<area shape="rect" title=" " alt="" coords="3155,262,3298,287"/>
<area shape="poly" title=" " alt="" coords="1711,20,2003,37,2184,53,2364,76,2603,119,2834,170,3034,219,3173,256,3172,261,3032,224,2833,175,2601,124,2364,81,2183,58,2003,42,1711,25"/>
<area shape="rect" href="../../de/d0f/event__types_8h.html" title="Common event type definitions for monitoring system." alt="" coords="982,174,1141,199"/>
<area shape="poly" title=" " alt="" coords="1581,33,1113,173,1112,168,1580,28"/>
<area shape="rect" href="../../d9/d7a/thread__system__adapter_8h.html" title=" " alt="" coords="1516,79,1721,119"/>
<area shape="poly" title=" " alt="" coords="1621,31,1621,65,1616,65,1616,31"/>
<area shape="poly" title=" " alt="" coords="1234,103,1504,116,1800,128,2030,134,2261,144,2556,164,2675,166,2780,158,2964,135,3049,134,3091,139,3134,148,3177,164,3220,186,3266,215,3313,253,3326,269,3334,289,3340,328,3334,329,3329,290,3321,272,3309,257,3262,220,3218,190,3174,169,3132,154,3090,144,3049,139,2964,140,2780,163,2675,172,2556,169,2260,149,2030,140,1800,133,1504,121,1234,108"/>
<area shape="poly" title=" " alt="" coords="1028,105,942,116,895,127,849,142,805,162,764,187,728,218,700,256,692,272,690,287,692,301,698,314,720,339,752,361,791,379,834,394,912,415,911,421,832,399,789,384,749,365,716,343,693,317,687,303,685,287,687,271,695,253,724,214,761,182,802,157,847,137,894,122,941,111,1028,99"/>
<area shape="rect" title=" " alt="" coords="2228,343,2305,368"/>
<area shape="poly" title=" " alt="" coords="1234,104,1395,120,1603,148,1832,191,1948,219,2060,252,2158,293,2237,334,2234,338,2156,297,2058,257,1946,224,1831,196,1602,153,1395,125,1233,110"/>
<area shape="rect" title=" " alt="" coords="761,497,836,522"/>
<area shape="poly" title=" " alt="" coords="1028,106,877,113,710,126,568,144,520,156,495,169,479,191,471,215,470,238,476,262,487,285,504,309,548,354,603,396,661,434,762,488,760,493,658,438,600,401,545,358,500,312,483,288,471,263,465,238,466,214,474,189,492,165,518,151,567,139,709,120,877,108,1028,101"/>
<area shape="rect" title=" " alt="" coords="796,577,855,603"/>
<area shape="poly" title=" " alt="" coords="1028,103,815,108,563,118,444,126,341,138,265,152,239,160,223,169,204,191,198,214,200,273,200,430,205,451,219,469,241,487,270,502,346,529,437,549,535,564,631,574,783,584,782,590,631,579,535,569,436,554,344,534,268,507,238,491,215,473,200,453,195,430,195,273,193,213,200,189,220,165,237,155,263,147,341,132,443,121,562,113,815,102,1028,98"/>
<area shape="poly" title=" " alt="" coords="1234,103,1745,132,1985,150,2105,164,2141,182,2173,205,2223,250,2219,254,2170,209,2138,187,2103,169,1985,155,1744,138,1233,108"/>
<area shape="rect" title=" " alt="" coords="1627,416,1690,441"/>
<area shape="poly" title=" " alt="" coords="1163,116,1527,340,1631,406,1628,411,1524,345,1160,121"/>
<area shape="poly" title=" " alt="" coords="1234,103,2206,164,2384,176,2384,182,2205,169,1234,109"/>
<area shape="rect" href="../../d1/d7d/result__types_8h.html" title="Result pattern type definitions for monitoring system." alt="" coords="2111,416,2270,441"/>
<area shape="poly" title=" " alt="" coords="1234,103,1504,116,1720,123,1903,124,2213,122,2363,123,2524,128,2706,141,2920,164,2986,169,3045,171,3145,172,3192,178,3239,192,3288,216,3342,253,3371,279,3393,308,3398,323,3399,339,3394,355,3383,370,3367,378,3335,384,3233,396,2921,413,2565,424,2283,429,2283,423,2565,418,2921,408,3232,391,3334,379,3365,373,3380,366,3390,352,3394,338,3393,324,3388,310,3367,283,3338,257,3285,220,3237,197,3191,183,3145,178,3044,176,2986,175,2920,169,2705,147,2523,134,2363,128,2213,127,1903,129,1720,128,1504,121,1234,108"/>
<area shape="poly" title=" " alt="" coords="1117,121,1081,165,1077,161,1113,117"/>
<area shape="rect" href="../../dc/d0b/metric__types__adapter_8h.html" title="Adapter for metric types to support interface definitions." alt="" coords="710,255,855,295"/>
<area shape="poly" title=" " alt="" coords="1054,121,990,142,927,169,866,207,815,248,812,243,863,203,924,164,988,137,1052,116"/>
<area shape="rect" title=" " alt="" coords="234,167,433,207"/>
<area shape="poly" title=" " alt="" coords="1028,111,766,134,451,169,447,170,446,165,450,164,766,129,1028,105"/>
<area shape="rect" title=" " alt="" coords="506,167,705,207"/>
<area shape="poly" title=" " alt="" coords="1028,119,718,170,718,164,1027,114"/>
<area shape="poly" title=" " alt="" coords="2544,185,2628,189,2730,200,2840,220,2895,234,2948,252,2966,262,2978,272,2990,283,3006,292,3081,317,3159,334,3231,344,3289,349,3289,354,3230,349,3158,339,3080,322,3004,297,2986,287,2974,276,2963,266,2946,257,2893,239,2839,225,2730,205,2627,195,2543,191"/>
<area shape="poly" title=" " alt="" coords="2398,192,2114,203,1923,213,1719,228,1515,248,1326,274,1166,306,1101,325,1049,345,1028,358,1008,374,977,407,973,403,1005,370,1025,353,1047,340,1100,320,1165,301,1325,268,1514,243,1718,223,1923,208,2113,198,2398,187"/>
<area shape="poly" title=" " alt="" coords="2458,201,2293,336,2290,332,2455,197"/>
<area shape="poly" title=" " alt="" coords="2440,202,2285,260,2283,255,2439,197"/>
<area shape="poly" title=" " alt="" coords="2510,197,2584,224,2625,243,2663,264,2693,287,2713,313,2718,327,2718,341,2713,356,2702,370,2686,377,2656,382,2560,392,2279,407,1847,419,1704,427,1704,422,1847,413,2279,401,2559,387,2656,377,2685,372,2698,366,2708,353,2712,340,2713,328,2709,316,2690,291,2660,268,2622,247,2582,229,2508,202"/>
<area shape="rect" title=" " alt="" coords="1859,416,1944,441"/>
<area shape="poly" title=" " alt="" coords="2544,193,2602,202,2662,214,2714,231,2733,241,2746,253,2764,283,2771,312,2765,341,2745,370,2645,381,2419,397,1958,427,1958,421,2419,392,2644,375,2743,366,2760,339,2766,312,2759,285,2742,256,2730,246,2711,236,2661,220,2602,207,2543,198"/>
<area shape="rect" title=" " alt="" coords="2330,343,2377,368"/>
<area shape="poly" title=" " alt="" coords="2465,201,2372,333,2367,330,2460,198"/>
<area shape="poly" title=" " alt="" coords="2544,190,2806,212,2971,230,3136,252,3163,257,3162,262,3136,257,2970,235,2805,217,2543,195"/>
<area shape="rect" title=" " alt="" coords="2432,577,2499,603"/>
<area shape="poly" title=" " alt="" coords="2515,197,2551,204,2605,208,2673,209,2832,206,2912,207,2986,214,3048,228,3073,239,3094,253,3113,275,3120,298,3120,354,3120,430,3115,453,3099,474,3076,493,3045,509,2966,536,2872,556,2770,571,2670,581,2513,590,2512,585,2670,575,2769,565,2871,551,2965,530,3043,504,3073,488,3096,470,3110,451,3115,430,3115,354,3115,299,3108,278,3090,257,3071,244,3046,233,2985,219,2912,213,2832,211,2673,214,2604,214,2550,209,2514,202"/>
<area shape="rect" title=" " alt="" coords="2401,343,2487,368"/>
<area shape="poly" title=" " alt="" coords="2471,200,2451,329,2445,328,2466,199"/>
<area shape="rect" title=" " alt="" coords="2512,343,2576,368"/>
<area shape="poly" title=" " alt="" coords="2478,198,2536,329,2531,331,2473,200"/>
<area shape="rect" title=" " alt="" coords="3017,262,3079,287"/>
<area shape="poly" title=" " alt="" coords="2544,189,2750,209,2874,227,2998,252,3008,255,3007,260,2997,257,2873,232,2749,214,2543,195"/>
<area shape="rect" title=" " alt="" coords="2601,343,2687,368"/>
<area shape="poly" title=" " alt="" coords="2484,197,2624,331,2620,335,2481,201"/>
<area shape="rect" title=" " alt="" coords="1479,416,1603,441"/>
<area shape="poly" title=" " alt="" coords="2398,189,2253,194,2161,202,2061,216,1956,235,1850,263,1747,299,1649,345,1603,376,1565,408,1562,404,1600,372,1647,340,1745,294,1848,257,1955,230,2060,210,2160,197,2252,189,2398,184"/>
<area shape="rect" href="../../dd/d70/event__bus__interface_8h.html" title="Event bus interface for decoupled component communication." alt="" coords="1907,255,2047,295"/>
<area shape="poly" title=" " alt="" coords="2405,202,2061,262,2060,256,2404,197"/>
<area shape="poly" title=" " alt="" coords="2544,190,2615,197,2690,209,2755,227,2780,239,2797,253,2815,283,2822,312,2816,341,2796,370,2771,383,2724,394,2587,411,2427,422,2284,428,2284,422,2427,416,2587,406,2723,389,2769,378,2793,366,2811,339,2817,312,2810,285,2793,256,2777,244,2753,232,2689,215,2614,203,2543,195"/>
<area shape="rect" href="../../de/d11/error__codes_8h.html" title="Monitoring system specific error codes." alt="" coords="2049,497,2159,522"/>
<area shape="poly" title=" " alt="" coords="2518,197,2551,204,2613,210,2695,215,2774,226,2805,237,2826,253,2833,275,2835,309,2833,345,2824,369,2787,407,2752,437,2716,459,2680,474,2644,484,2607,489,2531,490,2366,476,2273,477,2223,482,2171,492,2156,496,2155,490,2170,487,2223,477,2273,471,2366,471,2532,485,2606,484,2642,479,2678,469,2713,454,2748,432,2784,403,2819,367,2827,344,2830,309,2828,276,2822,256,2802,242,2772,232,2695,220,2613,215,2550,209,2517,202"/>
<area shape="poly" title=" " alt="" coords="2048,280,2196,292,2843,329,3289,349,3289,355,2843,335,2196,297,2047,285"/>
<area shape="poly" title=" " alt="" coords="1907,280,1728,286,1497,297,1272,317,1179,330,1110,345,1075,358,1042,375,986,410,984,406,1039,371,1073,354,1109,340,1179,324,1271,311,1497,292,1728,281,1907,275"/>
<area shape="poly" title=" " alt="" coords="2047,292,2215,337,2214,343,2046,297"/>
<area shape="poly" title=" " alt="" coords="1907,279,1735,283,1517,294,1305,313,1219,328,1154,345,1103,378,1017,442,852,571,848,567,1013,438,1100,373,1152,340,1217,322,1304,308,1516,289,1735,278,1907,274"/>
<area shape="poly" title=" " alt="" coords="1908,289,1828,310,1786,325,1747,345,1708,375,1678,407,1674,403,1705,371,1744,340,1784,321,1826,305,1907,284"/>
<area shape="poly" title=" " alt="" coords="2048,285,2170,307,2317,340,2316,345,2168,312,2047,290"/>
<area shape="poly" title=" " alt="" coords="2048,284,2388,340,2387,345,2047,289"/>
<area shape="poly" title=" " alt="" coords="2048,279,2247,301,2371,318,2499,340,2498,345,2370,324,2246,307,2047,285"/>
<area shape="poly" title=" " alt="" coords="2048,279,2283,301,2588,340,2587,345,2283,307,2047,284"/>
<area shape="poly" title=" " alt="" coords="1908,292,1813,313,1710,345,1636,378,1574,411,1571,407,1633,373,1708,340,1812,308,1907,286"/>
<area shape="rect" title=" " alt="" coords="2073,343,2153,368"/>
<area shape="poly" title=" " alt="" coords="2011,292,2083,333,2080,338,2009,297"/>
<area shape="rect" title=" " alt="" coords="1758,343,1850,368"/>
<area shape="poly" title=" " alt="" coords="1937,297,1843,339,1841,334,1935,292"/>
<area shape="poly" title=" " alt="" coords="2048,291,2118,314,2148,327,2167,341,2185,371,2192,402,2187,403,2180,373,2163,344,2145,332,2116,319,2047,296"/>
<area shape="rect" href="../../d5/daa/feature__flags_8h.html" title="Unified feature flags header for monitoring_system." alt="" coords="1874,343,2049,368"/>
<area shape="poly" title=" " alt="" coords="1976,295,1969,330,1964,329,1971,294"/>
<area shape="poly" title=" " alt="" coords="2111,437,850,508,850,502,2111,432"/>
<area shape="poly" title=" " alt="" coords="2111,442,869,586,868,581,2111,437"/>
<area shape="poly" title=" " alt="" coords="2180,443,2129,489,2125,485,2176,440"/>
<area shape="rect" title=" " alt="" coords="2183,489,2371,529"/>
<area shape="poly" title=" " alt="" coords="2205,440,2248,478,2244,482,2202,443"/>
<area shape="poly" title=" " alt="" coords="2049,517,869,589,869,583,2048,511"/>
<area shape="poly" title=" " alt="" coords="2143,519,2171,527,2306,556,2419,578,2418,583,2305,561,2170,532,2142,525"/>
<area shape="poly" title=" " alt="" coords="1052,201,1004,259,979,299,960,343,956,373,957,402,952,402,950,373,955,342,974,297,1000,256,1048,198"/>
<area shape="poly" title=" " alt="" coords="1045,202,1011,225,977,257,936,305,910,346,885,389,850,443,818,487,814,484,846,440,880,387,905,343,932,302,973,253,1008,221,1041,197"/>
<area shape="poly" title=" " alt="" coords="982,194,902,200,817,212,744,230,717,242,699,257,680,271,657,278,638,284,626,296,624,319,638,361,673,429,734,528,757,552,785,569,782,574,753,556,730,531,669,432,633,364,619,320,621,293,635,280,656,273,677,266,696,253,714,238,742,225,816,206,902,195,982,188"/>
<area shape="poly" title=" " alt="" coords="1101,197,1179,221,1269,252,1471,337,1624,408,1622,413,1469,342,1267,257,1178,226,1100,202"/>
<area shape="poly" title=" " alt="" coords="1141,186,1342,191,1625,201,1952,221,2284,252,2330,255,2377,254,2471,245,2562,231,2646,221,2719,220,2751,226,2777,237,2799,254,2816,279,2826,312,2829,354,2829,430,2827,455,2820,477,2808,496,2793,514,2754,542,2707,562,2655,576,2603,585,2512,591,2512,586,2602,579,2654,571,2705,557,2752,537,2789,510,2804,493,2815,475,2822,454,2824,430,2824,354,2821,313,2811,282,2795,258,2775,241,2749,231,2719,225,2647,226,2563,237,2472,251,2377,260,2330,261,2284,257,1952,226,1625,206,1342,196,1141,192"/>
<area shape="poly" title=" " alt="" coords="1088,197,1218,257,1389,340,1511,407,1509,412,1387,345,1216,262,1086,202"/>
<area shape="poly" title=" " alt="" coords="1141,193,1893,263,1893,268,1141,198"/>
<area shape="rect" title=" " alt="" coords="769,416,837,441"/>
<area shape="poly" title=" " alt="" coords="1029,202,979,224,927,257,891,292,859,333,817,405,812,402,855,330,887,289,924,253,976,219,1027,197"/>
<area shape="poly" title=" " alt="" coords="1025,202,858,253,856,248,1023,197"/>
<area shape="poly" title=" " alt="" coords="776,296,758,340,742,399,737,432,736,465,741,497,752,528,769,551,791,568,787,572,765,554,747,531,736,499,731,465,732,431,736,398,753,338,771,294"/>
<area shape="poly" title=" " alt="" coords="856,275,953,281,1075,292,1208,311,1341,340,1370,352,1398,366,1502,408,1500,413,1396,370,1368,356,1339,345,1208,316,1074,297,953,286,856,281"/>
<area shape="poly" title=" " alt="" coords="788,295,802,402,797,403,783,296"/>
<area shape="rect" href="../../df/d4b/metric__types_8h.html" title="Common metric type definitions for efficient storage." alt="" coords="1165,343,1328,368"/>
<area shape="poly" title=" " alt="" coords="856,286,1166,338,1165,343,855,291"/>
<area shape="poly" title=" " alt="" coords="1201,371,1006,418,1005,413,1200,365"/>
<area shape="poly" title=" " alt="" coords="1198,371,1151,389,1128,402,1107,418,1095,432,1088,446,1080,474,1072,503,1063,517,1050,531,1006,558,957,575,910,585,868,590,868,585,909,580,956,570,1004,553,1046,527,1059,514,1067,501,1075,473,1083,444,1091,429,1103,414,1125,397,1149,384,1196,366"/>
<area shape="poly" title=" " alt="" coords="1329,365,1458,385,1614,413,1613,419,1458,390,1328,370"/>
<area shape="poly" title=" " alt="" coords="1329,363,1845,419,1845,424,1328,368"/>
<area shape="poly" title=" " alt="" coords="1271,366,1365,414,1387,428,1410,439,1555,481,1704,514,1854,540,1998,558,2250,579,2418,586,2418,591,2250,585,1997,564,1853,545,1703,520,1553,486,1408,444,1385,432,1363,418,1269,371"/>
<area shape="poly" title=" " alt="" coords="1295,365,1481,410,1480,415,1293,371"/>
<area shape="poly" title=" " alt="" coords="1329,360,2098,418,2098,423,1328,365"/>
<area shape="poly" title=" " alt="" coords="1281,366,1410,414,1439,427,1467,439,1545,457,1624,471,1782,491,1925,501,2035,505,2035,510,1924,507,1782,497,1623,477,1544,462,1466,444,1437,432,1408,418,1279,371"/>
<area shape="poly" title=" " alt="" coords="1176,371,851,422,850,417,1175,365"/>
<area shape="rect" title=" " alt="" coords="1201,416,1263,441"/>
<area shape="poly" title=" " alt="" coords="1247,369,1240,403,1235,402,1242,368"/>
<area shape="rect" title=" " alt="" coords="1287,416,1353,441"/>
<area shape="poly" title=" " alt="" coords="1261,366,1300,404,1296,408,1257,370"/>
<area shape="rect" title=" " alt="" coords="1117,416,1176,441"/>
<area shape="poly" title=" " alt="" coords="1232,370,1176,410,1173,406,1229,366"/>
<area shape="poly" title=" " alt="" coords="1722,98,2083,101,2561,110,2795,119,3002,130,3161,145,3217,154,3254,164,3290,180,3317,197,3338,220,3357,254,3362,273,3362,294,3351,331,3346,329,3356,293,3357,274,3352,256,3334,223,3314,201,3288,184,3252,169,3216,159,3160,150,3001,135,2795,124,2561,116,2083,106,1722,103"/>
<area shape="poly" title=" " alt="" coords="1517,121,1403,149,1269,194,1200,224,1133,258,1069,299,1010,345,986,374,970,404,965,402,982,371,1006,341,1065,294,1130,254,1198,219,1267,189,1401,144,1515,116"/>
<area shape="poly" title=" " alt="" coords="1722,102,1825,109,1936,122,2036,139,2076,151,2105,164,2125,178,2139,193,2157,224,2172,257,2198,293,2242,332,2238,336,2194,296,2168,259,2152,226,2135,196,2121,182,2103,169,2074,156,2035,145,1935,127,1824,115,1721,107"/>
<area shape="poly" title=" " alt="" coords="1516,108,1191,132,1027,149,909,169,699,257,687,286,685,317,691,350,704,382,742,441,780,485,775,489,737,444,699,384,686,351,679,318,681,285,695,253,907,164,1026,144,1191,127,1516,103"/>
<area shape="poly" title=" " alt="" coords="1516,109,1112,138,921,154,811,169,714,210,620,257,552,297,540,306,531,319,525,334,523,354,523,430,525,450,530,469,551,501,582,526,620,546,663,561,706,572,782,583,781,588,705,577,661,566,618,551,579,531,547,504,525,471,519,451,517,430,517,354,520,333,526,316,536,303,549,292,617,252,712,205,810,164,920,149,1112,132,1516,104"/>
<area shape="poly" title=" " alt="" coords="1722,96,1850,99,1992,108,2060,117,2121,129,2171,144,2207,165,2223,183,2233,205,2242,248,2237,249,2228,206,2218,186,2204,169,2169,149,2120,134,2059,122,1992,113,1850,104,1722,101"/>
<area shape="poly" title=" " alt="" coords="1624,119,1658,402,1653,403,1618,119"/>
<area shape="poly" title=" " alt="" coords="1722,108,2385,174,2384,179,1721,113"/>
<area shape="poly" title=" " alt="" coords="1722,98,2093,104,2586,116,3044,136,3209,149,3307,164,3357,178,3396,191,3429,214,3458,253,3474,285,3481,314,3477,342,3458,370,3440,378,3406,385,3296,397,2962,415,2582,425,2284,429,2284,424,2582,419,2962,409,3296,392,3405,380,3438,373,3454,366,3472,340,3476,314,3469,287,3454,256,3425,218,3394,196,3355,183,3306,169,3209,154,3043,141,2586,121,2093,110,1722,104"/>
<area shape="poly" title=" " alt="" coords="1516,116,1160,169,1133,174,1132,169,1160,164,1515,111"/>
<area shape="poly" title=" " alt="" coords="1516,107,1378,115,1221,127,1074,145,1015,156,970,169,954,177,942,187,915,209,837,251,834,246,912,204,939,183,951,173,968,164,1014,151,1073,140,1220,122,1378,109,1516,101"/>
</map>
</div>
</div>
<p><a href="../../df/de1/test__event__bus_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4a641825def781944b45efd04729b7bf" id="r_a4a641825def781944b45efd04729b7bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#a4a641825def781944b45efd04729b7bf">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, PublishSubscribe)</td></tr>
<tr class="separator:a4a641825def781944b45efd04729b7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b36e025a5a670348b2bc28f469f946e" id="r_a0b36e025a5a670348b2bc28f469f946e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#a0b36e025a5a670348b2bc28f469f946e">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, MultipleSubscribers)</td></tr>
<tr class="separator:a0b36e025a5a670348b2bc28f469f946e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a810448c5cf6f29339d322f23d9579f06" id="r_a810448c5cf6f29339d322f23d9579f06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#a810448c5cf6f29339d322f23d9579f06">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, EventPriority)</td></tr>
<tr class="separator:a810448c5cf6f29339d322f23d9579f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7754778d4db28e5ffb0b6cf1fc6e561f" id="r_a7754778d4db28e5ffb0b6cf1fc6e561f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#a7754778d4db28e5ffb0b6cf1fc6e561f">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, Unsubscribe)</td></tr>
<tr class="separator:a7754778d4db28e5ffb0b6cf1fc6e561f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06a6cf280f4728f9cf3fcd13f974741" id="r_ae06a6cf280f4728f9cf3fcd13f974741"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#ae06a6cf280f4728f9cf3fcd13f974741">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, ThreadSystemAdapter)</td></tr>
<tr class="separator:ae06a6cf280f4728f9cf3fcd13f974741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfac69ff77f740115918f3252668d5f8" id="r_adfac69ff77f740115918f3252668d5f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#adfac69ff77f740115918f3252668d5f8">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, LoggerSystemAdapter)</td></tr>
<tr class="separator:adfac69ff77f740115918f3252668d5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9" id="r_a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, Statistics)</td></tr>
<tr class="separator:a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad82a3dc4dded30ddc9510a1d82c42f" id="r_adad82a3dc4dded30ddc9510a1d82c42f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de1/test__event__bus_8cpp.html#adad82a3dc4dded30ddc9510a1d82c42f">TEST_F</a> (<a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>, ConcurrentPublishing)</td></tr>
<tr class="separator:adad82a3dc4dded30ddc9510a1d82c42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test for event-driven communication system. </p>

<p class="definition">Definition in file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="adad82a3dc4dded30ddc9510a1d82c42f" name="adad82a3dc4dded30ddc9510a1d82c42f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad82a3dc4dded30ddc9510a1d82c42f">&#9670;&#160;</a></span>TEST_F() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConcurrentPublishing&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00338">338</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  338</span>                                           {</div>
<div class="line"><span class="lineno">  339</span>    std::atomic&lt;int&gt; received_count{0};</div>
<div class="line"><span class="lineno">  340</span>    std::mutex mtx;</div>
<div class="line"><span class="lineno">  341</span>    std::condition_variable cv;</div>
<div class="line"><span class="lineno">  342</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_threads = 4;</div>
<div class="line"><span class="lineno">  343</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> events_per_thread = 25;</div>
<div class="line"><span class="lineno">  344</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> total_expected = num_threads * events_per_thread;</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">// Subscribe to metric collection events</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="keyword">auto</span> token =</div>
<div class="line"><span class="lineno">  348</span>        bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../df/d19/classkcenon_1_1monitoring_1_1metric__collection__event.html">metric_collection_event</a>&gt;([&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../df/d19/classkcenon_1_1monitoring_1_1metric__collection__event.html">metric_collection_event</a>&amp; event) {</div>
<div class="line"><span class="lineno">  349</span>            received_count.fetch_add(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(event.get_metric_count()));</div>
<div class="line"><span class="lineno">  350</span>            cv.notify_all();</div>
<div class="line"><span class="lineno">  351</span>        });</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    ASSERT_TRUE(token.is_ok());</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>    std::vector&lt;std::thread&gt; publishers;</div>
<div class="line"><span class="lineno">  356</span>    publishers.reserve(num_threads);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <span class="comment">// Start publisher threads</span></div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; num_threads; ++t) {</div>
<div class="line"><span class="lineno">  360</span>        publishers.emplace_back([<span class="keyword">this</span>, events_per_thread]() {</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; events_per_thread; ++i) {</div>
<div class="line"><span class="lineno">  362</span>                std::vector&lt;metric&gt; metrics;</div>
<div class="line"><span class="lineno">  363</span>                metrics.push_back(</div>
<div class="line"><span class="lineno">  364</span>                    <a class="code hl_struct" href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">metric</a>{<span class="stringliteral">&quot;test_metric&quot;</span>, 42.0, {{<span class="stringliteral">&quot;thread&quot;</span>, <span class="stringliteral">&quot;publisher&quot;</span>}}, metric_type::gauge});</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>                <a class="code hl_class" href="../../df/d19/classkcenon_1_1monitoring_1_1metric__collection__event.html">metric_collection_event</a> event(<span class="stringliteral">&quot;test_collector&quot;</span>, std::move(metrics));</div>
<div class="line"><span class="lineno">  367</span>                bus-&gt;publish_event(event);</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>                <span class="comment">// Yield to allow other threads to run instead of sleeping</span></div>
<div class="line"><span class="lineno">  370</span>                std::this_thread::yield();</div>
<div class="line"><span class="lineno">  371</span>            }</div>
<div class="line"><span class="lineno">  372</span>        });</div>
<div class="line"><span class="lineno">  373</span>    }</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    <span class="comment">// Wait for all publishers</span></div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; thread : publishers) {</div>
<div class="line"><span class="lineno">  377</span>        thread.join();</div>
<div class="line"><span class="lineno">  378</span>    }</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>    <span class="comment">// Wait for processing with condition variable</span></div>
<div class="line"><span class="lineno">  381</span>    {</div>
<div class="line"><span class="lineno">  382</span>        std::unique_lock&lt;std::mutex&gt; lock(mtx);</div>
<div class="line"><span class="lineno">  383</span>        ASSERT_TRUE(</div>
<div class="line"><span class="lineno">  384</span>            cv.wait_for(lock, 10s, [&amp;] { return received_count.load() &gt;= total_expected; }));</div>
<div class="line"><span class="lineno">  385</span>    }</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <span class="comment">// Should have received all metrics</span></div>
<div class="line"><span class="lineno">  388</span>    EXPECT_EQ(received_count.load(), total_expected);</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>    <span class="comment">// Unsubscribe before local variables are destroyed</span></div>
<div class="line"><span class="lineno">  391</span>    bus-&gt;unsubscribe_event(token.value());</div>
<div class="line"><span class="lineno">  392</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__collection__event_html"><div class="ttname"><a href="../../df/d19/classkcenon_1_1monitoring_1_1metric__collection__event.html">kcenon::monitoring::metric_collection_event</a></div><div class="ttdoc">Event containing collected metrics batch.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00315">event_types.h:315</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric_html"><div class="ttname"><a href="../../d2/d54/structkcenon_1_1monitoring_1_1metric.html">kcenon::monitoring::metric</a></div><div class="ttdoc">Basic metric structure for interface compatibility.</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0b/metric__types__adapter_8h_source.html#l00078">metric_types_adapter.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a810448c5cf6f29339d322f23d9579f06" name="a810448c5cf6f29339d322f23d9579f06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a810448c5cf6f29339d322f23d9579f06">&#9670;&#160;</a></span>TEST_F() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EventPriority&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00160">160</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>                                    {</div>
<div class="line"><span class="lineno">  161</span>    std::vector&lt;int&gt; processing_order;</div>
<div class="line"><span class="lineno">  162</span>    std::mutex order_mutex;</div>
<div class="line"><span class="lineno">  163</span>    std::condition_variable cv;</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>    <span class="comment">// Subscribe to configuration changes</span></div>
<div class="line"><span class="lineno">  166</span>    <span class="keyword">auto</span> token = bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../da/d7a/classkcenon_1_1monitoring_1_1configuration__change__event.html">configuration_change_event</a>&gt;(</div>
<div class="line"><span class="lineno">  167</span>        [&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../da/d7a/classkcenon_1_1monitoring_1_1configuration__change__event.html">configuration_change_event</a>&amp; event) {</div>
<div class="line"><span class="lineno">  168</span>            {</div>
<div class="line"><span class="lineno">  169</span>                std::lock_guard&lt;std::mutex&gt; lock(order_mutex);</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">if</span> (event.get_config_key() == <span class="stringliteral">&quot;high_priority&quot;</span>) {</div>
<div class="line"><span class="lineno">  171</span>                    processing_order.push_back(1);</div>
<div class="line"><span class="lineno">  172</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  173</span>                    processing_order.push_back(2);</div>
<div class="line"><span class="lineno">  174</span>                }</div>
<div class="line"><span class="lineno">  175</span>            }</div>
<div class="line"><span class="lineno">  176</span>            cv.notify_all();</div>
<div class="line"><span class="lineno">  177</span>        },</div>
<div class="line"><span class="lineno">  178</span>        event_priority::high);</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    ASSERT_TRUE(token.is_ok());</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="comment">// Publish events with different priorities</span></div>
<div class="line"><span class="lineno">  183</span>    <a class="code hl_class" href="../../da/d7a/classkcenon_1_1monitoring_1_1configuration__change__event.html">configuration_change_event</a> high_priority(<span class="stringliteral">&quot;test&quot;</span>, <span class="stringliteral">&quot;high_priority&quot;</span>,</div>
<div class="line"><span class="lineno">  184</span>                                             configuration_change_event::change_type::modified);</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_class" href="../../da/d7a/classkcenon_1_1monitoring_1_1configuration__change__event.html">configuration_change_event</a> normal_priority(<span class="stringliteral">&quot;test&quot;</span>, <span class="stringliteral">&quot;normal_priority&quot;</span>,</div>
<div class="line"><span class="lineno">  187</span>                                               configuration_change_event::change_type::modified);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">// Stop bus to queue events</span></div>
<div class="line"><span class="lineno">  190</span>    bus-&gt;stop();</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">// Queue events</span></div>
<div class="line"><span class="lineno">  193</span>    bus-&gt;publish_event(normal_priority);</div>
<div class="line"><span class="lineno">  194</span>    bus-&gt;publish_event(high_priority);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">// Restart and process</span></div>
<div class="line"><span class="lineno">  197</span>    bus-&gt;start();</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">// Wait for both events to be processed with timeout</span></div>
<div class="line"><span class="lineno">  200</span>    {</div>
<div class="line"><span class="lineno">  201</span>        std::unique_lock&lt;std::mutex&gt; lock(order_mutex);</div>
<div class="line"><span class="lineno">  202</span>        cv.wait_for(lock, 5s, [&amp;] { <span class="keywordflow">return</span> processing_order.size() &gt;= 2; });</div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">// Stop the bus to ensure all events are processed before checking results</span></div>
<div class="line"><span class="lineno">  206</span>    bus-&gt;stop();</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>    <span class="comment">// Verify events were processed</span></div>
<div class="line"><span class="lineno">  209</span>    {</div>
<div class="line"><span class="lineno">  210</span>        std::lock_guard&lt;std::mutex&gt; lock(order_mutex);</div>
<div class="line"><span class="lineno">  211</span>        EXPECT_GE(processing_order.size(), 0U);</div>
<div class="line"><span class="lineno">  212</span>    }</div>
<div class="line"><span class="lineno">  213</span>    <span class="comment">// Note: Priority ordering test is inherently flaky in async systems</span></div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    <span class="comment">// Unsubscribe before local variables are destroyed</span></div>
<div class="line"><span class="lineno">  216</span>    bus-&gt;unsubscribe_event(token.value());</div>
<div class="line"><span class="lineno">  217</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1configuration__change__event_html"><div class="ttname"><a href="../../da/d7a/classkcenon_1_1monitoring_1_1configuration__change__event.html">kcenon::monitoring::configuration_change_event</a></div><div class="ttdoc">Event fired when configuration changes.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00236">event_types.h:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adfac69ff77f740115918f3252668d5f8" name="adfac69ff77f740115918f3252668d5f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfac69ff77f740115918f3252668d5f8">&#9670;&#160;</a></span>TEST_F() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoggerSystemAdapter&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00290">290</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>                                          {</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_class" href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html">logger_system_adapter</a> adapter(bus);</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <span class="comment">// Check availability</span></div>
<div class="line"><span class="lineno">  294</span>    EXPECT_FALSE(adapter.is_logger_system_available());</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    <span class="comment">// Try to collect metrics</span></div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">auto</span> result = adapter.collect_metrics();</div>
<div class="line"><span class="lineno">  298</span>    ASSERT_TRUE(result.is_ok());</div>
<div class="line"><span class="lineno">  299</span>    EXPECT_TRUE(result.value().empty());</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>    <span class="comment">// Register a logger (won&#39;t do anything when system not available)</span></div>
<div class="line"><span class="lineno">  302</span>    adapter.register_logger(<span class="stringliteral">&quot;test_logger&quot;</span>);</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="comment">// Get current log rate</span></div>
<div class="line"><span class="lineno">  305</span>    EXPECT_EQ(adapter.get_current_log_rate(), 0.0);</div>
<div class="line"><span class="lineno">  306</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1logger__system__adapter_html"><div class="ttname"><a href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html">kcenon::monitoring::logger_system_adapter</a></div><div class="ttdoc">Logger system adapter using dependency injection (Phase 2.3.3)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d46/logger__system__adapter_8h_source.html#l00042">logger_system_adapter.h:42</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/de1/test__event__bus_8cpp_adfac69ff77f740115918f3252668d5f8_cgraph.png" border="0" usemap="#adf/de1/test__event__bus_8cpp_adfac69ff77f740115918f3252668d5f8_cgraph" alt=""/></div>
<map name="adf/de1/test__event__bus_8cpp_adfac69ff77f740115918f3252668d5f8_cgraph" id="adf/de1/test__event__bus_8cpp_adfac69ff77f740115918f3252668d5f8_cgraph">
<area shape="rect" title=" " alt="" coords="5,139,75,164"/>
<area shape="rect" href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html#ac1174f8d62ba8aa46a1978d0f1f2720e" title="Collect metrics from logger if available (Phase 2.3.3)" alt="" coords="137,5,319,60"/>
<area shape="poly" title=" " alt="" coords="50,136,80,103,121,69,129,64,132,69,124,74,83,107,54,140"/>
<area shape="rect" href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html#aa0c8f7c341032441cb31e6d74059883b" title="Get current log rate (if logger supports metrics)" alt="" coords="137,84,319,139"/>
<area shape="poly" title=" " alt="" coords="74,141,123,131,124,136,75,147"/>
<area shape="rect" href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html#a5cc0ff17d9460aeaa0675e1cbba73ebb" title="Check if logger is available." alt="" coords="123,163,333,217"/>
<area shape="poly" title=" " alt="" coords="75,156,110,163,109,168,74,161"/>
<area shape="rect" href="../../d7/d7a/classkcenon_1_1monitoring_1_1logger__system__adapter.html#a060fcd93f5f608b9b23dab3a3e3ddf2b" title="Register a logger instance by name." alt="" coords="137,241,319,296"/>
<area shape="poly" title=" " alt="" coords="54,163,84,194,124,226,135,233,132,237,121,231,80,198,50,166"/>
</map>
</div>

</div>
</div>
<a id="a0b36e025a5a670348b2bc28f469f946e" name="a0b36e025a5a670348b2bc28f469f946e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b36e025a5a670348b2bc28f469f946e">&#9670;&#160;</a></span>TEST_F() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MultipleSubscribers&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00114">114</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  114</span>                                          {</div>
<div class="line"><span class="lineno">  115</span>    std::atomic&lt;int&gt; subscriber1_count{0};</div>
<div class="line"><span class="lineno">  116</span>    std::atomic&lt;int&gt; subscriber2_count{0};</div>
<div class="line"><span class="lineno">  117</span>    std::mutex mtx;</div>
<div class="line"><span class="lineno">  118</span>    std::condition_variable cv;</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="comment">// Subscribe twice to the same event type</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="keyword">auto</span> token1 =</div>
<div class="line"><span class="lineno">  122</span>        bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">system_resource_event</a>&gt;([&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">system_resource_event</a>&amp; <span class="comment">/*event*/</span>) {</div>
<div class="line"><span class="lineno">  123</span>            subscriber1_count++;</div>
<div class="line"><span class="lineno">  124</span>            cv.notify_all();</div>
<div class="line"><span class="lineno">  125</span>        });</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    <span class="keyword">auto</span> token2 =</div>
<div class="line"><span class="lineno">  128</span>        bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">system_resource_event</a>&gt;([&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">system_resource_event</a>&amp; <span class="comment">/*event*/</span>) {</div>
<div class="line"><span class="lineno">  129</span>            subscriber2_count++;</div>
<div class="line"><span class="lineno">  130</span>            cv.notify_all();</div>
<div class="line"><span class="lineno">  131</span>        });</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    ASSERT_TRUE(token1.is_ok());</div>
<div class="line"><span class="lineno">  134</span>    ASSERT_TRUE(token2.is_ok());</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>    <span class="comment">// Publish event</span></div>
<div class="line"><span class="lineno">  137</span>    <a class="code hl_struct" href="../../d0/de7/structkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats.html">system_resource_event::resource_stats</a> stats;</div>
<div class="line"><span class="lineno">  138</span>    stats.<a class="code hl_variable" href="../../d0/de7/structkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats.html#a7226b695d4b36d15f7e729cf1936be58">cpu_usage_percent</a> = 75.5;</div>
<div class="line"><span class="lineno">  139</span>    <a class="code hl_class" href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">system_resource_event</a> event(stats);</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    bus-&gt;publish_event(event);</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="comment">// Wait for both subscribers with timeout</span></div>
<div class="line"><span class="lineno">  144</span>    {</div>
<div class="line"><span class="lineno">  145</span>        std::unique_lock&lt;std::mutex&gt; lock(mtx);</div>
<div class="line"><span class="lineno">  146</span>        ASSERT_TRUE(cv.wait_for(lock, 5s, [&amp;] {</div>
<div class="line"><span class="lineno">  147</span>            return subscriber1_count.load() &gt;= 1 &amp;&amp; subscriber2_count.load() &gt;= 1;</div>
<div class="line"><span class="lineno">  148</span>        }));</div>
<div class="line"><span class="lineno">  149</span>    }</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    EXPECT_EQ(subscriber1_count.load(), 1);</div>
<div class="line"><span class="lineno">  152</span>    EXPECT_EQ(subscriber2_count.load(), 1);</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// Unsubscribe before local variables (cv, mutex) are destroyed</span></div>
<div class="line"><span class="lineno">  155</span>    bus-&gt;unsubscribe_event(token1.value());</div>
<div class="line"><span class="lineno">  156</span>    bus-&gt;unsubscribe_event(token2.value());</div>
<div class="line"><span class="lineno">  157</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1system__resource__event_html"><div class="ttname"><a href="../../d5/dd2/classkcenon_1_1monitoring_1_1system__resource__event.html">kcenon::monitoring::system_resource_event</a></div><div class="ttdoc">Event containing system resource metrics.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00135">event_types.h:135</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats_html"><div class="ttname"><a href="../../d0/de7/structkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats.html">kcenon::monitoring::system_resource_event::resource_stats</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00137">event_types.h:137</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats_html_a7226b695d4b36d15f7e729cf1936be58"><div class="ttname"><a href="../../d0/de7/structkcenon_1_1monitoring_1_1system__resource__event_1_1resource__stats.html#a7226b695d4b36d15f7e729cf1936be58">kcenon::monitoring::system_resource_event::resource_stats::cpu_usage_percent</a></div><div class="ttdeci">double cpu_usage_percent</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00138">event_types.h:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a641825def781944b45efd04729b7bf" name="a4a641825def781944b45efd04729b7bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a641825def781944b45efd04729b7bf">&#9670;&#160;</a></span>TEST_F() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PublishSubscribe&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00070">70</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span>                                       {</div>
<div class="line"><span class="lineno">   71</span>    std::atomic&lt;int&gt; received_count{0};</div>
<div class="line"><span class="lineno">   72</span>    std::string received_message;</div>
<div class="line"><span class="lineno">   73</span>    std::mutex message_mutex;</div>
<div class="line"><span class="lineno">   74</span>    std::condition_variable cv;</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="comment">// Subscribe to performance alerts</span></div>
<div class="line"><span class="lineno">   77</span>    <span class="keyword">auto</span> token =</div>
<div class="line"><span class="lineno">   78</span>        bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../d4/d66/classkcenon_1_1monitoring_1_1performance__alert__event.html">performance_alert_event</a>&gt;([&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../d4/d66/classkcenon_1_1monitoring_1_1performance__alert__event.html">performance_alert_event</a>&amp; event) {</div>
<div class="line"><span class="lineno">   79</span>            {</div>
<div class="line"><span class="lineno">   80</span>                std::lock_guard&lt;std::mutex&gt; lock(message_mutex);</div>
<div class="line"><span class="lineno">   81</span>                received_message = <span class="keyword">event</span>.get_message();</div>
<div class="line"><span class="lineno">   82</span>            }</div>
<div class="line"><span class="lineno">   83</span>            received_count++;</div>
<div class="line"><span class="lineno">   84</span>            cv.notify_one();</div>
<div class="line"><span class="lineno">   85</span>        });</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    ASSERT_TRUE(token.is_ok());</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="comment">// Publish an event</span></div>
<div class="line"><span class="lineno">   90</span>    <a class="code hl_class" href="../../d4/d66/classkcenon_1_1monitoring_1_1performance__alert__event.html">performance_alert_event</a> <a class="code hl_struct" href="../../d1/d1e/structkcenon_1_1monitoring_1_1alert.html">alert</a>(performance_alert_event::alert_type::high_cpu_usage,</div>
<div class="line"><span class="lineno">   91</span>                                  performance_alert_event::alert_severity::warning,</div>
<div class="line"><span class="lineno">   92</span>                                  <span class="stringliteral">&quot;test_component&quot;</span>, <span class="stringliteral">&quot;CPU usage is high&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keyword">auto</span> result = bus-&gt;publish_event(<a class="code hl_struct" href="../../d1/d1e/structkcenon_1_1monitoring_1_1alert.html">alert</a>);</div>
<div class="line"><span class="lineno">   95</span>    ASSERT_TRUE(result.is_ok());</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>    <span class="comment">// Wait for event processing with condition variable</span></div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>        std::unique_lock&lt;std::mutex&gt; lock(message_mutex);</div>
<div class="line"><span class="lineno">  100</span>        ASSERT_TRUE(cv.wait_for(lock, 5s, [&amp;] { return received_count.load() &gt;= 1; }));</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    EXPECT_EQ(received_count.load(), 1);</div>
<div class="line"><span class="lineno">  104</span>    {</div>
<div class="line"><span class="lineno">  105</span>        std::lock_guard&lt;std::mutex&gt; lock(message_mutex);</div>
<div class="line"><span class="lineno">  106</span>        EXPECT_EQ(received_message, <span class="stringliteral">&quot;CPU usage is high&quot;</span>);</div>
<div class="line"><span class="lineno">  107</span>    }</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Unsubscribe before local variables (cv, mutex) are destroyed</span></div>
<div class="line"><span class="lineno">  110</span>    bus-&gt;unsubscribe_event(token.value());</div>
<div class="line"><span class="lineno">  111</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1performance__alert__event_html"><div class="ttname"><a href="../../d4/d66/classkcenon_1_1monitoring_1_1performance__alert__event.html">kcenon::monitoring::performance_alert_event</a></div><div class="ttdoc">Event for performance-related alerts.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00187">event_types.h:187</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1alert_html"><div class="ttname"><a href="../../d1/d1e/structkcenon_1_1monitoring_1_1alert.html">kcenon::monitoring::alert</a></div><div class="ttdoc">Core alert data structure.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/dee/alert__types_8h_source.html#l00210">alert_types.h:210</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9" name="a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41ebbaa1f78ac3aa7a6ceb3f0dc93dd9">&#9670;&#160;</a></span>TEST_F() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Statistics&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00309">309</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  309</span>                                 {</div>
<div class="line"><span class="lineno">  310</span>    <span class="keyword">auto</span> initial_stats = bus-&gt;get_stats();</div>
<div class="line"><span class="lineno">  311</span>    EXPECT_EQ(initial_stats.total_published, 0);</div>
<div class="line"><span class="lineno">  312</span>    EXPECT_EQ(initial_stats.total_processed, 0);</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    <span class="comment">// Publish some events</span></div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i) {</div>
<div class="line"><span class="lineno">  316</span>        <a class="code hl_class" href="../../df/d67/classkcenon_1_1monitoring_1_1component__lifecycle__event.html">component_lifecycle_event</a> event(<span class="stringliteral">&quot;test_component&quot;</span>,</div>
<div class="line"><span class="lineno">  317</span>                                        component_lifecycle_event::lifecycle_state::started,</div>
<div class="line"><span class="lineno">  318</span>                                        component_lifecycle_event::lifecycle_state::running);</div>
<div class="line"><span class="lineno">  319</span>        bus-&gt;publish_event(event);</div>
<div class="line"><span class="lineno">  320</span>    }</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">// Wait until all events are published (poll stats with timeout)</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="keyword">auto</span> deadline = std::chrono::steady_clock::now() + 5s;</div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">while</span> (std::chrono::steady_clock::now() &lt; deadline) {</div>
<div class="line"><span class="lineno">  325</span>        <span class="keyword">auto</span> stats = bus-&gt;get_stats();</div>
<div class="line"><span class="lineno">  326</span>        <span class="keywordflow">if</span> (stats.total_published &gt;= 10) {</div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  328</span>        }</div>
<div class="line"><span class="lineno">  329</span>        std::this_thread::yield();</div>
<div class="line"><span class="lineno">  330</span>    }</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="keyword">auto</span> final_stats = bus-&gt;get_stats();</div>
<div class="line"><span class="lineno">  333</span>    EXPECT_EQ(final_stats.total_published, 10);</div>
<div class="line"><span class="lineno">  334</span>    EXPECT_GE(final_stats.total_processed, 0);  <span class="comment">// May vary due to async processing</span></div>
<div class="line"><span class="lineno">  335</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1component__lifecycle__event_html"><div class="ttname"><a href="../../df/d67/classkcenon_1_1monitoring_1_1component__lifecycle__event.html">kcenon::monitoring::component_lifecycle_event</a></div><div class="ttdoc">Event for component lifecycle changes.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00274">event_types.h:274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae06a6cf280f4728f9cf3fcd13f974741" name="ae06a6cf280f4728f9cf3fcd13f974741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae06a6cf280f4728f9cf3fcd13f974741">&#9670;&#160;</a></span>TEST_F() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ThreadSystemAdapter&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00261">261</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>                                          {</div>
<div class="line"><span class="lineno">  262</span>    <a class="code hl_class" href="../../d5/db2/classkcenon_1_1monitoring_1_1thread__system__adapter.html">thread_system_adapter</a> adapter(bus);</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>    <span class="comment">// Check availability - depends on compile-time header detection</span></div>
<div class="line"><span class="lineno">  265</span><span class="preprocessor">#if MONITORING_THREAD_SYSTEM_AVAILABLE</span></div>
<div class="line"><span class="lineno">  266</span>    <span class="comment">// When headers are present, is_thread_system_available() may return true</span></div>
<div class="line"><span class="lineno">  267</span>    <span class="comment">// (it attempts runtime resolution but defaults to true if headers exist)</span></div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">// We just verify collect_metrics works without asserting availability</span></div>
<div class="line"><span class="lineno">  269</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  270</span>    EXPECT_FALSE(adapter.is_thread_system_available());</div>
<div class="line"><span class="lineno">  271</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="comment">// Try to collect metrics - should succeed regardless of availability</span></div>
<div class="line"><span class="lineno">  274</span>    <span class="keyword">auto</span> result = adapter.collect_metrics();</div>
<div class="line"><span class="lineno">  275</span>    ASSERT_TRUE(result.is_ok());</div>
<div class="line"><span class="lineno">  276</span>    <span class="comment">// When no actual thread_system service is registered, result may be empty</span></div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="comment">// Get supported metric types - compile-time determined</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="keyword">auto</span> types = adapter.get_metric_types();</div>
<div class="line"><span class="lineno">  280</span><span class="preprocessor">#if MONITORING_THREAD_SYSTEM_AVAILABLE</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">// When headers are available, returns the list of supported types</span></div>
<div class="line"><span class="lineno">  282</span>    EXPECT_FALSE(types.empty());</div>
<div class="line"><span class="lineno">  283</span>    EXPECT_EQ(types.size(), 3u);</div>
<div class="line"><span class="lineno">  284</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  285</span>    EXPECT_TRUE(types.empty());  <span class="comment">// Empty when thread_system not available</span></div>
<div class="line"><span class="lineno">  286</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  287</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1thread__system__adapter_html"><div class="ttname"><a href="../../d5/db2/classkcenon_1_1monitoring_1_1thread__system__adapter.html">kcenon::monitoring::thread_system_adapter</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d7a/thread__system__adapter_8h_source.html#l00055">thread_system_adapter.h:55</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/de1/test__event__bus_8cpp_ae06a6cf280f4728f9cf3fcd13f974741_cgraph.png" border="0" usemap="#adf/de1/test__event__bus_8cpp_ae06a6cf280f4728f9cf3fcd13f974741_cgraph" alt=""/></div>
<map name="adf/de1/test__event__bus_8cpp_ae06a6cf280f4728f9cf3fcd13f974741_cgraph" id="adf/de1/test__event__bus_8cpp_ae06a6cf280f4728f9cf3fcd13f974741_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,75,124"/>
<area shape="rect" href="../../d5/db2/classkcenon_1_1monitoring_1_1thread__system__adapter.html#a6a82e6e09a7fe576f1ce3f4a38eaedf5" title=" " alt="" coords="137,5,321,60"/>
<area shape="poly" title=" " alt="" coords="64,96,122,69,137,63,139,68,124,74,67,101"/>
<area shape="rect" href="../../d5/db2/classkcenon_1_1monitoring_1_1thread__system__adapter.html#a8aa2c942427cb0885343a30d4f89f898" title=" " alt="" coords="137,84,321,139"/>
<area shape="poly" title=" " alt="" coords="75,109,123,109,123,114,75,114"/>
<area shape="rect" href="../../d5/db2/classkcenon_1_1monitoring_1_1thread__system__adapter.html#a9437d4ffcaf2fe7dcac480630e592c48" title=" " alt="" coords="123,163,335,217"/>
<area shape="poly" title=" " alt="" coords="68,122,124,148,142,155,140,160,122,152,66,126"/>
</map>
</div>

</div>
</div>
<a id="a7754778d4db28e5ffb0b6cf1fc6e561f" name="a7754778d4db28e5ffb0b6cf1fc6e561f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7754778d4db28e5ffb0b6cf1fc6e561f">&#9670;&#160;</a></span>TEST_F() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d12/classEventBusTest.html">EventBusTest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Unsubscribe&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html#l00220">220</a> of file <a class="el" href="../../df/de1/test__event__bus_8cpp_source.html">test_event_bus.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  220</span>                                  {</div>
<div class="line"><span class="lineno">  221</span>    std::atomic&lt;int&gt; received_count{0};</div>
<div class="line"><span class="lineno">  222</span>    std::mutex mtx;</div>
<div class="line"><span class="lineno">  223</span>    std::condition_variable cv;</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    <span class="keyword">auto</span> token = bus-&gt;subscribe_event&lt;<a class="code hl_class" href="../../d2/d8d/classkcenon_1_1monitoring_1_1health__check__event.html">health_check_event</a>&gt;([&amp;](<span class="keyword">const</span> <a class="code hl_class" href="../../d2/d8d/classkcenon_1_1monitoring_1_1health__check__event.html">health_check_event</a>&amp; <span class="comment">/*event*/</span>) {</div>
<div class="line"><span class="lineno">  226</span>        received_count++;</div>
<div class="line"><span class="lineno">  227</span>        cv.notify_one();</div>
<div class="line"><span class="lineno">  228</span>    });</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    ASSERT_TRUE(token.is_ok());</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="comment">// Publish first event</span></div>
<div class="line"><span class="lineno">  233</span>    std::vector&lt;health_check_event::health_check_result&gt; results;</div>
<div class="line"><span class="lineno">  234</span>    <a class="code hl_class" href="../../d2/d8d/classkcenon_1_1monitoring_1_1health__check__event.html">health_check_event</a> event1(<span class="stringliteral">&quot;component1&quot;</span>, results);</div>
<div class="line"><span class="lineno">  235</span>    bus-&gt;publish_event(event1);</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment">// Wait for first event with timeout</span></div>
<div class="line"><span class="lineno">  238</span>    {</div>
<div class="line"><span class="lineno">  239</span>        std::unique_lock&lt;std::mutex&gt; lock(mtx);</div>
<div class="line"><span class="lineno">  240</span>        ASSERT_TRUE(cv.wait_for(lock, 5s, [&amp;] { return received_count.load() &gt;= 1; }));</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span>    EXPECT_EQ(received_count.load(), 1);</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">// Unsubscribe</span></div>
<div class="line"><span class="lineno">  245</span>    bus-&gt;unsubscribe_event(token.value());</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    <span class="comment">// Publish second event</span></div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_class" href="../../d2/d8d/classkcenon_1_1monitoring_1_1health__check__event.html">health_check_event</a> event2(<span class="stringliteral">&quot;component2&quot;</span>, results);</div>
<div class="line"><span class="lineno">  249</span>    bus-&gt;publish_event(event2);</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="comment">// After unsubscribe, we need a small wait to verify event is NOT received</span></div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">// This is a legitimate case where we need a brief timeout to confirm no event arrived</span></div>
<div class="line"><span class="lineno">  253</span>    {</div>
<div class="line"><span class="lineno">  254</span>        std::unique_lock&lt;std::mutex&gt; lock(mtx);</div>
<div class="line"><span class="lineno">  255</span>        cv.wait_for(lock, 100ms, [&amp;] { <span class="keywordflow">return</span> received_count.load() &gt;= 2; });</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>    EXPECT_EQ(received_count.load(), 1);  <span class="comment">// Should still be 1</span></div>
<div class="line"><span class="lineno">  258</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1health__check__event_html"><div class="ttname"><a href="../../d2/d8d/classkcenon_1_1monitoring_1_1health__check__event.html">kcenon::monitoring::health_check_event</a></div><div class="ttdoc">Event for health check results.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0f/event__types_8h_source.html#l00338">event_types.h:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 21 2026 17:33:15 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
