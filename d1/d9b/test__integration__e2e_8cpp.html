<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: tests/test_integration_e2e.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">test_integration_e2e.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>End-to-end integration tests for the monitoring system.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;gtest/gtest.h&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;atomic&gt;</code><br />
<code>#include &lt;random&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;filesystem&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/d7d/result__types_8h_source.html">kcenon/monitoring/core/result_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d1/d6e/monitoring__core_8h_source.html">kcenon/monitoring/interfaces/monitoring_core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d07/distributed__tracer_8h_source.html">kcenon/monitoring/tracing/distributed_tracer.h</a>&gt;</code><br />
<code>#include &lt;kcenon/monitoring/performance/performance_monitor.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/d73/adaptive__monitor_8h_source.html">kcenon/monitoring/adaptive/adaptive_monitor.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d8/d34/health__monitor_8h_source.html">kcenon/monitoring/health/health_monitor.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d2/dd4/circuit__breaker_8h_source.html">kcenon/monitoring/reliability/circuit_breaker.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d6/df4/retry__policy_8h_source.html">kcenon/monitoring/reliability/retry_policy.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dd/d82/fault__tolerance__manager_8h_source.html">kcenon/monitoring/reliability/fault_tolerance_manager.h</a>&gt;</code><br />
<code>#include &lt;kcenon/monitoring/export/opentelemetry_adapter.h&gt;</code><br />
<code>#include &lt;kcenon/monitoring/export/trace_exporters.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../db/d31/storage__backends_8h_source.html">kcenon/monitoring/storage/storage_backends.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_integration_e2e.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/ddb/test__integration__e2e_8cpp__incl.png" border="0" usemap="#atests_2test__integration__e2e_8cpp" alt=""/></div>
<map name="atests_2test__integration__e2e_8cpp" id="atests_2test__integration__e2e_8cpp">
<area shape="rect" title="End&#45;to&#45;end integration tests for the monitoring system." alt="" coords="2521,5,2682,45"/>
<area shape="rect" title=" " alt="" coords="5,101,109,126"/>
<area shape="poly" title=" " alt="" coords="2521,29,2057,29,1364,36,997,44,651,56,353,73,128,96,108,100,107,95,128,91,352,68,651,51,997,39,1364,31,2057,24,2521,24"/>
<area shape="rect" title=" " alt="" coords="1333,291,1397,317"/>
<area shape="poly" title=" " alt="" coords="2520,30,2274,35,1957,47,1804,55,1669,66,1566,80,1531,87,1508,96,1482,113,1459,135,1420,185,1393,237,1376,279,1371,277,1388,235,1416,182,1455,131,1479,109,1505,91,1529,82,1565,74,1669,61,1803,50,1957,41,2274,30,2520,25"/>
<area shape="rect" title=" " alt="" coords="1945,291,2012,317"/>
<area shape="poly" title=" " alt="" coords="2608,45,2614,85,2616,137,2612,165,2605,192,2594,216,2577,238,2557,252,2533,263,2472,278,2398,284,2318,285,2160,281,2092,281,2039,287,2024,290,2023,285,2038,281,2092,276,2160,276,2318,280,2398,279,2471,273,2531,258,2554,248,2573,234,2589,214,2600,190,2607,164,2610,137,2609,86,2603,46"/>
<area shape="rect" title=" " alt="" coords="290,291,353,317"/>
<area shape="poly" title=" " alt="" coords="2521,30,2024,33,1309,43,955,52,649,63,426,78,356,86,320,96,282,122,259,154,253,172,252,191,254,212,261,235,276,260,296,281,293,284,272,263,256,237,249,213,246,191,248,171,254,152,278,119,318,91,355,81,425,72,649,58,955,46,1309,38,2024,28,2521,24"/>
<area shape="rect" title=" " alt="" coords="2821,291,2888,317"/>
<area shape="poly" title=" " alt="" coords="2619,44,2663,94,2704,131,2730,142,2755,147,2803,146,2825,145,2847,149,2868,160,2889,180,2899,205,2896,232,2886,259,2874,281,2869,279,2882,256,2891,231,2893,206,2884,183,2865,164,2846,154,2825,151,2803,151,2755,152,2729,148,2701,136,2659,97,2615,48"/>
<area shape="rect" title=" " alt="" coords="2715,101,2787,126"/>
<area shape="poly" title=" " alt="" coords="2635,43,2720,92,2718,96,2633,48"/>
<area shape="rect" title=" " alt="" coords="2811,101,2885,126"/>
<area shape="poly" title=" " alt="" coords="2659,43,2800,91,2806,93,2804,98,2798,96,2658,48"/>
<area shape="rect" title=" " alt="" coords="2909,101,3000,126"/>
<area shape="poly" title=" " alt="" coords="2683,40,2897,91,2908,94,2907,99,2895,96,2682,46"/>
<area shape="rect" href="../../d1/d7d/result__types_8h.html" title="Result pattern type definitions for monitoring system." alt="" coords="640,284,816,324"/>
<area shape="poly" title=" " alt="" coords="2521,30,2145,35,1604,46,1053,65,823,79,650,96,589,101,534,100,438,98,395,103,354,116,315,142,275,183,267,196,264,209,267,221,275,234,291,243,321,252,411,269,627,292,626,297,410,274,320,257,289,248,271,238,262,223,259,209,262,194,271,180,311,138,352,112,394,98,437,93,534,95,589,95,649,91,823,74,1053,60,1604,40,2145,29,2520,25"/>
<area shape="rect" href="../../d1/d6e/monitoring__core_8h.html" title="Core monitoring system interface definitions." alt="" coords="475,189,688,229"/>
<area shape="poly" title=" " alt="" coords="2521,29,2120,30,1555,38,1272,46,1022,58,829,74,761,84,717,96,684,112,654,134,607,180,603,176,651,130,682,108,715,91,760,79,828,69,1022,52,1272,40,1555,32,2119,25,2521,24"/>
<area shape="rect" href="../../d0/d07/distributed__tracer_8h.html" title=" " alt="" coords="3025,93,3218,133"/>
<area shape="poly" title=" " alt="" coords="2682,37,3011,91,3010,96,2682,42"/>
<area shape="rect" title=" " alt="" coords="3242,93,3473,133"/>
<area shape="poly" title=" " alt="" coords="2683,32,2923,56,3229,90,3228,96,2923,61,2682,37"/>
<area shape="rect" href="../../d6/d73/adaptive__monitor_8h.html" title=" " alt="" coords="3497,93,3703,133"/>
<area shape="poly" title=" " alt="" coords="2682,28,3027,49,3252,67,3484,91,3483,96,3252,72,3026,54,2682,33"/>
<area shape="rect" href="../../d8/d34/health__monitor_8h.html" title=" " alt="" coords="2039,93,2228,133"/>
<area shape="poly" title=" " alt="" coords="2521,44,2242,95,2241,90,2520,39"/>
<area shape="rect" href="../../d2/dd4/circuit__breaker_8h.html" title=" " alt="" coords="2637,189,2848,229"/>
<area shape="poly" title=" " alt="" coords="2611,44,2632,86,2661,132,2684,156,2708,178,2705,182,2680,160,2657,135,2627,89,2607,47"/>
<area shape="rect" href="../../d6/df4/retry__policy_8h.html" title=" " alt="" coords="1067,189,1277,229"/>
<area shape="poly" title=" " alt="" coords="2521,31,2243,39,1878,52,1541,71,1419,83,1347,96,1307,113,1268,135,1205,182,1201,178,1265,131,1304,108,1346,91,1418,78,1540,66,1878,47,2243,34,2520,26"/>
<area shape="rect" href="../../dd/d82/fault__tolerance__manager_8h.html" title=" " alt="" coords="1519,93,1729,133"/>
<area shape="poly" title=" " alt="" coords="2521,36,1743,104,1743,99,2520,31"/>
<area shape="rect" title=" " alt="" coords="3727,93,3918,133"/>
<area shape="poly" title=" " alt="" coords="2682,26,3118,43,3412,62,3714,91,3713,96,3411,68,3118,48,2682,31"/>
<area shape="rect" title=" " alt="" coords="3942,93,4133,133"/>
<area shape="poly" title=" " alt="" coords="2682,25,2896,28,3203,39,3560,58,3746,73,3928,91,3928,96,3745,78,3560,64,3203,44,2896,34,2682,30"/>
<area shape="rect" href="../../db/d31/storage__backends_8h.html" title=" " alt="" coords="728,93,925,133"/>
<area shape="poly" title=" " alt="" coords="2521,33,939,109,939,104,2520,28"/>
<area shape="rect" href="../../de/d11/error__codes_8h.html" title="Monitoring system specific error codes." alt="" coords="403,379,514,405"/>
<area shape="poly" title=" " alt="" coords="670,327,508,378,506,373,668,322"/>
<area shape="rect" title=" " alt="" coords="1139,460,1197,485"/>
<area shape="poly" title=" " alt="" coords="781,322,834,343,889,370,918,390,948,410,994,428,1042,443,1126,462,1125,467,1040,448,992,433,945,414,915,395,887,374,832,348,779,327"/>
<area shape="rect" title=" " alt="" coords="689,372,877,412"/>
<area shape="poly" title=" " alt="" coords="742,323,766,359,761,362,738,326"/>
<area shape="rect" title=" " alt="" coords="589,379,664,405"/>
<area shape="poly" title=" " alt="" coords="707,326,653,372,649,368,704,322"/>
<area shape="rect" title=" " alt="" coords="425,460,492,485"/>
<area shape="poly" title=" " alt="" coords="461,405,461,446,456,446,456,405"/>
<area shape="poly" title=" " alt="" coords="500,402,534,409,704,434,873,450,1125,467,1124,472,873,456,704,439,533,415,499,407"/>
<area shape="poly" title=" " alt="" coords="688,213,1882,281,1932,290,1931,295,1881,287,688,219"/>
<area shape="poly" title=" " alt="" coords="523,231,365,286,360,288,358,283,363,282,521,226"/>
<area shape="poly" title=" " alt="" coords="612,226,688,275,686,279,610,231"/>
<area shape="poly" title=" " alt="" coords="571,230,476,370,472,367,566,227"/>
<area shape="poly" title=" " alt="" coords="576,230,564,268,555,316,554,342,558,367,566,390,579,410,607,423,661,435,816,452,990,463,1125,468,1125,473,990,468,816,458,660,440,605,429,576,414,561,392,552,368,549,342,550,316,559,267,571,228"/>
<area shape="poly" title=" " alt="" coords="589,228,623,366,618,367,584,230"/>
<area shape="rect" title=" " alt="" coords="1681,291,1759,317"/>
<area shape="poly" title=" " alt="" coords="689,216,1668,296,1668,301,688,221"/>
<area shape="rect" title=" " alt="" coords="1783,291,1870,317"/>
<area shape="poly" title=" " alt="" coords="688,213,1316,249,1619,269,1771,281,1785,285,1784,290,1770,287,1619,274,1315,255,688,219"/>
<area shape="rect" title=" " alt="" coords="891,291,1015,317"/>
<area shape="poly" title=" " alt="" coords="657,226,895,285,894,291,656,231"/>
<area shape="rect" title=" " alt="" coords="377,291,463,317"/>
<area shape="poly" title=" " alt="" coords="550,231,453,287,450,282,547,226"/>
<area shape="rect" title=" " alt="" coords="3049,181,3194,236"/>
<area shape="poly" title=" " alt="" coords="3124,133,3124,168,3119,168,3119,133"/>
<area shape="rect" title=" " alt="" coords="3509,196,3691,221"/>
<area shape="poly" title=" " alt="" coords="3603,133,3603,182,3597,182,3597,133"/>
<area shape="poly" title=" " alt="" coords="2039,130,1907,152,1762,184,1680,210,1599,239,1411,293,1410,288,1598,233,1679,205,1761,179,1906,147,2038,125"/>
<area shape="poly" title=" " alt="" coords="2120,135,1999,282,1995,279,2116,132"/>
<area shape="poly" title=" " alt="" coords="2038,122,1741,136,1097,140,886,144,697,152,549,165,497,174,464,184,448,195,438,207,429,222,415,238,352,286,349,282,412,234,425,219,434,204,444,191,462,179,496,168,548,160,697,147,886,139,1097,134,1741,131,2038,117"/>
<area shape="poly" title=" " alt="" coords="2228,114,2400,119,2599,131,2691,139,2770,150,2829,163,2849,171,2862,180,2875,203,2877,230,2874,256,2867,279,2862,278,2869,255,2872,230,2870,205,2858,183,2847,175,2828,168,2770,155,2691,144,2598,136,2400,125,2228,119"/>
<area shape="poly" title=" " alt="" coords="2228,114,2406,120,2612,131,2792,150,2854,163,2888,179,2917,214,2929,251,2929,270,2925,289,2916,308,2902,326,2887,338,2865,349,2805,370,2723,388,2623,403,2381,429,2107,448,1827,460,1566,468,1211,474,1211,468,1566,463,1827,455,2107,442,2381,424,2622,398,2722,382,2803,365,2863,344,2884,333,2898,322,2911,305,2920,287,2924,270,2924,252,2912,217,2885,183,2852,168,2791,156,2612,137,2405,125,2228,119"/>
<area shape="poly" title=" " alt="" coords="2039,122,960,184,702,201,702,196,960,179,2038,117"/>
<area shape="poly" title=" " alt="" coords="2039,122,1987,129,1932,141,1876,158,1824,184,1796,205,1771,231,1735,281,1731,278,1767,227,1792,201,1821,179,1874,154,1930,135,1986,123,2038,116"/>
<area shape="poly" title=" " alt="" coords="2039,129,1929,150,1883,165,1854,183,1839,205,1831,229,1827,278,1822,278,1826,228,1835,202,1850,179,1881,161,1928,145,2038,124"/>
<area shape="poly" title=" " alt="" coords="2039,122,1449,153,1167,171,1040,184,1014,203,993,229,965,280,960,277,989,226,1010,200,1038,179,1167,166,1448,148,2038,117"/>
<area shape="rect" title=" " alt="" coords="1040,291,1125,317"/>
<area shape="poly" title=" " alt="" coords="2039,122,1452,155,1175,173,1056,184,1050,193,1046,205,1048,230,1057,256,1069,279,1064,281,1052,258,1042,231,1041,204,1045,191,1053,179,1175,167,1451,150,2038,117"/>
<area shape="rect" title=" " alt="" coords="2051,291,2115,317"/>
<area shape="poly" title=" " alt="" coords="2229,130,2268,149,2285,163,2300,180,2308,195,2310,209,2308,223,2299,238,2283,256,2263,271,2218,291,2171,302,2128,306,2128,300,2170,296,2216,286,2260,266,2279,252,2295,234,2303,221,2305,209,2303,197,2295,183,2282,167,2265,154,2227,135"/>
<area shape="rect" title=" " alt="" coords="2361,196,2423,221"/>
<area shape="poly" title=" " alt="" coords="2202,131,2270,152,2342,179,2361,187,2359,192,2340,184,2269,157,2201,136"/>
<area shape="rect" title=" " alt="" coords="2448,196,2563,221"/>
<area shape="poly" title=" " alt="" coords="2229,130,2329,151,2435,179,2465,189,2464,194,2434,184,2328,156,2228,135"/>
<area shape="rect" title=" " alt="" coords="2171,196,2285,221"/>
<area shape="poly" title=" " alt="" coords="2154,132,2208,184,2204,188,2151,135"/>
<area shape="poly" title=" " alt="" coords="2661,231,2619,239,2531,249,2456,255,2328,258,2201,264,2126,272,2039,287,2024,290,2023,285,2038,281,2126,267,2200,258,2328,253,2456,250,2530,244,2618,233,2660,226"/>
<area shape="poly" title=" " alt="" coords="2767,227,2832,280,2828,284,2764,231"/>
<area shape="poly" title=" " alt="" coords="2637,231,2575,239,2317,258,2099,267,1906,269,1727,267,1355,265,1137,271,879,287,830,291,830,286,878,281,1137,266,1355,259,1727,262,1906,264,2099,262,2317,253,2574,233,2637,226"/>
<area shape="poly" title=" " alt="" coords="2663,231,2267,318,2004,369,1736,415,1586,435,1436,451,1211,471,1211,466,1436,446,1585,430,1736,409,2003,364,2266,313,2662,226"/>
<area shape="poly" title=" " alt="" coords="2637,230,2575,239,2395,255,2254,262,2113,269,1934,287,1884,294,1883,289,1933,281,2113,264,2254,256,2394,250,2574,233,2637,225"/>
<area shape="poly" title=" " alt="" coords="2659,231,2619,239,2341,278,2129,301,2128,296,2341,272,2618,233,2658,226"/>
<area shape="rect" title=" " alt="" coords="2699,291,2786,317"/>
<area shape="poly" title=" " alt="" coords="2745,229,2745,277,2740,277,2740,229"/>
<area shape="poly" title=" " alt="" coords="1212,226,1330,283,1328,288,1210,231"/>
<area shape="poly" title=" " alt="" coords="1278,220,1398,233,1640,254,1746,264,1882,281,1932,290,1931,295,1881,287,1745,269,1639,260,1397,239,1277,225"/>
<area shape="poly" title=" " alt="" coords="1083,231,830,284,829,279,1082,226"/>
<area shape="poly" title=" " alt="" coords="1174,229,1171,446,1166,446,1169,229"/>
<area shape="poly" title=" " alt="" coords="1278,220,1771,281,1784,285,1782,290,1770,287,1277,225"/>
<area shape="poly" title=" " alt="" coords="1156,231,1105,283,1102,279,1152,227"/>
<area shape="rect" title=" " alt="" coords="1206,291,1269,317"/>
<area shape="poly" title=" " alt="" coords="1187,227,1223,278,1219,281,1183,230"/>
<area shape="poly" title=" " alt="" coords="1518,121,880,147,571,165,469,175,420,184,402,199,379,224,338,281,334,278,375,221,398,195,418,179,468,169,571,160,880,141,1518,116"/>
<area shape="poly" title=" " alt="" coords="1627,134,1623,183,1615,212,1601,238,1559,285,1510,327,1457,362,1401,392,1295,437,1212,463,1210,458,1294,432,1399,388,1454,358,1507,322,1555,281,1596,234,1610,210,1618,182,1622,133"/>
<area shape="poly" title=" " alt="" coords="1636,132,1710,278,1705,280,1631,135"/>
<area shape="poly" title=" " alt="" coords="1519,121,1362,128,1187,140,1039,158,988,170,962,183,949,204,944,229,945,255,949,278,944,279,940,255,939,229,944,202,958,179,987,165,1038,153,1187,135,1361,122,1518,115"/>
<area shape="poly" title=" " alt="" coords="1730,116,1820,122,1915,134,1997,152,2029,165,2052,179,2069,201,2080,228,2086,277,2081,278,2074,229,2065,204,2049,183,2027,169,1996,157,1914,139,1820,127,1729,121"/>
<area shape="poly" title=" " alt="" coords="1730,117,2103,138,2338,156,2575,179,2624,185,2623,190,2574,184,2338,161,2103,143,1729,122"/>
<area shape="poly" title=" " alt="" coords="1533,136,1277,189,1276,183,1532,131"/>
<area shape="rect" href="../../d5/d2d/error__boundary_8h.html" title=" " alt="" coords="1864,196,1995,221"/>
<area shape="poly" title=" " alt="" coords="1687,131,1880,189,1878,195,1685,136"/>
<area shape="rect" title=" " alt="" coords="1454,196,1501,221"/>
<area shape="poly" title=" " alt="" coords="1593,136,1515,184,1506,190,1503,185,1512,179,1590,131"/>
<area shape="rect" title=" " alt="" coords="1525,196,1587,221"/>
<area shape="poly" title=" " alt="" coords="1612,135,1575,186,1570,183,1608,132"/>
<area shape="poly" title=" " alt="" coords="1938,220,1968,278,1964,280,1933,223"/>
<area shape="poly" title=" " alt="" coords="1995,215,2159,233,2339,244,2480,247,2620,254,2702,265,2798,281,2812,285,2811,290,2797,287,2701,270,2619,260,2479,252,2339,250,2158,239,1995,221"/>
<area shape="poly" title=" " alt="" coords="1864,218,1599,239,1239,260,1081,270,879,287,830,292,830,287,878,281,1081,264,1238,255,1598,233,1863,213"/>
<area shape="poly" title=" " alt="" coords="1930,222,1917,271,1903,300,1883,326,1861,343,1831,359,1756,387,1663,411,1562,430,1361,457,1211,471,1211,466,1360,452,1561,425,1662,405,1754,382,1829,354,1858,339,1879,322,1899,298,1912,269,1925,221"/>
<area shape="poly" title=" " alt="" coords="1905,224,1759,288,1757,283,1903,219"/>
<area shape="poly" title=" " alt="" coords="1919,223,1852,284,1848,280,1915,219"/>
<area shape="poly" title=" " alt="" coords="1950,219,2053,282,2051,286,1947,224"/>
<area shape="poly" title=" " alt="" coords="926,119,1165,141,1281,158,1364,179,1388,192,1404,207,1419,221,1442,234,1506,254,1561,266,1610,271,1657,272,1756,271,1814,274,1882,281,1932,290,1931,295,1881,287,1814,279,1756,277,1657,278,1610,276,1560,271,1504,259,1440,238,1416,225,1400,211,1385,196,1362,184,1280,163,1164,146,925,124"/>
<area shape="poly" title=" " alt="" coords="728,122,597,131,455,144,336,161,296,172,275,183,269,194,266,206,271,231,285,257,303,280,299,283,281,260,266,233,261,205,264,192,272,179,294,167,335,156,455,139,597,125,727,117"/>
<area shape="poly" title=" " alt="" coords="802,135,779,157,760,183,742,227,733,271,728,270,737,226,755,180,776,153,799,132"/>
<area shape="poly" title=" " alt="" coords="827,134,826,181,833,235,849,283,861,302,880,322,941,370,1007,408,1072,437,1126,456,1124,461,1070,441,1005,413,938,374,877,326,857,305,845,286,828,237,821,181,822,133"/>
<area shape="poly" title=" " alt="" coords="778,136,645,186,643,181,776,131"/>
<area shape="poly" title=" " alt="" coords="926,117,1006,124,1098,136,1195,154,1290,179,1322,192,1345,206,1367,220,1398,233,1470,255,1543,272,1668,294,1667,299,1542,277,1469,260,1396,239,1365,225,1342,210,1320,197,1288,184,1194,159,1097,141,1005,129,926,122"/>
<area shape="poly" title=" " alt="" coords="830,133,838,182,847,209,861,234,887,262,918,283,915,287,884,266,857,238,842,211,833,183,825,134"/>
<area shape="poly" title=" " alt="" coords="854,131,1058,281,1055,285,851,136"/>
<area shape="poly" title=" " alt="" coords="926,115,1552,140,1857,158,1959,168,2008,179,2025,195,2042,221,2074,278,2069,280,2038,224,2021,199,2005,184,1958,174,1857,164,1552,145,926,120"/>
<area shape="rect" title=" " alt="" coords="286,196,349,221"/>
<area shape="poly" title=" " alt="" coords="728,122,649,129,558,141,462,159,369,184,349,192,347,187,367,179,461,154,557,136,649,124,728,117"/>
</map>
</div>
</div>
<p><a href="../../d1/d9b/test__integration__e2e_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a488edffbb82c503b4fd8a79772a608c0" id="r_a488edffbb82c503b4fd8a79772a608c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a488edffbb82c503b4fd8a79772a608c0">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, StorageBackendIntegration)</td></tr>
<tr class="separator:a488edffbb82c503b4fd8a79772a608c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70636d332f6e87d00b6c3fca35df35e1" id="r_a70636d332f6e87d00b6c3fca35df35e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a70636d332f6e87d00b6c3fca35df35e1">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, DistributedTracingE2E)</td></tr>
<tr class="separator:a70636d332f6e87d00b6c3fca35df35e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682e953c7e7637be353153a0ee81b9e1" id="r_a682e953c7e7637be353153a0ee81b9e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a682e953c7e7637be353153a0ee81b9e1">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, HealthMonitoringWithRecovery)</td></tr>
<tr class="separator:a682e953c7e7637be353153a0ee81b9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592027d23ef36517b1967e304c0fbf01" id="r_a592027d23ef36517b1967e304c0fbf01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a592027d23ef36517b1967e304c0fbf01">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, PerformanceAdaptiveOptimization)</td></tr>
<tr class="separator:a592027d23ef36517b1967e304c0fbf01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f4fd19dd4d35e662f8ca4a44fc2549" id="r_ae5f4fd19dd4d35e662f8ca4a44fc2549"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#ae5f4fd19dd4d35e662f8ca4a44fc2549">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, CircuitBreakerAndRetry)</td></tr>
<tr class="separator:ae5f4fd19dd4d35e662f8ca4a44fc2549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab4269a9005d7046025f96d0b3411e76" id="r_aab4269a9005d7046025f96d0b3411e76"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#aab4269a9005d7046025f96d0b3411e76">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, ExportPipelineIntegration)</td></tr>
<tr class="separator:aab4269a9005d7046025f96d0b3411e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44e20b27be624999bd30ba9315acf094" id="r_a44e20b27be624999bd30ba9315acf094"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a44e20b27be624999bd30ba9315acf094">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, FullSystemLoadTest)</td></tr>
<tr class="separator:a44e20b27be624999bd30ba9315acf094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1c0e68886466ae530a1f18b80f278d" id="r_afc1c0e68886466ae530a1f18b80f278d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#afc1c0e68886466ae530a1f18b80f278d">TEST_F</a> (<a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>, CrossComponentIntegration)</td></tr>
<tr class="separator:afc1c0e68886466ae530a1f18b80f278d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627" id="r_a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d9b/test__integration__e2e_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>End-to-end integration tests for the monitoring system. </p>
<p>Tests complete workflows and interactions between all major components </p>

<p class="definition">Definition in file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00545">545</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  545</span>                                {</div>
<div class="line"><span class="lineno">  546</span>    ::testing::InitGoogleTest(&amp;argc, argv);</div>
<div class="line"><span class="lineno">  547</span>    <span class="keywordflow">return</span> RUN_ALL_TESTS();</div>
<div class="line"><span class="lineno">  548</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5f4fd19dd4d35e662f8ca4a44fc2549" name="ae5f4fd19dd4d35e662f8ca4a44fc2549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5f4fd19dd4d35e662f8ca4a44fc2549">&#9670;&#160;</a></span>TEST_F() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CircuitBreakerAndRetry&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 5: Circuit Breaker and Retry Mechanism Failure injection → Circuit breaking → Recovery </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00293">293</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>                                                   {</div>
<div class="line"><span class="lineno">  294</span>    <span class="comment">// 1. Setup resilience components</span></div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_class" href="../../d2/d74/classkcenon_1_1monitoring_1_1fault__tolerance__manager.html">fault_tolerance_manager</a> ft_manager;</div>
<div class="line"><span class="lineno">  296</span>    <a class="code hl_class" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html">circuit_breaker</a> breaker(3, std::chrono::milliseconds(100));</div>
<div class="line"><span class="lineno">  297</span>    <a class="code hl_class" href="../../d3/d0a/classkcenon_1_1monitoring_1_1retry__policy.html">retry_policy</a> policy;</div>
<div class="line"><span class="lineno">  298</span>    policy.max_attempts = 5;</div>
<div class="line"><span class="lineno">  299</span>    policy.initial_delay = std::chrono::milliseconds(10);</div>
<div class="line"><span class="lineno">  300</span>    </div>
<div class="line"><span class="lineno">  301</span>    <span class="comment">// 2. Simulate component with intermittent failures</span></div>
<div class="line"><span class="lineno">  302</span>    std::atomic&lt;int&gt; call_count{0};</div>
<div class="line"><span class="lineno">  303</span>    std::atomic&lt;bool&gt; should_fail{<span class="keyword">true</span>};</div>
<div class="line"><span class="lineno">  304</span>    </div>
<div class="line"><span class="lineno">  305</span>    <span class="keyword">auto</span> unreliable_operation = [&amp;call_count, &amp;should_fail]() -&gt; <a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#a6931ba7fb7341c1e6c5c408ee09e48ea">result_void</a> {</div>
<div class="line"><span class="lineno">  306</span>        call_count++;</div>
<div class="line"><span class="lineno">  307</span>        </div>
<div class="line"><span class="lineno">  308</span>        <span class="comment">// Fail first 3 calls, then succeed</span></div>
<div class="line"><span class="lineno">  309</span>        <span class="keywordflow">if</span> (call_count &lt;= 3 &amp;&amp; should_fail) {</div>
<div class="line"><span class="lineno">  310</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a716b65495ab9dbb3905f63f7e70d8acf">make_result_void</a>(monitoring_error_code::operation_failed,</div>
<div class="line"><span class="lineno">  311</span>                                    <span class="stringliteral">&quot;Simulated failure&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>        }</div>
<div class="line"><span class="lineno">  313</span>        </div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a5831822659b3edfa93f8cc4b75357478">make_void_success</a>();</div>
<div class="line"><span class="lineno">  315</span>    };</div>
<div class="line"><span class="lineno">  316</span>    </div>
<div class="line"><span class="lineno">  317</span>    <span class="comment">// 3. Test retry mechanism</span></div>
<div class="line"><span class="lineno">  318</span>    <span class="keyword">auto</span> retry_result = ft_manager.execute_with_retry(unreliable_operation, policy);</div>
<div class="line"><span class="lineno">  319</span>    EXPECT_TRUE(retry_result);</div>
<div class="line"><span class="lineno">  320</span>    EXPECT_EQ(call_count, 4); <span class="comment">// Failed 3 times, succeeded on 4th</span></div>
<div class="line"><span class="lineno">  321</span>    </div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">// 4. Reset and test circuit breaker</span></div>
<div class="line"><span class="lineno">  323</span>    call_count = 0;</div>
<div class="line"><span class="lineno">  324</span>    should_fail = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  325</span>    </div>
<div class="line"><span class="lineno">  326</span>    <span class="comment">// Trigger circuit breaker with failures</span></div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line"><span class="lineno">  328</span>        <span class="keyword">auto</span> cb_result = breaker.execute(unreliable_operation);</div>
<div class="line"><span class="lineno">  329</span>        EXPECT_FALSE(cb_result);</div>
<div class="line"><span class="lineno">  330</span>    }</div>
<div class="line"><span class="lineno">  331</span>    </div>
<div class="line"><span class="lineno">  332</span>    <span class="comment">// Circuit should be open</span></div>
<div class="line"><span class="lineno">  333</span>    EXPECT_EQ(breaker.get_state(), circuit_state::open);</div>
<div class="line"><span class="lineno">  334</span>    </div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">// Further calls should fail fast (circuit open)</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="keyword">auto</span> open_result = breaker.execute(unreliable_operation);</div>
<div class="line"><span class="lineno">  337</span>    EXPECT_FALSE(open_result);</div>
<div class="line"><span class="lineno">  338</span>    </div>
<div class="line"><span class="lineno">  339</span>    <span class="comment">// 5. Wait for circuit recovery</span></div>
<div class="line"><span class="lineno">  340</span>    std::this_thread::sleep_for(std::chrono::milliseconds(150));</div>
<div class="line"><span class="lineno">  341</span>    </div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">// Allow success for recovery</span></div>
<div class="line"><span class="lineno">  343</span>    should_fail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  344</span>    call_count = 0;</div>
<div class="line"><span class="lineno">  345</span>    </div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">// Circuit should transition to half-open and then closed</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="keyword">auto</span> recovery_result = breaker.execute(unreliable_operation);</div>
<div class="line"><span class="lineno">  348</span>    EXPECT_TRUE(recovery_result);</div>
<div class="line"><span class="lineno">  349</span>    EXPECT_EQ(breaker.get_state(), circuit_state::closed);</div>
<div class="line"><span class="lineno">  350</span>    </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// 6. Verify system stability after recovery</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno">  353</span>        <span class="keyword">auto</span> stable_result = breaker.execute(unreliable_operation);</div>
<div class="line"><span class="lineno">  354</span>        EXPECT_TRUE(stable_result);</div>
<div class="line"><span class="lineno">  355</span>    }</div>
<div class="line"><span class="lineno">  356</span>    </div>
<div class="line"><span class="lineno">  357</span>    EXPECT_EQ(breaker.get_state(), circuit_state::closed);</div>
<div class="line"><span class="lineno">  358</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1circuit__breaker_html"><div class="ttname"><a href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html">kcenon::monitoring::circuit_breaker</a></div><div class="ttdoc">Thread-safe circuit breaker implementation.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dd4/circuit__breaker_8h_source.html#l00132">circuit_breaker.h:132</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1fault__tolerance__manager_html"><div class="ttname"><a href="../../d2/d74/classkcenon_1_1monitoring_1_1fault__tolerance__manager.html">kcenon::monitoring::fault_tolerance_manager</a></div><div class="ttdoc">Fault tolerance manager template class.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d82/fault__tolerance__manager_8h_source.html#l00096">fault_tolerance_manager.h:96</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1retry__policy_html"><div class="ttname"><a href="../../d3/d0a/classkcenon_1_1monitoring_1_1retry__policy.html">kcenon::monitoring::retry_policy</a></div><div class="ttdoc">Basic retry policy implementation (backward compatibility)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/df4/retry__policy_8h_source.html#l00292">retry_policy.h:292</a></div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a5831822659b3edfa93f8cc4b75357478"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a5831822659b3edfa93f8cc4b75357478">kcenon::monitoring::make_void_success</a></div><div class="ttdeci">common::VoidResult make_void_success()</div><div class="ttdoc">Helper function to create successful VoidResult.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d7d/result__types_8h_source.html#l00240">result_types.h:240</a></div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a6931ba7fb7341c1e6c5c408ee09e48ea"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a6931ba7fb7341c1e6c5c408ee09e48ea">kcenon::monitoring::result_void</a></div><div class="ttdeci">common::VoidResult result_void</div><div class="ttdoc">Backward-compatible alias for common::VoidResult.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d7d/result__types_8h_source.html#l00129">result_types.h:129</a></div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a716b65495ab9dbb3905f63f7e70d8acf"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a716b65495ab9dbb3905f63f7e70d8acf">kcenon::monitoring::make_result_void</a></div><div class="ttdeci">common::VoidResult make_result_void(monitoring_error_code code, const std::string &amp;message=&quot;&quot;, const std::optional&lt; std::string &gt; &amp;context=std::nullopt)</div><div class="ttdoc">Create a VoidResult with error.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d7d/result__types_8h_source.html#l00189">result_types.h:189</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_ae5f4fd19dd4d35e662f8ca4a44fc2549_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_ae5f4fd19dd4d35e662f8ca4a44fc2549_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_ae5f4fd19dd4d35e662f8ca4a44fc2549_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_ae5f4fd19dd4d35e662f8ca4a44fc2549_cgraph">
<area shape="rect" title=" " alt="" coords="5,198,75,223"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#a4fb45f40f2821e055692878e126ebf9d" title="Execute a function with circuit breaker protection and fallback." alt="" coords="127,84,313,124"/>
<area shape="poly" title=" " alt="" coords="54,196,84,171,121,144,154,127,156,132,124,149,87,175,57,200"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#af41897fbd8d5ca6c4e53e0ad4a8ec5d5" title="Get current circuit state." alt="" coords="123,159,317,199"/>
<area shape="poly" title=" " alt="" coords="74,202,109,196,110,201,75,207"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a716b65495ab9dbb3905f63f7e70d8acf" title="Create a VoidResult with error." alt="" coords="146,223,294,263"/>
<area shape="poly" title=" " alt="" coords="75,214,133,224,132,230,74,219"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a5831822659b3edfa93f8cc4b75357478" title="Helper function to create successful VoidResult." alt="" coords="141,287,299,327"/>
<area shape="poly" title=" " alt="" coords="56,222,86,247,124,272,137,279,135,284,121,277,83,251,53,226"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#ae8c79e4e1d3a0784f1186487b33c6dbf" title="Check current state and handle timeout transitions." alt="" coords="367,5,579,45"/>
<area shape="poly" title=" " alt="" coords="281,81,365,55,391,47,392,52,366,60,283,86"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#a596ef11c724a9b70bbd199004c52459d" title="Handle failed execution." alt="" coords="398,70,549,125"/>
<area shape="poly" title=" " alt="" coords="313,99,384,97,385,102,313,104"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#a53ea63c1ac08a8b8362e77a41396c456" title="Handle successful execution." alt="" coords="398,149,549,203"/>
<area shape="poly" title=" " alt="" coords="292,121,386,148,384,154,290,127"/>
<area shape="rect" href="../../d0/d38/classkcenon_1_1monitoring_1_1circuit__breaker.html#a1502c21224593b1f4c64be51d50da712" title="Transition to a new state (must be called with state_mutex_ held)" alt="" coords="629,77,845,117"/>
<area shape="poly" title=" " alt="" coords="548,43,651,71,649,76,547,48"/>
<area shape="poly" title=" " alt="" coords="549,95,615,95,615,100,549,100"/>
<area shape="poly" title=" " alt="" coords="548,151,656,119,657,124,550,156"/>
<area shape="rect" href="../../d5/d36/structkcenon_1_1monitoring_1_1error__info.html#a708459545c76e0e9c5d07ffa9b9e2785" title="Convert to common_system error_info." alt="" coords="365,228,581,268"/>
<area shape="poly" title=" " alt="" coords="294,242,351,243,351,248,294,247"/>
</map>
</div>

</div>
</div>
<a id="afc1c0e68886466ae530a1f18b80f278d" name="afc1c0e68886466ae530a1f18b80f278d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1c0e68886466ae530a1f18b80f278d">&#9670;&#160;</a></span>TEST_F() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CrossComponentIntegration&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 8: Cross-Component Integration Multiple components working together </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00491">491</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  491</span>                                                      {</div>
<div class="line"><span class="lineno">  492</span>    <span class="comment">// 1. Create storage backend</span></div>
<div class="line"><span class="lineno">  493</span>    <a class="code hl_struct" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html">storage_config</a> config;</div>
<div class="line"><span class="lineno">  494</span>    config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a5470889434a9f2c7dab29555dcb3fe0e">type</a> = storage_backend_type::memory_buffer;</div>
<div class="line"><span class="lineno">  495</span>    config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#ac188a463b7a7516db25844e62991a510">max_capacity</a> = 1000;</div>
<div class="line"><span class="lineno">  496</span>    <span class="keyword">auto</span> <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a> = std::make_unique&lt;memory_storage_backend&gt;(config);</div>
<div class="line"><span class="lineno">  497</span>    </div>
<div class="line"><span class="lineno">  498</span>    <span class="comment">// 2. Create tracer</span></div>
<div class="line"><span class="lineno">  499</span>    <span class="keyword">auto</span> tracer = std::make_unique&lt;distributed_tracer&gt;(<span class="stringliteral">&quot;integration_test&quot;</span>);</div>
<div class="line"><span class="lineno">  500</span>    </div>
<div class="line"><span class="lineno">  501</span>    <span class="comment">// 3. Create performance monitor</span></div>
<div class="line"><span class="lineno">  502</span>    <span class="keyword">auto</span> perf_monitor = performance_monitor::create();</div>
<div class="line"><span class="lineno">  503</span>    </div>
<div class="line"><span class="lineno">  504</span>    <span class="comment">// 4. Create metrics snapshot</span></div>
<div class="line"><span class="lineno">  505</span>    <a class="code hl_struct" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html">metrics_snapshot</a> snapshot;</div>
<div class="line"><span class="lineno">  506</span>    </div>
<div class="line"><span class="lineno">  507</span>    <span class="comment">// Add performance metrics</span></div>
<div class="line"><span class="lineno">  508</span>    <span class="keyword">auto</span> cpu_usage = perf_monitor-&gt;measure_cpu_usage();</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">if</span> (cpu_usage) {</div>
<div class="line"><span class="lineno">  510</span>        snapshot.<a class="code hl_function" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7">add_metric</a>(<span class="stringliteral">&quot;cpu_usage&quot;</span>, cpu_usage.value());</div>
<div class="line"><span class="lineno">  511</span>    }</div>
<div class="line"><span class="lineno">  512</span>    </div>
<div class="line"><span class="lineno">  513</span>    <span class="keyword">auto</span> memory_usage = perf_monitor-&gt;measure_memory_usage();</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">if</span> (memory_usage) {</div>
<div class="line"><span class="lineno">  515</span>        snapshot.<a class="code hl_function" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7">add_metric</a>(<span class="stringliteral">&quot;memory_usage&quot;</span>, memory_usage.value());</div>
<div class="line"><span class="lineno">  516</span>    }</div>
<div class="line"><span class="lineno">  517</span>    </div>
<div class="line"><span class="lineno">  518</span>    <span class="comment">// 5. Store snapshot</span></div>
<div class="line"><span class="lineno">  519</span>    <span class="keyword">auto</span> store_result = <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a>-&gt;store(snapshot);</div>
<div class="line"><span class="lineno">  520</span>    EXPECT_TRUE(store_result);</div>
<div class="line"><span class="lineno">  521</span>    </div>
<div class="line"><span class="lineno">  522</span>    <span class="comment">// 6. Create trace span</span></div>
<div class="line"><span class="lineno">  523</span>    <span class="keyword">auto</span> span_result = tracer-&gt;start_span(<span class="stringliteral">&quot;cross_component_test&quot;</span>);</div>
<div class="line"><span class="lineno">  524</span>    ASSERT_TRUE(span_result);</div>
<div class="line"><span class="lineno">  525</span>    </div>
<div class="line"><span class="lineno">  526</span>    <span class="comment">// 7. Add metrics to span as attributes</span></div>
<div class="line"><span class="lineno">  527</span>    span_result.value().set_attribute(<span class="stringliteral">&quot;cpu_usage&quot;</span>, std::to_string(cpu_usage.value_or(0)));</div>
<div class="line"><span class="lineno">  528</span>    span_result.value().set_attribute(<span class="stringliteral">&quot;memory_usage&quot;</span>, std::to_string(memory_usage.value_or(0)));</div>
<div class="line"><span class="lineno">  529</span>    </div>
<div class="line"><span class="lineno">  530</span>    <span class="comment">// 8. Verify storage</span></div>
<div class="line"><span class="lineno">  531</span>    EXPECT_EQ(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a>-&gt;size(), 1);</div>
<div class="line"><span class="lineno">  532</span>    </div>
<div class="line"><span class="lineno">  533</span>    <span class="keyword">auto</span> retrieved = <a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">storage</a>-&gt;retrieve(0);</div>
<div class="line"><span class="lineno">  534</span>    EXPECT_TRUE(retrieved);</div>
<div class="line"><span class="lineno">  535</span>    </div>
<div class="line"><span class="lineno">  536</span>    <span class="comment">// 9. Verify metrics in retrieved snapshot</span></div>
<div class="line"><span class="lineno">  537</span>    <span class="keyword">auto</span> cpu_metric = retrieved.value().get_metric(<span class="stringliteral">&quot;cpu_usage&quot;</span>);</div>
<div class="line"><span class="lineno">  538</span>    EXPECT_TRUE(cpu_metric.has_value());</div>
<div class="line"><span class="lineno">  539</span>    </div>
<div class="line"><span class="lineno">  540</span>    <span class="keyword">auto</span> mem_metric = retrieved.value().get_metric(<span class="stringliteral">&quot;memory_usage&quot;</span>);</div>
<div class="line"><span class="lineno">  541</span>    EXPECT_TRUE(mem_metric.has_value());</div>
<div class="line"><span class="lineno">  542</span>}</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#ad5391888a20ee60ea1d9e24da879aa88addecebdea58b5f264d27f1f7909bab74">kcenon::monitoring::sensor_type::storage</a></div><div class="ttdeci">@ storage</div><div class="ttdoc">Storage device sensor.</div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metrics__snapshot_html"><div class="ttname"><a href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html">kcenon::monitoring::metrics_snapshot</a></div><div class="ttdoc">Complete snapshot of metrics at a point in time.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d6e/monitoring__core_8h_source.html#l00066">monitoring_core.h:66</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metrics__snapshot_html_a91c4bb5a196e0ace7716f2d6c54eb1a7"><div class="ttname"><a href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7">kcenon::monitoring::metrics_snapshot::add_metric</a></div><div class="ttdeci">void add_metric(const std::string &amp;name, double value)</div><div class="ttdoc">Add a metric to the snapshot.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d6e/monitoring__core_8h_source.html#l00079">monitoring_core.h:79</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1storage__config_html"><div class="ttname"><a href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html">kcenon::monitoring::storage_config</a></div><div class="ttdoc">Storage configuration.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d31/storage__backends_8h_source.html#l00075">storage_backends.h:75</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1storage__config_html_a5470889434a9f2c7dab29555dcb3fe0e"><div class="ttname"><a href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a5470889434a9f2c7dab29555dcb3fe0e">kcenon::monitoring::storage_config::type</a></div><div class="ttdeci">storage_backend_type type</div><div class="ttdef"><b>Definition</b> <a href="../../db/d31/storage__backends_8h_source.html#l00076">storage_backends.h:76</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1storage__config_html_ac188a463b7a7516db25844e62991a510"><div class="ttname"><a href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#ac188a463b7a7516db25844e62991a510">kcenon::monitoring::storage_config::max_capacity</a></div><div class="ttdeci">size_t max_capacity</div><div class="ttdef"><b>Definition</b> <a href="../../db/d31/storage__backends_8h_source.html#l00085">storage_backends.h:85</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_afc1c0e68886466ae530a1f18b80f278d_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_afc1c0e68886466ae530a1f18b80f278d_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_afc1c0e68886466ae530a1f18b80f278d_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_afc1c0e68886466ae530a1f18b80f278d_cgraph">
<area shape="rect" title=" " alt="" coords="5,20,75,45"/>
<area shape="rect" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7" title="Add a metric to the snapshot." alt="" coords="123,5,276,60"/>
<area shape="poly" title=" " alt="" coords="75,30,109,30,109,35,75,35"/>
</map>
</div>

</div>
</div>
<a id="a70636d332f6e87d00b6c3fca35df35e1" name="a70636d332f6e87d00b6c3fca35df35e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70636d332f6e87d00b6c3fca35df35e1">&#9670;&#160;</a></span>TEST_F() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DistributedTracingE2E&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 2: Distributed Tracing End-to-End Span creation → Context propagation → Export </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00133">133</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  133</span>                                                  {</div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">// 1. Setup tracing components</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="keyword">auto</span> tracer = std::make_unique&lt;distributed_tracer&gt;(<span class="stringliteral">&quot;e2e_service&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>    <span class="keyword">auto</span> otel_adapter = <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a197ddc8594ddbb2ef9ac1e77d3d4834f">create_opentelemetry_compatibility_layer</a>(<span class="stringliteral">&quot;e2e_service&quot;</span>, <span class="stringliteral">&quot;1.0.0&quot;</span>);</div>
<div class="line"><span class="lineno">  137</span>    </div>
<div class="line"><span class="lineno">  138</span>    <span class="comment">// 2. Initialize OTEL adapter</span></div>
<div class="line"><span class="lineno">  139</span>    <span class="keyword">auto</span> init_result = otel_adapter-&gt;initialize();</div>
<div class="line"><span class="lineno">  140</span>    ASSERT_TRUE(init_result);</div>
<div class="line"><span class="lineno">  141</span>    </div>
<div class="line"><span class="lineno">  142</span>    <span class="comment">// 3. Create parent span</span></div>
<div class="line"><span class="lineno">  143</span>    <span class="keyword">auto</span> parent_span = tracer-&gt;start_span(<span class="stringliteral">&quot;parent_operation&quot;</span>);</div>
<div class="line"><span class="lineno">  144</span>    ASSERT_TRUE(parent_span);</div>
<div class="line"><span class="lineno">  145</span>    </div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">// 4. Create child span with parent context</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="keyword">auto</span> child_span = tracer-&gt;start_span(<span class="stringliteral">&quot;child_operation&quot;</span>, parent_span.value());</div>
<div class="line"><span class="lineno">  148</span>    ASSERT_TRUE(child_span);</div>
<div class="line"><span class="lineno">  149</span>    </div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// 5. Add events and attributes</span></div>
<div class="line"><span class="lineno">  151</span>    child_span.value().add_event(<span class="stringliteral">&quot;processing_started&quot;</span>);</div>
<div class="line"><span class="lineno">  152</span>    child_span.value().set_attribute(<span class="stringliteral">&quot;user_id&quot;</span>, <span class="stringliteral">&quot;test_user&quot;</span>);</div>
<div class="line"><span class="lineno">  153</span>    child_span.value().set_attribute(<span class="stringliteral">&quot;request_id&quot;</span>, <span class="stringliteral">&quot;req_123&quot;</span>);</div>
<div class="line"><span class="lineno">  154</span>    </div>
<div class="line"><span class="lineno">  155</span>    <span class="comment">// 6. Simulate error</span></div>
<div class="line"><span class="lineno">  156</span>    child_span.value().set_error(<span class="keyword">true</span>, <span class="stringliteral">&quot;Simulated error for testing&quot;</span>);</div>
<div class="line"><span class="lineno">  157</span>    </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// 7. Export spans through OTEL adapter</span></div>
<div class="line"><span class="lineno">  159</span>    std::vector&lt;trace_span&gt; spans;</div>
<div class="line"><span class="lineno">  160</span>    spans.push_back(parent_span.value());</div>
<div class="line"><span class="lineno">  161</span>    spans.push_back(child_span.value());</div>
<div class="line"><span class="lineno">  162</span>    </div>
<div class="line"><span class="lineno">  163</span>    <span class="keyword">auto</span> export_result = otel_adapter-&gt;export_spans(spans);</div>
<div class="line"><span class="lineno">  164</span>    EXPECT_TRUE(export_result);</div>
<div class="line"><span class="lineno">  165</span>    </div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">// 8. Verify stats</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="keyword">auto</span> stats = otel_adapter-&gt;get_stats();</div>
<div class="line"><span class="lineno">  168</span>    EXPECT_GT(stats.pending_spans, 0);</div>
<div class="line"><span class="lineno">  169</span>    </div>
<div class="line"><span class="lineno">  170</span>    <span class="comment">// 9. Flush</span></div>
<div class="line"><span class="lineno">  171</span>    <span class="keyword">auto</span> flush_result = otel_adapter-&gt;flush();</div>
<div class="line"><span class="lineno">  172</span>    EXPECT_TRUE(flush_result);</div>
<div class="line"><span class="lineno">  173</span>}</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a197ddc8594ddbb2ef9ac1e77d3d4834f"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a197ddc8594ddbb2ef9ac1e77d3d4834f">kcenon::monitoring::create_opentelemetry_compatibility_layer</a></div><div class="ttdeci">std::unique_ptr&lt; opentelemetry_compatibility_layer &gt; create_opentelemetry_compatibility_layer(const otel_resource &amp;resource)</div><div class="ttdoc">Create OpenTelemetry compatibility layer.</div><div class="ttdef"><b>Definition</b> <a href="../../de/d92/opentelemetry__adapter_8h_source.html#l00555">opentelemetry_adapter.h:555</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_a70636d332f6e87d00b6c3fca35df35e1_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_a70636d332f6e87d00b6c3fca35df35e1_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_a70636d332f6e87d00b6c3fca35df35e1_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_a70636d332f6e87d00b6c3fca35df35e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,20,75,45"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a197ddc8594ddbb2ef9ac1e77d3d4834f" title="Create OpenTelemetry compatibility layer." alt="" coords="123,5,297,60"/>
<area shape="poly" title=" " alt="" coords="75,30,109,30,109,35,75,35"/>
</map>
</div>

</div>
</div>
<a id="aab4269a9005d7046025f96d0b3411e76" name="aab4269a9005d7046025f96d0b3411e76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab4269a9005d7046025f96d0b3411e76">&#9670;&#160;</a></span>TEST_F() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ExportPipelineIntegration&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 6: Export Pipeline Integration Trace and storage export verification </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00364">364</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  364</span>                                                      {</div>
<div class="line"><span class="lineno">  365</span>    <span class="comment">// 1. Setup OTEL adapter</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="keyword">auto</span> otel_adapter = <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a197ddc8594ddbb2ef9ac1e77d3d4834f">create_opentelemetry_compatibility_layer</a>(<span class="stringliteral">&quot;export_test&quot;</span>, <span class="stringliteral">&quot;1.0.0&quot;</span>);</div>
<div class="line"><span class="lineno">  367</span>    <span class="keyword">auto</span> init_result = otel_adapter-&gt;initialize();</div>
<div class="line"><span class="lineno">  368</span>    ASSERT_TRUE(init_result);</div>
<div class="line"><span class="lineno">  369</span>    </div>
<div class="line"><span class="lineno">  370</span>    <span class="comment">// 2. Create sample traces</span></div>
<div class="line"><span class="lineno">  371</span>    std::vector&lt;trace_span&gt; test_spans;</div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i) {</div>
<div class="line"><span class="lineno">  373</span>        trace_span span;</div>
<div class="line"><span class="lineno">  374</span>        span.trace_id = <span class="stringliteral">&quot;trace_&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno">  375</span>        span.span_id = <span class="stringliteral">&quot;span_&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno">  376</span>        span.operation_name = <span class="stringliteral">&quot;operation_&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno">  377</span>        span.start_time = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  378</span>        span.end_time = span.start_time + std::chrono::milliseconds(100);</div>
<div class="line"><span class="lineno">  379</span>        span.set_attribute(<span class="stringliteral">&quot;index&quot;</span>, std::to_string(i));</div>
<div class="line"><span class="lineno">  380</span>        test_spans.push_back(span);</div>
<div class="line"><span class="lineno">  381</span>    }</div>
<div class="line"><span class="lineno">  382</span>    </div>
<div class="line"><span class="lineno">  383</span>    <span class="comment">// 3. Export spans</span></div>
<div class="line"><span class="lineno">  384</span>    <span class="keyword">auto</span> export_result = otel_adapter-&gt;export_spans(test_spans);</div>
<div class="line"><span class="lineno">  385</span>    EXPECT_TRUE(export_result);</div>
<div class="line"><span class="lineno">  386</span>    </div>
<div class="line"><span class="lineno">  387</span>    <span class="comment">// 4. Verify export stats</span></div>
<div class="line"><span class="lineno">  388</span>    <span class="keyword">auto</span> stats = otel_adapter-&gt;get_stats();</div>
<div class="line"><span class="lineno">  389</span>    EXPECT_EQ(stats.pending_spans, test_spans.size());</div>
<div class="line"><span class="lineno">  390</span>    </div>
<div class="line"><span class="lineno">  391</span>    <span class="comment">// 5. Create sample metrics</span></div>
<div class="line"><span class="lineno">  392</span>    <a class="code hl_struct" href="../../df/d98/structkcenon_1_1monitoring_1_1monitoring__data.html">monitoring_data</a> test_data(<span class="stringliteral">&quot;export_test&quot;</span>);</div>
<div class="line"><span class="lineno">  393</span>    test_data.add_metric(<span class="stringliteral">&quot;cpu_usage&quot;</span>, 75.0);</div>
<div class="line"><span class="lineno">  394</span>    test_data.add_metric(<span class="stringliteral">&quot;memory_usage&quot;</span>, 60.0);</div>
<div class="line"><span class="lineno">  395</span>    test_data.add_metric(<span class="stringliteral">&quot;request_count&quot;</span>, 1000.0);</div>
<div class="line"><span class="lineno">  396</span>    </div>
<div class="line"><span class="lineno">  397</span>    <span class="comment">// 6. Export metrics</span></div>
<div class="line"><span class="lineno">  398</span>    <span class="keyword">auto</span> metrics_result = otel_adapter-&gt;export_metrics(test_data);</div>
<div class="line"><span class="lineno">  399</span>    EXPECT_TRUE(metrics_result);</div>
<div class="line"><span class="lineno">  400</span>    </div>
<div class="line"><span class="lineno">  401</span>    <span class="comment">// 7. Verify combined stats</span></div>
<div class="line"><span class="lineno">  402</span>    stats = otel_adapter-&gt;get_stats();</div>
<div class="line"><span class="lineno">  403</span>    EXPECT_GT(stats.pending_metrics, 0);</div>
<div class="line"><span class="lineno">  404</span>    </div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">// 8. Flush all pending data</span></div>
<div class="line"><span class="lineno">  406</span>    <span class="keyword">auto</span> flush_result = otel_adapter-&gt;flush();</div>
<div class="line"><span class="lineno">  407</span>    EXPECT_TRUE(flush_result);</div>
<div class="line"><span class="lineno">  408</span>    </div>
<div class="line"><span class="lineno">  409</span>    <span class="comment">// 9. Verify flush completed</span></div>
<div class="line"><span class="lineno">  410</span>    stats = otel_adapter-&gt;get_stats();</div>
<div class="line"><span class="lineno">  411</span>    EXPECT_EQ(stats.pending_spans, 0);</div>
<div class="line"><span class="lineno">  412</span>    EXPECT_EQ(stats.pending_metrics, 0);</div>
<div class="line"><span class="lineno">  413</span>}</div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1monitoring__data_html"><div class="ttname"><a href="../../df/d98/structkcenon_1_1monitoring_1_1monitoring__data.html">kcenon::monitoring::monitoring_data</a></div><div class="ttdoc">Container for monitoring metrics from a component.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/db2/monitorable__interface_8h_source.html#l00065">monitorable_interface.h:65</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_aab4269a9005d7046025f96d0b3411e76_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_aab4269a9005d7046025f96d0b3411e76_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_aab4269a9005d7046025f96d0b3411e76_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_aab4269a9005d7046025f96d0b3411e76_cgraph">
<area shape="rect" title=" " alt="" coords="5,60,75,85"/>
<area shape="rect" href="../../df/d98/structkcenon_1_1monitoring_1_1monitoring__data.html#ab6fd7ca7da26f84232646d9e7212c6e8" title="Add a numeric metric." alt="" coords="125,5,295,60"/>
<area shape="poly" title=" " alt="" coords="74,62,111,53,112,58,75,67"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a197ddc8594ddbb2ef9ac1e77d3d4834f" title="Create OpenTelemetry compatibility layer." alt="" coords="123,84,297,139"/>
<area shape="poly" title=" " alt="" coords="75,78,110,86,109,91,74,83"/>
</map>
</div>

</div>
</div>
<a id="a44e20b27be624999bd30ba9315acf094" name="a44e20b27be624999bd30ba9315acf094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44e20b27be624999bd30ba9315acf094">&#9670;&#160;</a></span>TEST_F() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FullSystemLoadTest&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 7: Full System Load Test High volume → All components → Performance verification </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00419">419</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  419</span>                                               {</div>
<div class="line"><span class="lineno">  420</span>    <span class="comment">// 1. Setup components</span></div>
<div class="line"><span class="lineno">  421</span>    <span class="keyword">auto</span> tracer = std::make_unique&lt;distributed_tracer&gt;(<span class="stringliteral">&quot;load_test&quot;</span>);</div>
<div class="line"><span class="lineno">  422</span>    <span class="keyword">auto</span> perf_monitor = performance_monitor::create();</div>
<div class="line"><span class="lineno">  423</span>    <span class="keyword">auto</span> <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a> = global_health_monitor::instance();</div>
<div class="line"><span class="lineno">  424</span>    </div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">// 2. Configure for high load</span></div>
<div class="line"><span class="lineno">  426</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_operations = 1000;</div>
<div class="line"><span class="lineno">  427</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> num_threads = 10;</div>
<div class="line"><span class="lineno">  428</span>    </div>
<div class="line"><span class="lineno">  429</span>    <span class="comment">// 3. Generate load</span></div>
<div class="line"><span class="lineno">  430</span>    <span class="keyword">auto</span> start_time = std::chrono::steady_clock::now();</div>
<div class="line"><span class="lineno">  431</span>    std::vector&lt;std::thread&gt; load_generators;</div>
<div class="line"><span class="lineno">  432</span>    std::atomic&lt;int&gt; total_operations{0};</div>
<div class="line"><span class="lineno">  433</span>    </div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; num_threads; ++t) {</div>
<div class="line"><span class="lineno">  435</span>        load_generators.emplace_back([&amp;tracer, &amp;total_operations, t, num_operations]() {</div>
<div class="line"><span class="lineno">  436</span>            std::random_device rd;</div>
<div class="line"><span class="lineno">  437</span>            std::mt19937 gen(rd());</div>
<div class="line"><span class="lineno">  438</span>            std::uniform_real_distribution&lt;&gt; dis(0.0, 100.0);</div>
<div class="line"><span class="lineno">  439</span>            </div>
<div class="line"><span class="lineno">  440</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_operations / num_threads; ++i) {</div>
<div class="line"><span class="lineno">  441</span>                <span class="comment">// Create span</span></div>
<div class="line"><span class="lineno">  442</span>                <span class="keyword">auto</span> span_result = tracer-&gt;start_span(<span class="stringliteral">&quot;load_test_&quot;</span> + std::to_string(t));</div>
<div class="line"><span class="lineno">  443</span>                <span class="keywordflow">if</span> (span_result) {</div>
<div class="line"><span class="lineno">  444</span>                    span_result.value().set_attribute(<span class="stringliteral">&quot;thread&quot;</span>, std::to_string(t));</div>
<div class="line"><span class="lineno">  445</span>                    span_result.value().set_attribute(<span class="stringliteral">&quot;value&quot;</span>, std::to_string(dis(gen)));</div>
<div class="line"><span class="lineno">  446</span>                    total_operations++;</div>
<div class="line"><span class="lineno">  447</span>                }</div>
<div class="line"><span class="lineno">  448</span>                </div>
<div class="line"><span class="lineno">  449</span>                <span class="comment">// Small delay to prevent overwhelming</span></div>
<div class="line"><span class="lineno">  450</span>                <span class="keywordflow">if</span> (i % 10 == 0) {</div>
<div class="line"><span class="lineno">  451</span>                    std::this_thread::sleep_for(std::chrono::microseconds(100));</div>
<div class="line"><span class="lineno">  452</span>                }</div>
<div class="line"><span class="lineno">  453</span>            }</div>
<div class="line"><span class="lineno">  454</span>        });</div>
<div class="line"><span class="lineno">  455</span>    }</div>
<div class="line"><span class="lineno">  456</span>    </div>
<div class="line"><span class="lineno">  457</span>    <span class="comment">// 4. Monitor while load is running</span></div>
<div class="line"><span class="lineno">  458</span>    std::thread monitor_thread([&amp;<a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>, &amp;start_time]() {</div>
<div class="line"><span class="lineno">  459</span>        <span class="keywordflow">while</span> (std::chrono::steady_clock::now() - start_time &lt; std::chrono::seconds(5)) {</div>
<div class="line"><span class="lineno">  460</span>            <span class="keyword">auto</span> health = <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>-&gt;<a class="code hl_function" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2">check_health</a>();</div>
<div class="line"><span class="lineno">  461</span>            <span class="comment">// System should remain healthy under load</span></div>
<div class="line"><span class="lineno">  462</span>            EXPECT_TRUE(health.is_operational());</div>
<div class="line"><span class="lineno">  463</span>            std::this_thread::sleep_for(std::chrono::milliseconds(100));</div>
<div class="line"><span class="lineno">  464</span>        }</div>
<div class="line"><span class="lineno">  465</span>    });</div>
<div class="line"><span class="lineno">  466</span>    </div>
<div class="line"><span class="lineno">  467</span>    <span class="comment">// 5. Wait for completion</span></div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : load_generators) {</div>
<div class="line"><span class="lineno">  469</span>        t.join();</div>
<div class="line"><span class="lineno">  470</span>    }</div>
<div class="line"><span class="lineno">  471</span>    monitor_thread.join();</div>
<div class="line"><span class="lineno">  472</span>    </div>
<div class="line"><span class="lineno">  473</span>    <span class="keyword">auto</span> end_time = std::chrono::steady_clock::now();</div>
<div class="line"><span class="lineno">  474</span>    <span class="keyword">auto</span> duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end_time - start_time);</div>
<div class="line"><span class="lineno">  475</span>    </div>
<div class="line"><span class="lineno">  476</span>    <span class="comment">// 6. Verify performance</span></div>
<div class="line"><span class="lineno">  477</span>    EXPECT_EQ(total_operations, num_operations);</div>
<div class="line"><span class="lineno">  478</span>    </div>
<div class="line"><span class="lineno">  479</span>    <span class="comment">// Calculate throughput</span></div>
<div class="line"><span class="lineno">  480</span>    <span class="keywordtype">double</span> throughput = (total_operations * 1000.0) / duration.count();</div>
<div class="line"><span class="lineno">  481</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Load test throughput: &quot;</span> &lt;&lt; throughput &lt;&lt; <span class="stringliteral">&quot; ops/sec&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  482</span>    </div>
<div class="line"><span class="lineno">  483</span>    <span class="comment">// Should achieve reasonable throughput</span></div>
<div class="line"><span class="lineno">  484</span>    EXPECT_GT(throughput, 100.0); <span class="comment">// At least 100 ops/sec</span></div>
<div class="line"><span class="lineno">  485</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1health__monitor_html"><div class="ttname"><a href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">kcenon::monitoring::health_monitor</a></div><div class="ttdoc">Health monitor with dependency management and statistics.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d34/health__monitor_8h_source.html#l00490">health_monitor.h:490</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1health__monitor_html_a47f049117bb9cf648317e3207d8864f2"><div class="ttname"><a href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2">kcenon::monitoring::health_monitor::check_health</a></div><div class="ttdeci">health_check_result check_health() const</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d34/health__monitor_8h_source.html#l00680">health_monitor.h:680</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_a44e20b27be624999bd30ba9315acf094_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_a44e20b27be624999bd30ba9315acf094_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_a44e20b27be624999bd30ba9315acf094_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_a44e20b27be624999bd30ba9315acf094_cgraph">
<area shape="rect" title=" " alt="" coords="5,20,75,45"/>
<area shape="rect" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2" title=" " alt="" coords="123,5,297,60"/>
<area shape="poly" title=" " alt="" coords="75,30,109,30,109,35,75,35"/>
</map>
</div>

</div>
</div>
<a id="a682e953c7e7637be353153a0ee81b9e1" name="a682e953c7e7637be353153a0ee81b9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682e953c7e7637be353153a0ee81b9e1">&#9670;&#160;</a></span>TEST_F() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HealthMonitoringWithRecovery&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 3: Health Monitoring with Fault Recovery Health checks → Failure detection → Recovery → Verification </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00179">179</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  179</span>                                                         {</div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// 1. Setup health monitoring</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="keyword">auto</span> <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a> = global_health_monitor::instance();</div>
<div class="line"><span class="lineno">  182</span>    <a class="code hl_class" href="../../d2/d74/classkcenon_1_1monitoring_1_1fault__tolerance__manager.html">fault_tolerance_manager</a> ft_manager;</div>
<div class="line"><span class="lineno">  183</span>    </div>
<div class="line"><span class="lineno">  184</span>    <span class="comment">// 2. Register health checks</span></div>
<div class="line"><span class="lineno">  185</span>    std::atomic&lt;bool&gt; service_healthy{<span class="keyword">true</span>};</div>
<div class="line"><span class="lineno">  186</span>    </div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>-&gt;<a class="code hl_function" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a2da7f9a85cdb991c756525cfb3dd10a9">register_check</a>(<span class="stringliteral">&quot;database&quot;</span>, [&amp;service_healthy]() {</div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (service_healthy) {</div>
<div class="line"><span class="lineno">  189</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a93c02337fda4400ef37f5b235d662d7c">health_check_result::healthy</a>(<span class="stringliteral">&quot;Database connection OK&quot;</span>);</div>
<div class="line"><span class="lineno">  190</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a1249cffaa23a80c2b864e0f7ee8c04f1">health_check_result::unhealthy</a>(<span class="stringliteral">&quot;Database connection failed&quot;</span>);</div>
<div class="line"><span class="lineno">  192</span>        }</div>
<div class="line"><span class="lineno">  193</span>    });</div>
<div class="line"><span class="lineno">  194</span>    </div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>-&gt;<a class="code hl_function" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a2da7f9a85cdb991c756525cfb3dd10a9">register_check</a>(<span class="stringliteral">&quot;cache&quot;</span>, []() {</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a93c02337fda4400ef37f5b235d662d7c">health_check_result::healthy</a>(<span class="stringliteral">&quot;Cache service running&quot;</span>);</div>
<div class="line"><span class="lineno">  197</span>    });</div>
<div class="line"><span class="lineno">  198</span>    </div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">// 3. Initial health check - should be healthy</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="keyword">auto</span> initial_health = <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>-&gt;<a class="code hl_function" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2">check_health</a>();</div>
<div class="line"><span class="lineno">  201</span>    EXPECT_TRUE(initial_health.is_healthy());</div>
<div class="line"><span class="lineno">  202</span>    </div>
<div class="line"><span class="lineno">  203</span>    <span class="comment">// 4. Simulate failure</span></div>
<div class="line"><span class="lineno">  204</span>    service_healthy = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  205</span>    </div>
<div class="line"><span class="lineno">  206</span>    <span class="comment">// 5. Setup retry policy for recovery</span></div>
<div class="line"><span class="lineno">  207</span>    <a class="code hl_class" href="../../d3/d0a/classkcenon_1_1monitoring_1_1retry__policy.html">retry_policy</a> policy;</div>
<div class="line"><span class="lineno">  208</span>    policy.max_attempts = 3;</div>
<div class="line"><span class="lineno">  209</span>    policy.initial_delay = std::chrono::milliseconds(10);</div>
<div class="line"><span class="lineno">  210</span>    policy.backoff_multiplier = 2.0;</div>
<div class="line"><span class="lineno">  211</span>    </div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">// 6. Attempt recovery with fault tolerance</span></div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordtype">int</span> recovery_attempts = 0;</div>
<div class="line"><span class="lineno">  214</span>    <span class="keyword">auto</span> recovery_result = ft_manager.execute_with_retry(</div>
<div class="line"><span class="lineno">  215</span>        [&amp;service_healthy, &amp;recovery_attempts]() -&gt; <a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#a6931ba7fb7341c1e6c5c408ee09e48ea">result_void</a> {</div>
<div class="line"><span class="lineno">  216</span>            recovery_attempts++;</div>
<div class="line"><span class="lineno">  217</span>            <span class="keywordflow">if</span> (recovery_attempts &gt;= 2) {</div>
<div class="line"><span class="lineno">  218</span>                service_healthy = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  219</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a5831822659b3edfa93f8cc4b75357478">make_void_success</a>();</div>
<div class="line"><span class="lineno">  220</span>            }</div>
<div class="line"><span class="lineno">  221</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a716b65495ab9dbb3905f63f7e70d8acf">make_result_void</a>(monitoring_error_code::operation_failed,</div>
<div class="line"><span class="lineno">  222</span>                                    <span class="stringliteral">&quot;Still recovering&quot;</span>);</div>
<div class="line"><span class="lineno">  223</span>        },</div>
<div class="line"><span class="lineno">  224</span>        policy</div>
<div class="line"><span class="lineno">  225</span>    );</div>
<div class="line"><span class="lineno">  226</span>    </div>
<div class="line"><span class="lineno">  227</span>    EXPECT_TRUE(recovery_result);</div>
<div class="line"><span class="lineno">  228</span>    EXPECT_GE(recovery_attempts, 2);</div>
<div class="line"><span class="lineno">  229</span>    </div>
<div class="line"><span class="lineno">  230</span>    <span class="comment">// 7. Verify health restored</span></div>
<div class="line"><span class="lineno">  231</span>    <span class="keyword">auto</span> final_health = <a class="code hl_class" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html">health_monitor</a>-&gt;<a class="code hl_function" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2">check_health</a>();</div>
<div class="line"><span class="lineno">  232</span>    EXPECT_TRUE(final_health.is_healthy());</div>
<div class="line"><span class="lineno">  233</span>}</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1health__monitor_html_a2da7f9a85cdb991c756525cfb3dd10a9"><div class="ttname"><a href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a2da7f9a85cdb991c756525cfb3dd10a9">kcenon::monitoring::health_monitor::register_check</a></div><div class="ttdeci">result&lt; bool &gt; register_check(const std::string &amp;name, std::shared_ptr&lt; health_check &gt; check)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d34/health__monitor_8h_source.html#l00496">health_monitor.h:496</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1health__check__result_html_a1249cffaa23a80c2b864e0f7ee8c04f1"><div class="ttname"><a href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a1249cffaa23a80c2b864e0f7ee8c04f1">kcenon::monitoring::health_check_result::unhealthy</a></div><div class="ttdeci">static health_check_result unhealthy(const std::string &amp;msg)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d6e/monitoring__core_8h_source.html#l00158">monitoring_core.h:158</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1health__check__result_html_a93c02337fda4400ef37f5b235d662d7c"><div class="ttname"><a href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a93c02337fda4400ef37f5b235d662d7c">kcenon::monitoring::health_check_result::healthy</a></div><div class="ttdeci">static health_check_result healthy(const std::string &amp;msg=&quot;OK&quot;)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d6e/monitoring__core_8h_source.html#l00149">monitoring_core.h:149</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_a682e953c7e7637be353153a0ee81b9e1_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_a682e953c7e7637be353153a0ee81b9e1_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_a682e953c7e7637be353153a0ee81b9e1_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_a682e953c7e7637be353153a0ee81b9e1_cgraph">
<area shape="rect" title=" " alt="" coords="5,203,75,228"/>
<area shape="rect" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a47f049117bb9cf648317e3207d8864f2" title=" " alt="" coords="151,5,326,60"/>
<area shape="poly" title=" " alt="" coords="43,201,68,139,91,102,121,69,137,58,140,62,124,73,95,105,73,141,48,204"/>
<area shape="rect" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a93c02337fda4400ef37f5b235d662d7c" title=" " alt="" coords="159,84,319,139"/>
<area shape="poly" title=" " alt="" coords="53,200,83,175,121,149,144,138,147,143,124,154,86,179,56,205"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a716b65495ab9dbb3905f63f7e70d8acf" title="Create a VoidResult with error." alt="" coords="165,163,313,203"/>
<area shape="poly" title=" " alt="" coords="75,207,150,195,151,200,75,212"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a5831822659b3edfa93f8cc4b75357478" title="Helper function to create successful VoidResult." alt="" coords="159,227,318,267"/>
<area shape="poly" title=" " alt="" coords="75,218,146,230,145,235,75,223"/>
<area shape="rect" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a2da7f9a85cdb991c756525cfb3dd10a9" title=" " alt="" coords="123,291,355,331"/>
<area shape="poly" title=" " alt="" coords="56,226,86,252,124,277,139,284,137,289,121,282,83,256,53,231"/>
<area shape="rect" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#a1249cffaa23a80c2b864e0f7ee8c04f1" title=" " alt="" coords="959,420,1119,475"/>
<area shape="poly" title=" " alt="" coords="48,227,74,283,96,315,124,341,173,372,225,397,279,419,334,437,448,462,563,476,674,480,778,477,869,470,945,461,945,466,870,475,778,482,674,485,563,481,448,468,333,442,277,424,223,402,171,376,121,345,92,318,69,286,43,229"/>
<area shape="rect" href="../../d5/d36/structkcenon_1_1monitoring_1_1error__info.html#a708459545c76e0e9c5d07ffa9b9e2785" title="Convert to common_system error_info." alt="" coords="403,154,619,194"/>
<area shape="poly" title=" " alt="" coords="313,178,389,176,389,181,313,183"/>
<area shape="rect" href="../../d8/d8e/classkcenon_1_1monitoring_1_1health__dependency__graph.html#a0aa111cd92f27ca091742c92be00a219" title=" " alt="" coords="432,219,589,273"/>
<area shape="poly" title=" " alt="" coords="322,289,418,265,419,271,323,294"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a07bdd48e145c9623f4b4443f98e4700c" title="Create a successful result." alt="" coords="715,251,863,291"/>
<area shape="poly" title=" " alt="" coords="355,301,618,282,701,276,701,281,619,287,355,306"/>
<area shape="rect" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#af3c6243491ecac6699400b76ee0d8d39" title=" " alt="" coords="423,349,598,389"/>
<area shape="poly" title=" " alt="" coords="335,329,411,345,410,350,334,334"/>
<area shape="poly" title=" " alt="" coords="590,250,701,261,701,266,589,256"/>
<area shape="poly" title=" " alt="" coords="571,346,618,328,641,314,666,301,700,289,702,294,668,306,644,319,620,332,573,351"/>
<area shape="rect" href="../../d8/d8e/classkcenon_1_1monitoring_1_1health__dependency__graph.html#aac97159ff26aadd9c2d8bffa38320499" title=" " alt="" coords="667,316,911,371"/>
<area shape="poly" title=" " alt="" coords="598,358,653,353,653,358,599,363"/>
<area shape="rect" href="../../d5/d42/classkcenon_1_1monitoring_1_1health__monitor.html#a892cb00ee88bfe5eee5b2e33bca7d923" title=" " alt="" coords="678,395,899,435"/>
<area shape="poly" title=" " alt="" coords="599,381,665,392,664,397,598,386"/>
<area shape="rect" href="../../dd/d56/structkcenon_1_1monitoring_1_1health__check__result.html#ac4411862126be50fd55a4600168d6aa9" title=" " alt="" coords="959,316,1119,371"/>
<area shape="poly" title=" " alt="" coords="911,341,945,341,945,346,911,346"/>
<area shape="poly" title=" " alt="" coords="879,368,912,381,976,411,974,416,910,386,877,373"/>
</map>
</div>

</div>
</div>
<a id="a592027d23ef36517b1967e304c0fbf01" name="a592027d23ef36517b1967e304c0fbf01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592027d23ef36517b1967e304c0fbf01">&#9670;&#160;</a></span>TEST_F() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PerformanceAdaptiveOptimization&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 4: Performance Monitoring with Adaptive Optimization Monitoring → Load detection → Adaptation → Verification </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00239">239</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>                                                            {</div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">// 1. Setup performance monitoring</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="keyword">auto</span> perf_monitor = performance_monitor::create();</div>
<div class="line"><span class="lineno">  242</span>    adaptive_monitor adapter;</div>
<div class="line"><span class="lineno">  243</span>    </div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">// 2. Configure adaptation strategy</span></div>
<div class="line"><span class="lineno">  245</span>    adaptive_config config;</div>
<div class="line"><span class="lineno">  246</span>    config.strategy = adaptation_strategy::balanced;</div>
<div class="line"><span class="lineno">  247</span>    config.cpu_threshold = 70.0;</div>
<div class="line"><span class="lineno">  248</span>    config.memory_threshold = 80.0;</div>
<div class="line"><span class="lineno">  249</span>    config.min_sampling_rate = 0.1;</div>
<div class="line"><span class="lineno">  250</span>    config.max_sampling_rate = 1.0;</div>
<div class="line"><span class="lineno">  251</span>    adapter.configure(config);</div>
<div class="line"><span class="lineno">  252</span>    </div>
<div class="line"><span class="lineno">  253</span>    <span class="comment">// 3. Simulate varying load</span></div>
<div class="line"><span class="lineno">  254</span>    std::vector&lt;double&gt; cpu_loads = {30, 45, 60, 75, 85, 90, 80, 65, 50, 35};</div>
<div class="line"><span class="lineno">  255</span>    </div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">for</span> (<span class="keywordtype">double</span> load : cpu_loads) {</div>
<div class="line"><span class="lineno">  257</span>        <span class="comment">// Simulate CPU load</span></div>
<div class="line"><span class="lineno">  258</span>        <span class="keyword">auto</span> cpu_metric = perf_monitor-&gt;measure_cpu_usage();</div>
<div class="line"><span class="lineno">  259</span>        </div>
<div class="line"><span class="lineno">  260</span>        <span class="comment">// Update adaptive monitor</span></div>
<div class="line"><span class="lineno">  261</span>        system_resource_info resources;</div>
<div class="line"><span class="lineno">  262</span>        resources.cpu_percent = load;</div>
<div class="line"><span class="lineno">  263</span>        resources.memory_percent = 60.0;</div>
<div class="line"><span class="lineno">  264</span>        adapter.update_system_load(resources);</div>
<div class="line"><span class="lineno">  265</span>        </div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">// Check adaptation</span></div>
<div class="line"><span class="lineno">  267</span>        <span class="keyword">auto</span> current_load = adapter.get_current_load();</div>
<div class="line"><span class="lineno">  268</span>        <span class="keyword">auto</span> sampling_rate = adapter.get_current_sampling_rate();</div>
<div class="line"><span class="lineno">  269</span>        </div>
<div class="line"><span class="lineno">  270</span>        <span class="comment">// Higher load should reduce sampling rate</span></div>
<div class="line"><span class="lineno">  271</span>        <span class="keywordflow">if</span> (load &gt; 80) {</div>
<div class="line"><span class="lineno">  272</span>            EXPECT_EQ(current_load, load_level::critical);</div>
<div class="line"><span class="lineno">  273</span>            EXPECT_LT(sampling_rate, 0.5);</div>
<div class="line"><span class="lineno">  274</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (load &gt; 60) {</div>
<div class="line"><span class="lineno">  275</span>            EXPECT_EQ(current_load, load_level::high);</div>
<div class="line"><span class="lineno">  276</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  277</span>            EXPECT_LE(current_load, load_level::medium);</div>
<div class="line"><span class="lineno">  278</span>        }</div>
<div class="line"><span class="lineno">  279</span>        </div>
<div class="line"><span class="lineno">  280</span>        <span class="comment">// Small delay to simulate real monitoring</span></div>
<div class="line"><span class="lineno">  281</span>        std::this_thread::sleep_for(std::chrono::milliseconds(10));</div>
<div class="line"><span class="lineno">  282</span>    }</div>
<div class="line"><span class="lineno">  283</span>    </div>
<div class="line"><span class="lineno">  284</span>    <span class="comment">// 4. Verify final state</span></div>
<div class="line"><span class="lineno">  285</span>    <span class="keyword">auto</span> final_load = adapter.get_current_load();</div>
<div class="line"><span class="lineno">  286</span>    EXPECT_LE(final_load, load_level::medium);</div>
<div class="line"><span class="lineno">  287</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a488edffbb82c503b4fd8a79772a608c0" name="a488edffbb82c503b4fd8a79772a608c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a488edffbb82c503b4fd8a79772a608c0">&#9670;&#160;</a></span>TEST_F() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d92/classIntegrationE2ETest.html">IntegrationE2ETest</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StorageBackendIntegration&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test 1: Storage Backend Integration Multiple backends → Concurrent operations → Data consistency </p>

<p class="definition">Definition at line <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html#l00061">61</a> of file <a class="el" href="../../d1/d9b/test__integration__e2e_8cpp_source.html">test_integration_e2e.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>                                                      {</div>
<div class="line"><span class="lineno">   62</span>    <span class="comment">// 1. Create multiple storage backends</span></div>
<div class="line"><span class="lineno">   63</span>    <a class="code hl_struct" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html">storage_config</a> file_config;</div>
<div class="line"><span class="lineno">   64</span>    file_config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a5470889434a9f2c7dab29555dcb3fe0e">type</a> = storage_backend_type::file_json;</div>
<div class="line"><span class="lineno">   65</span>    file_config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a6c3a4fa37326d146343083409e129b0b">path</a> = (test_dir_ / <span class="stringliteral">&quot;metrics.json&quot;</span>).<span class="keywordtype">string</span>();</div>
<div class="line"><span class="lineno">   66</span>    file_config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#ac188a463b7a7516db25844e62991a510">max_capacity</a> = 100;</div>
<div class="line"><span class="lineno">   67</span>    </div>
<div class="line"><span class="lineno">   68</span>    <a class="code hl_struct" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html">storage_config</a> memory_config;</div>
<div class="line"><span class="lineno">   69</span>    memory_config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a5470889434a9f2c7dab29555dcb3fe0e">type</a> = storage_backend_type::memory_buffer;</div>
<div class="line"><span class="lineno">   70</span>    memory_config.<a class="code hl_variable" href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#ac188a463b7a7516db25844e62991a510">max_capacity</a> = 100;</div>
<div class="line"><span class="lineno">   71</span>    </div>
<div class="line"><span class="lineno">   72</span>    <span class="keyword">auto</span> file_backend = std::make_unique&lt;file_storage_backend&gt;(file_config);</div>
<div class="line"><span class="lineno">   73</span>    <span class="keyword">auto</span> memory_backend = std::make_unique&lt;memory_storage_backend&gt;(memory_config);</div>
<div class="line"><span class="lineno">   74</span>    </div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">// 2. Create test data</span></div>
<div class="line"><span class="lineno">   76</span>    std::vector&lt;metrics_snapshot&gt; snapshots;</div>
<div class="line"><span class="lineno">   77</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 50; ++i) {</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_struct" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html">metrics_snapshot</a> snapshot;</div>
<div class="line"><span class="lineno">   79</span>        snapshot.<a class="code hl_function" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7">add_metric</a>(<span class="stringliteral">&quot;metric_&quot;</span> + std::to_string(i), i * 1.5);</div>
<div class="line"><span class="lineno">   80</span>        snapshots.push_back(snapshot);</div>
<div class="line"><span class="lineno">   81</span>    }</div>
<div class="line"><span class="lineno">   82</span>    </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">// 3. Store data in both backends concurrently</span></div>
<div class="line"><span class="lineno">   84</span>    std::vector&lt;std::thread&gt; threads;</div>
<div class="line"><span class="lineno">   85</span>    std::atomic&lt;int&gt; success_count{0};</div>
<div class="line"><span class="lineno">   86</span>    </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">// Thread for file backend</span></div>
<div class="line"><span class="lineno">   88</span>    threads.emplace_back([&amp;file_backend, &amp;snapshots, &amp;success_count]() {</div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; snapshot : snapshots) {</div>
<div class="line"><span class="lineno">   90</span>            <span class="keyword">auto</span> <a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#aa50eefd048f6e0abb82f1ec84a421dd0">result</a> = file_backend-&gt;store(snapshot);</div>
<div class="line"><span class="lineno">   91</span>            <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#aa50eefd048f6e0abb82f1ec84a421dd0">result</a>.is_ok()) success_count++;</div>
<div class="line"><span class="lineno">   92</span>        }</div>
<div class="line"><span class="lineno">   93</span>    });</div>
<div class="line"><span class="lineno">   94</span>    </div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">// Thread for memory backend</span></div>
<div class="line"><span class="lineno">   96</span>    threads.emplace_back([&amp;memory_backend, &amp;snapshots, &amp;success_count]() {</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; snapshot : snapshots) {</div>
<div class="line"><span class="lineno">   98</span>            <span class="keyword">auto</span> <a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#aa50eefd048f6e0abb82f1ec84a421dd0">result</a> = memory_backend-&gt;store(snapshot);</div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">if</span> (<a class="code hl_typedef" href="../../db/d50/namespacekcenon_1_1monitoring.html#aa50eefd048f6e0abb82f1ec84a421dd0">result</a>.is_ok()) success_count++;</div>
<div class="line"><span class="lineno">  100</span>        }</div>
<div class="line"><span class="lineno">  101</span>    });</div>
<div class="line"><span class="lineno">  102</span>    </div>
<div class="line"><span class="lineno">  103</span>    <span class="comment">// 4. Wait for completion</span></div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : threads) {</div>
<div class="line"><span class="lineno">  105</span>        t.join();</div>
<div class="line"><span class="lineno">  106</span>    }</div>
<div class="line"><span class="lineno">  107</span>    </div>
<div class="line"><span class="lineno">  108</span>    EXPECT_EQ(success_count, snapshots.size() * 2);</div>
<div class="line"><span class="lineno">  109</span>    </div>
<div class="line"><span class="lineno">  110</span>    <span class="comment">// 5. Verify data consistency</span></div>
<div class="line"><span class="lineno">  111</span>    EXPECT_EQ(file_backend-&gt;size(), 50);</div>
<div class="line"><span class="lineno">  112</span>    EXPECT_EQ(memory_backend-&gt;size(), 50);</div>
<div class="line"><span class="lineno">  113</span>    </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">// 6. Test retrieval</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="keyword">auto</span> file_result = file_backend-&gt;retrieve(0);</div>
<div class="line"><span class="lineno">  116</span>    <span class="keyword">auto</span> memory_result = memory_backend-&gt;retrieve(0);</div>
<div class="line"><span class="lineno">  117</span>    </div>
<div class="line"><span class="lineno">  118</span>    EXPECT_TRUE(file_result);</div>
<div class="line"><span class="lineno">  119</span>    EXPECT_TRUE(memory_result);</div>
<div class="line"><span class="lineno">  120</span>    </div>
<div class="line"><span class="lineno">  121</span>    <span class="comment">// 7. Test flush</span></div>
<div class="line"><span class="lineno">  122</span>    <span class="keyword">auto</span> flush_file = file_backend-&gt;flush();</div>
<div class="line"><span class="lineno">  123</span>    <span class="keyword">auto</span> flush_memory = memory_backend-&gt;flush();</div>
<div class="line"><span class="lineno">  124</span>    </div>
<div class="line"><span class="lineno">  125</span>    EXPECT_TRUE(flush_file);</div>
<div class="line"><span class="lineno">  126</span>    EXPECT_TRUE(flush_memory);</div>
<div class="line"><span class="lineno">  127</span>}</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_aa50eefd048f6e0abb82f1ec84a421dd0"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#aa50eefd048f6e0abb82f1ec84a421dd0">kcenon::monitoring::result</a></div><div class="ttdeci">common::Result&lt; T &gt; result</div><div class="ttdoc">Backward-compatible alias for common::Result&lt;T&gt;</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d7d/result__types_8h_source.html#l00114">result_types.h:114</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1storage__config_html_a6c3a4fa37326d146343083409e129b0b"><div class="ttname"><a href="../../da/d75/structkcenon_1_1monitoring_1_1storage__config.html#a6c3a4fa37326d146343083409e129b0b">kcenon::monitoring::storage_config::path</a></div><div class="ttdeci">std::string path</div><div class="ttdef"><b>Definition</b> <a href="../../db/d31/storage__backends_8h_source.html#l00077">storage_backends.h:77</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d9b/test__integration__e2e_8cpp_a488edffbb82c503b4fd8a79772a608c0_cgraph.png" border="0" usemap="#ad1/d9b/test__integration__e2e_8cpp_a488edffbb82c503b4fd8a79772a608c0_cgraph" alt=""/></div>
<map name="ad1/d9b/test__integration__e2e_8cpp_a488edffbb82c503b4fd8a79772a608c0_cgraph" id="ad1/d9b/test__integration__e2e_8cpp_a488edffbb82c503b4fd8a79772a608c0_cgraph">
<area shape="rect" title=" " alt="" coords="5,20,75,45"/>
<area shape="rect" href="../../dd/dd7/structkcenon_1_1monitoring_1_1metrics__snapshot.html#a91c4bb5a196e0ace7716f2d6c54eb1a7" title="Add a metric to the snapshot." alt="" coords="123,5,276,60"/>
<area shape="poly" title=" " alt="" coords="75,30,109,30,109,35,75,35"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 9 2026 00:42:00 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
