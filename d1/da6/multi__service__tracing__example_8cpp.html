<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: examples/multi_service_tracing_example.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">multi_service_tracing_example.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Demonstrates distributed tracing across multiple services.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d07/distributed__tracer_8h_source.html">kcenon/monitoring/tracing/distributed_tracer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for multi_service_tracing_example.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/df0/multi__service__tracing__example_8cpp__incl.png" border="0" usemap="#aexamples_2multi__service__tracing__example_8cpp" alt=""/></div>
<map name="aexamples_2multi__service__tracing__example_8cpp" id="aexamples_2multi__service__tracing__example_8cpp">
<area shape="rect" title="Demonstrates distributed tracing across multiple services." alt="" coords="237,5,416,45"/>
<area shape="rect" title=" " alt="" coords="5,101,85,126"/>
<area shape="poly" title=" " alt="" coords="259,48,98,96,90,99,88,94,97,91,257,43"/>
<area shape="rect" title=" " alt="" coords="109,101,187,126"/>
<area shape="poly" title=" " alt="" coords="289,48,185,97,183,92,286,43"/>
<area shape="rect" title=" " alt="" coords="211,101,269,126"/>
<area shape="poly" title=" " alt="" coords="309,48,264,92,260,89,306,44"/>
<area shape="rect" title=" " alt="" coords="293,101,360,126"/>
<area shape="poly" title=" " alt="" coords="329,46,329,87,324,87,324,46"/>
<area shape="rect" title=" " alt="" coords="384,101,448,126"/>
<area shape="poly" title=" " alt="" coords="348,44,396,89,392,93,345,48"/>
<area shape="rect" title=" " alt="" coords="472,101,547,126"/>
<area shape="poly" title=" " alt="" coords="368,43,474,92,472,97,366,48"/>
<area shape="rect" href="../../d0/d07/distributed__tracer_8h.html" title=" " alt="" coords="571,93,765,133"/>
<area shape="poly" title=" " alt="" coords="402,43,581,87,580,93,401,48"/>
<area shape="rect" title=" " alt="" coords="595,181,741,236"/>
<area shape="poly" title=" " alt="" coords="671,133,671,168,665,168,665,133"/>
</map>
</div>
</div>
<p><a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d3d/classApiGatewayService.html">ApiGatewayService</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulated API Gateway service.  <a href="../../d2/d3d/classApiGatewayService.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d38/classAuthService.html">AuthService</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulated Authentication service.  <a href="../../d6/d38/classAuthService.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dd9/classUserService.html">UserService</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulated User service.  <a href="../../d9/dd9/classUserService.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/df6/classCacheService.html">CacheService</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulated Cache service.  <a href="../../d4/df6/classCacheService.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad6c29edae4f675057313e903db6ab0d3" id="r_ad6c29edae4f675057313e903db6ab0d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3">display_span</a> (const trace_span &amp;span, int depth)</td></tr>
<tr class="memdesc:ad6c29edae4f675057313e903db6ab0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display single span.  <br /></td></tr>
<tr class="separator:ad6c29edae4f675057313e903db6ab0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a223fc7a06c4646a26f470c05b502080d" id="r_a223fc7a06c4646a26f470c05b502080d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d">display_children</a> (const std::vector&lt; trace_span &gt; &amp;spans, const std::string &amp;parent_id, int depth)</td></tr>
<tr class="memdesc:a223fc7a06c4646a26f470c05b502080d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display children recursively.  <br /></td></tr>
<tr class="separator:a223fc7a06c4646a26f470c05b502080d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bfc440d8eaf9f6bf5a89506b0d62849" id="r_a6bfc440d8eaf9f6bf5a89506b0d62849"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849">display_trace_tree</a> (const std::vector&lt; trace_span &gt; &amp;spans)</td></tr>
<tr class="memdesc:a6bfc440d8eaf9f6bf5a89506b0d62849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display trace tree structure.  <br /></td></tr>
<tr class="separator:a6bfc440d8eaf9f6bf5a89506b0d62849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5818410426f9afeebecb5b793215bc" id="r_a2b5818410426f9afeebecb5b793215bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc">simulate_multi_service_request</a> ()</td></tr>
<tr class="memdesc:a2b5818410426f9afeebecb5b793215bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulate complete multi-service request flow.  <br /></td></tr>
<tr class="separator:a2b5818410426f9afeebecb5b793215bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Demonstrates distributed tracing across multiple services. </p>
<p>This example shows how to:</p><ul>
<li>Simulate multi-service architecture</li>
<li>Propagate trace context between services</li>
<li>Correlate traces across service boundaries</li>
<li>Create parent-child span relationships</li>
<li>Propagate baggage for cross-cutting data</li>
<li>Visualize trace export patterns </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a223fc7a06c4646a26f470c05b502080d" name="a223fc7a06c4646a26f470c05b502080d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a223fc7a06c4646a26f470c05b502080d">&#9670;&#160;</a></span>display_children()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_children </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; trace_span &gt; &amp;&#160;</td>
          <td class="paramname"><em>spans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>parent_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display children recursively. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00374">374</a> of file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  376</span>                                {</div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; span : spans) {</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">if</span> (span.parent_span_id == parent_id) {</div>
<div class="line"><span class="lineno">  379</span>            <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3">display_span</a>(span, depth);</div>
<div class="line"><span class="lineno">  380</span>            <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d">display_children</a>(spans, span.span_id, depth + 1);</div>
<div class="line"><span class="lineno">  381</span>        }</div>
<div class="line"><span class="lineno">  382</span>    }</div>
<div class="line"><span class="lineno">  383</span>}</div>
<div class="ttc" id="amulti__service__tracing__example_8cpp_html_a223fc7a06c4646a26f470c05b502080d"><div class="ttname"><a href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d">display_children</a></div><div class="ttdeci">void display_children(const std::vector&lt; trace_span &gt; &amp;spans, const std::string &amp;parent_id, int depth)</div><div class="ttdoc">Display children recursively.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00374">multi_service_tracing_example.cpp:374</a></div></div>
<div class="ttc" id="amulti__service__tracing__example_8cpp_html_ad6c29edae4f675057313e903db6ab0d3"><div class="ttname"><a href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3">display_span</a></div><div class="ttdeci">void display_span(const trace_span &amp;span, int depth)</div><div class="ttdoc">Display single span.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00347">multi_service_tracing_example.cpp:347</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_cgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_cgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_cgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_cgraph">
<area shape="rect" title="Display children recursively." alt="" coords="5,29,133,55"/>
<area shape="poly" title=" " alt="" coords="42,31,36,21,39,11,50,5,69,3,92,6,102,15,98,19,90,11,69,8,52,10,43,15,41,20,46,28"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3" title="Display single span." alt="" coords="181,29,288,55"/>
<area shape="poly" title=" " alt="" coords="134,39,168,39,168,45,134,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_icgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_icgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_icgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a223fc7a06c4646a26f470c05b502080d_icgraph">
<area shape="rect" title="Display children recursively." alt="" coords="521,29,649,55"/>
<area shape="poly" title=" " alt="" coords="617,19,608,11,585,8,566,10,556,15,554,20,560,28,555,31,549,21,552,11,565,5,585,3,610,6,621,15"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849" title="Display trace tree structure." alt="" coords="331,29,473,55"/>
<area shape="poly" title=" " alt="" coords="508,45,474,45,474,39,508,39"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc" title="Simulate complete multi&#45;service request flow." alt="" coords="108,22,283,62"/>
<area shape="poly" title=" " alt="" coords="317,45,283,45,283,39,317,39"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,29,60,55"/>
<area shape="poly" title=" " alt="" coords="95,45,60,45,60,39,95,39"/>
</map>
</div>

</div>
</div>
<a id="ad6c29edae4f675057313e903db6ab0d3" name="ad6c29edae4f675057313e903db6ab0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6c29edae4f675057313e903db6ab0d3">&#9670;&#160;</a></span>display_span()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_span </td>
          <td>(</td>
          <td class="paramtype">const trace_span &amp;&#160;</td>
          <td class="paramname"><em>span</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display single span. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00347">347</a> of file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  347</span>                                                     {</div>
<div class="line"><span class="lineno">  348</span>    std::string indent(depth * 2, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">  349</span>    std::string prefix = depth == 0 ? <span class="stringliteral">&quot;┌─&quot;</span> : <span class="stringliteral">&quot;├─&quot;</span>;</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    std::cout &lt;&lt; indent &lt;&lt; prefix &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; span.service_name &lt;&lt; <span class="stringliteral">&quot;] &quot;</span></div>
<div class="line"><span class="lineno">  352</span>              &lt;&lt; span.operation_name &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  353</span>    std::cout &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;   Span ID: &quot;</span> &lt;&lt; span.span_id &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  354</span>    std::cout &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;   Duration: &quot;</span> &lt;&lt; span.duration.count() &lt;&lt; <span class="stringliteral">&quot;µs&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    <span class="keywordflow">if</span> (!span.tags.empty()) {</div>
<div class="line"><span class="lineno">  357</span>        std::cout &lt;&lt; indent &lt;&lt; <span class="stringliteral">&quot;   Tags:&quot;</span>;</div>
<div class="line"><span class="lineno">  358</span>        <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [key, value] : span.tags) {</div>
<div class="line"><span class="lineno">  360</span>            <span class="keywordflow">if</span> (count++ &lt; 3) {  <span class="comment">// Show first 3 tags</span></div>
<div class="line"><span class="lineno">  361</span>                std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; value;</div>
<div class="line"><span class="lineno">  362</span>            }</div>
<div class="line"><span class="lineno">  363</span>        }</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">if</span> (span.tags.size() &gt; 3) {</div>
<div class="line"><span class="lineno">  365</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; +&quot;</span> &lt;&lt; (span.tags.size() - 3) &lt;&lt; <span class="stringliteral">&quot; more&quot;</span>;</div>
<div class="line"><span class="lineno">  366</span>        }</div>
<div class="line"><span class="lineno">  367</span>        std::cout &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  368</span>    }</div>
<div class="line"><span class="lineno">  369</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_ad6c29edae4f675057313e903db6ab0d3_icgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_ad6c29edae4f675057313e903db6ab0d3_icgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_ad6c29edae4f675057313e903db6ab0d3_icgraph" id="ad1/da6/multi__service__tracing__example_8cpp_ad6c29edae4f675057313e903db6ab0d3_icgraph">
<area shape="rect" title="Display single span." alt="" coords="697,55,804,80"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d" title="Display children recursively." alt="" coords="521,29,649,55"/>
<area shape="poly" title=" " alt="" coords="683,60,649,54,650,49,684,54"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849" title="Display trace tree structure." alt="" coords="331,55,473,80"/>
<area shape="poly" title=" " alt="" coords="684,70,474,70,474,65,684,65"/>
<area shape="poly" title=" " alt="" coords="614,19,606,11,585,8,568,10,559,15,557,20,562,28,558,31,552,21,555,11,566,5,585,3,608,6,618,15"/>
<area shape="poly" title=" " alt="" coords="508,55,474,60,474,55,507,50"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc" title="Simulate complete multi&#45;service request flow." alt="" coords="108,47,283,87"/>
<area shape="poly" title=" " alt="" coords="317,70,283,70,283,65,317,65"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,55,60,80"/>
<area shape="poly" title=" " alt="" coords="95,70,60,70,60,65,95,65"/>
</map>
</div>

</div>
</div>
<a id="a6bfc440d8eaf9f6bf5a89506b0d62849" name="a6bfc440d8eaf9f6bf5a89506b0d62849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bfc440d8eaf9f6bf5a89506b0d62849">&#9670;&#160;</a></span>display_trace_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_trace_tree </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; trace_span &gt; &amp;&#160;</td>
          <td class="paramname"><em>spans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display trace tree structure. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00315">315</a> of file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  315</span>                                                            {</div>
<div class="line"><span class="lineno">  316</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Trace Tree Structure ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    <span class="comment">// Find root span</span></div>
<div class="line"><span class="lineno">  319</span>    <span class="keyword">const</span> trace_span* root = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; span : spans) {</div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">if</span> (span.parent_span_id.empty()) {</div>
<div class="line"><span class="lineno">  322</span>            root = &amp;span;</div>
<div class="line"><span class="lineno">  323</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  324</span>        }</div>
<div class="line"><span class="lineno">  325</span>    }</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> (!root) {</div>
<div class="line"><span class="lineno">  328</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;No root span found&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  330</span>    }</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\nTrace ID: &quot;</span> &lt;&lt; root-&gt;trace_id &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    <span class="comment">// Display root</span></div>
<div class="line"><span class="lineno">  335</span>    <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3">display_span</a>(*root, 0);</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>    <span class="comment">// Display children</span></div>
<div class="line"><span class="lineno">  338</span>    <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d">display_children</a>(spans, root-&gt;span_id, 1);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Total Spans: &quot;</span> &lt;&lt; spans.size() &lt;&lt; <span class="stringliteral">&quot; ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  341</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Total trace duration: &quot;</span> &lt;&lt; root-&gt;duration.count() &lt;&lt; <span class="stringliteral">&quot;µs&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  342</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_cgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_cgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_cgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_cgraph">
<area shape="rect" title="Display trace tree structure." alt="" coords="5,55,148,80"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d" title="Display children recursively." alt="" coords="196,29,324,55"/>
<area shape="poly" title=" " alt="" coords="148,55,182,50,183,55,149,60"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3" title="Display single span." alt="" coords="372,55,479,80"/>
<area shape="poly" title=" " alt="" coords="148,65,358,65,358,70,148,70"/>
<area shape="poly" title=" " alt="" coords="232,31,226,21,230,11,241,5,260,3,283,6,292,15,289,19,280,11,260,8,243,10,234,15,232,20,237,28"/>
<area shape="poly" title=" " alt="" coords="325,49,359,54,358,60,324,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_icgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_icgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_icgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a6bfc440d8eaf9f6bf5a89506b0d62849_icgraph">
<area shape="rect" title="Display trace tree structure." alt="" coords="331,13,473,38"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc" title="Simulate complete multi&#45;service request flow." alt="" coords="108,5,283,45"/>
<area shape="poly" title=" " alt="" coords="317,28,283,28,283,23,317,23"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,13,60,38"/>
<area shape="poly" title=" " alt="" coords="95,28,60,28,60,23,95,23"/>
</map>
</div>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00444">444</a> of file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  444</span>           {</div>
<div class="line"><span class="lineno">  445</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Multi-Service Distributed Tracing Example\n&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc">simulate_multi_service_request</a>();</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; std::string(60, <span class="charliteral">&#39;=&#39;</span>) &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  450</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\nKey Concepts Demonstrated:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  451</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;1. Trace context propagation across services&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  452</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;2. Parent-child span relationships&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  453</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;3. Baggage propagation for cross-cutting data&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  454</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;4. W3C Trace Context standard&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  455</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;5. Service-specific span tags and metadata&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  456</span> </div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  458</span>}</div>
<div class="ttc" id="amulti__service__tracing__example_8cpp_html_a2b5818410426f9afeebecb5b793215bc"><div class="ttname"><a href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc">simulate_multi_service_request</a></div><div class="ttdeci">void simulate_multi_service_request()</div><div class="ttdoc">Simulate complete multi-service request flow.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00388">multi_service_tracing_example.cpp:388</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph" id="ad1/da6/multi__service__tracing__example_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4_cgraph">
<area shape="rect" title=" " alt="" coords="5,174,60,199"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a2b5818410426f9afeebecb5b793215bc" title="Simulate complete multi&#45;service request flow." alt="" coords="108,167,283,207"/>
<area shape="poly" title=" " alt="" coords="60,184,94,184,94,189,60,189"/>
<area shape="rect" href="../../d4/df6/classCacheService.html#ac765ad329a699d1f1e04efc51c3318a3" title="Check cache for user data." alt="" coords="335,11,491,51"/>
<area shape="poly" title=" " alt="" coords="214,165,264,117,329,66,349,54,351,59,332,70,267,121,217,169"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a84be6633c3eb60e907e3cddba7b5bf60" title="Create trace context for propagation." alt="" coords="334,80,491,120"/>
<area shape="poly" title=" " alt="" coords="245,164,330,130,347,123,349,128,332,134,247,169"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849" title="Display trace tree structure." alt="" coords="341,145,484,170"/>
<area shape="poly" title=" " alt="" coords="282,172,327,166,328,171,283,178"/>
<area shape="rect" href="../../d9/dd9/classUserService.html#a1872aead8ca74b027f64d050173cb99e" title="Fetch user profile." alt="" coords="331,195,495,235"/>
<area shape="poly" title=" " alt="" coords="283,195,317,200,317,205,282,201"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a500bef2349c277d5949296f58acb06d1" title="Handle incoming HTTP request." alt="" coords="334,259,491,299"/>
<area shape="poly" title=" " alt="" coords="242,204,332,244,348,251,346,256,330,249,239,209"/>
<area shape="rect" href="../../d6/d38/classAuthService.html#a317a5a19edc3cd4f1f630a456dbfa80b" title="Verify user authentication." alt="" coords="340,355,485,395"/>
<area shape="poly" title=" " alt="" coords="219,205,332,309,376,344,372,348,329,313,216,209"/>
<area shape="rect" href="../../d4/df6/classCacheService.html#aa41019d6781f9e11bfc9add60f891cf7" title=" " alt="" coords="543,5,719,45"/>
<area shape="poly" title=" " alt="" coords="491,26,529,25,529,30,491,31"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d" title="Display children recursively." alt="" coords="567,94,695,119"/>
<area shape="poly" title=" " alt="" coords="468,142,562,120,563,125,469,147"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3" title="Display single span." alt="" coords="767,119,873,145"/>
<area shape="poly" title=" " alt="" coords="484,150,752,133,753,139,484,156"/>
<area shape="poly" title=" " alt="" coords="599,95,593,86,596,76,609,70,631,67,657,71,668,80,664,84,655,76,631,73,611,75,600,79,598,85,604,92"/>
<area shape="poly" title=" " alt="" coords="695,113,753,120,753,126,694,118"/>
<area shape="rect" href="../../d9/dd9/classUserService.html#a50c6d055c937d0d2a9db21988085cf60" title=" " alt="" coords="547,195,714,235"/>
<area shape="poly" title=" " alt="" coords="495,212,534,212,534,217,495,217"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a897ddc9730d7e190d969c0f75068b7fa" title=" " alt="" coords="552,259,709,299"/>
<area shape="poly" title=" " alt="" coords="492,276,538,276,538,281,492,281"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a17c9767c8539e7be96b2450eac5f966c" title=" " alt="" coords="552,323,709,363"/>
<area shape="poly" title=" " alt="" coords="482,296,550,316,548,321,481,301"/>
<area shape="rect" href="../../d6/d38/classAuthService.html#a403187118c01aaa409e26026ea183261" title=" " alt="" coords="547,387,714,427"/>
<area shape="poly" title=" " alt="" coords="486,383,534,390,533,395,485,388"/>
</map>
</div>

</div>
</div>
<a id="a2b5818410426f9afeebecb5b793215bc" name="a2b5818410426f9afeebecb5b793215bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5818410426f9afeebecb5b793215bc">&#9670;&#160;</a></span>simulate_multi_service_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void simulate_multi_service_request </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simulate complete multi-service request flow. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00388">388</a> of file <a class="el" href="../../d1/da6/multi__service__tracing__example_8cpp_source.html">multi_service_tracing_example.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  388</span>                                      {</div>
<div class="line"><span class="lineno">  389</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;=== Multi-Service Distributed Tracing Example ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>    std::vector&lt;trace_span&gt; collected_spans;</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    <span class="comment">// Step 1: API Gateway receives request</span></div>
<div class="line"><span class="lineno">  394</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n--- Step 1: API Gateway ---&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_class" href="../../d2/d3d/classApiGatewayService.html">ApiGatewayService</a> gateway;</div>
<div class="line"><span class="lineno">  396</span>    <span class="keyword">auto</span> gateway_span = gateway.<a class="code hl_function" href="../../d2/d3d/classApiGatewayService.html#a500bef2349c277d5949296f58acb06d1">handle_request</a>(<span class="stringliteral">&quot;/api/user/profile&quot;</span>, <span class="stringliteral">&quot;GET&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>    <span class="keyword">auto</span> gateway_ctx = gateway.<a class="code hl_function" href="../../d2/d3d/classApiGatewayService.html#a84be6633c3eb60e907e3cddba7b5bf60">create_context</a>(gateway_span);</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="comment">// Step 2: Check cache (parallel to auth)</span></div>
<div class="line"><span class="lineno">  400</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n--- Step 2: Cache Lookup ---&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_class" href="../../d4/df6/classCacheService.html">CacheService</a> cache;</div>
<div class="line"><span class="lineno">  402</span>    <span class="keyword">auto</span> cache_span = cache.<a class="code hl_function" href="../../d4/df6/classCacheService.html#ac765ad329a699d1f1e04efc51c3318a3">cache_lookup</a>(gateway_ctx, <span class="stringliteral">&quot;user:user-12345&quot;</span>);</div>
<div class="line"><span class="lineno">  403</span>    collected_spans.push_back(cache_span);</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">// Step 3: Authenticate request</span></div>
<div class="line"><span class="lineno">  406</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n--- Step 3: Authentication ---&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_class" href="../../d6/d38/classAuthService.html">AuthService</a> auth;</div>
<div class="line"><span class="lineno">  408</span>    <span class="keyword">auto</span> auth_span = auth.<a class="code hl_function" href="../../d6/d38/classAuthService.html#a317a5a19edc3cd4f1f630a456dbfa80b">verify_token</a>(gateway_ctx, <span class="stringliteral">&quot;eyJhbGc...&quot;</span>);</div>
<div class="line"><span class="lineno">  409</span>    collected_spans.push_back(auth_span);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    <span class="comment">// Create context for user service call</span></div>
<div class="line"><span class="lineno">  412</span>    trace_context user_ctx;</div>
<div class="line"><span class="lineno">  413</span>    user_ctx.trace_id = gateway_ctx.trace_id;</div>
<div class="line"><span class="lineno">  414</span>    user_ctx.span_id = gateway_span.span_id;</div>
<div class="line"><span class="lineno">  415</span>    user_ctx.baggage = gateway_ctx.baggage;</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    <span class="comment">// Step 4: Fetch user profile (after cache miss)</span></div>
<div class="line"><span class="lineno">  418</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n--- Step 4: User Profile Service ---&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_class" href="../../d9/dd9/classUserService.html">UserService</a> user_service;</div>
<div class="line"><span class="lineno">  420</span>    <span class="keyword">auto</span> user_span = user_service.<a class="code hl_function" href="../../d9/dd9/classUserService.html#a1872aead8ca74b027f64d050173cb99e">get_user_profile</a>(user_ctx, <span class="stringliteral">&quot;user-12345&quot;</span>);</div>
<div class="line"><span class="lineno">  421</span>    collected_spans.push_back(user_span);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    <span class="comment">// Complete gateway span</span></div>
<div class="line"><span class="lineno">  424</span>    std::this_thread::sleep_for(5ms);</div>
<div class="line"><span class="lineno">  425</span>    gateway_span.end_time = std::chrono::system_clock::now();</div>
<div class="line"><span class="lineno">  426</span>    gateway_span.calculate_duration();</div>
<div class="line"><span class="lineno">  427</span>    gateway_span.status = trace_span::status_code::ok;</div>
<div class="line"><span class="lineno">  428</span>    gateway_span.tags[<span class="stringliteral">&quot;http.status_code&quot;</span>] = <span class="stringliteral">&quot;200&quot;</span>;</div>
<div class="line"><span class="lineno">  429</span>    collected_spans.insert(collected_spans.begin(), gateway_span);</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    <span class="comment">// Display complete trace</span></div>
<div class="line"><span class="lineno">  432</span>    <a class="code hl_function" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849">display_trace_tree</a>(collected_spans);</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    <span class="comment">// Show baggage propagation</span></div>
<div class="line"><span class="lineno">  435</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Baggage Propagation ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  436</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;Baggage items propagated across all services:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [key, value] : gateway_span.baggage) {</div>
<div class="line"><span class="lineno">  438</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; value &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  439</span>    }</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Example completed successfully ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  442</span>}</div>
<div class="ttc" id="aclassApiGatewayService_html"><div class="ttname"><a href="../../d2/d3d/classApiGatewayService.html">ApiGatewayService</a></div><div class="ttdoc">Simulated API Gateway service.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00064">multi_service_tracing_example.cpp:64</a></div></div>
<div class="ttc" id="aclassApiGatewayService_html_a500bef2349c277d5949296f58acb06d1"><div class="ttname"><a href="../../d2/d3d/classApiGatewayService.html#a500bef2349c277d5949296f58acb06d1">ApiGatewayService::handle_request</a></div><div class="ttdeci">trace_span handle_request(const std::string &amp;endpoint, const std::string &amp;method)</div><div class="ttdoc">Handle incoming HTTP request.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00072">multi_service_tracing_example.cpp:72</a></div></div>
<div class="ttc" id="aclassApiGatewayService_html_a84be6633c3eb60e907e3cddba7b5bf60"><div class="ttname"><a href="../../d2/d3d/classApiGatewayService.html#a84be6633c3eb60e907e3cddba7b5bf60">ApiGatewayService::create_context</a></div><div class="ttdeci">trace_context create_context(const trace_span &amp;span)</div><div class="ttdoc">Create trace context for propagation.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00104">multi_service_tracing_example.cpp:104</a></div></div>
<div class="ttc" id="aclassAuthService_html"><div class="ttname"><a href="../../d6/d38/classAuthService.html">AuthService</a></div><div class="ttdoc">Simulated Authentication service.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00140">multi_service_tracing_example.cpp:140</a></div></div>
<div class="ttc" id="aclassAuthService_html_a317a5a19edc3cd4f1f630a456dbfa80b"><div class="ttname"><a href="../../d6/d38/classAuthService.html#a317a5a19edc3cd4f1f630a456dbfa80b">AuthService::verify_token</a></div><div class="ttdeci">trace_span verify_token(const trace_context &amp;parent_ctx, const std::string &amp;)</div><div class="ttdoc">Verify user authentication.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00148">multi_service_tracing_example.cpp:148</a></div></div>
<div class="ttc" id="aclassCacheService_html"><div class="ttname"><a href="../../d4/df6/classCacheService.html">CacheService</a></div><div class="ttdoc">Simulated Cache service.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00259">multi_service_tracing_example.cpp:259</a></div></div>
<div class="ttc" id="aclassCacheService_html_ac765ad329a699d1f1e04efc51c3318a3"><div class="ttname"><a href="../../d4/df6/classCacheService.html#ac765ad329a699d1f1e04efc51c3318a3">CacheService::cache_lookup</a></div><div class="ttdeci">trace_span cache_lookup(const trace_context &amp;parent_ctx, const std::string &amp;key)</div><div class="ttdoc">Check cache for user data.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00267">multi_service_tracing_example.cpp:267</a></div></div>
<div class="ttc" id="aclassUserService_html"><div class="ttname"><a href="../../d9/dd9/classUserService.html">UserService</a></div><div class="ttdoc">Simulated User service.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00199">multi_service_tracing_example.cpp:199</a></div></div>
<div class="ttc" id="aclassUserService_html_a1872aead8ca74b027f64d050173cb99e"><div class="ttname"><a href="../../d9/dd9/classUserService.html#a1872aead8ca74b027f64d050173cb99e">UserService::get_user_profile</a></div><div class="ttdeci">trace_span get_user_profile(const trace_context &amp;parent_ctx, const std::string &amp;user_id)</div><div class="ttdoc">Fetch user profile.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00207">multi_service_tracing_example.cpp:207</a></div></div>
<div class="ttc" id="amulti__service__tracing__example_8cpp_html_a6bfc440d8eaf9f6bf5a89506b0d62849"><div class="ttname"><a href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849">display_trace_tree</a></div><div class="ttdeci">void display_trace_tree(const std::vector&lt; trace_span &gt; &amp;spans)</div><div class="ttdoc">Display trace tree structure.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/da6/multi__service__tracing__example_8cpp_source.html#l00315">multi_service_tracing_example.cpp:315</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_cgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_cgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_cgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_cgraph">
<area shape="rect" title="Simulate complete multi&#45;service request flow." alt="" coords="5,167,180,207"/>
<area shape="rect" href="../../d4/df6/classCacheService.html#ac765ad329a699d1f1e04efc51c3318a3" title="Check cache for user data." alt="" coords="232,11,388,51"/>
<area shape="poly" title=" " alt="" coords="111,165,161,117,227,66,246,54,249,59,229,70,165,121,115,169"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a84be6633c3eb60e907e3cddba7b5bf60" title="Create trace context for propagation." alt="" coords="231,80,389,120"/>
<area shape="poly" title=" " alt="" coords="142,164,227,130,244,123,246,128,229,134,144,169"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a6bfc440d8eaf9f6bf5a89506b0d62849" title="Display trace tree structure." alt="" coords="239,145,381,170"/>
<area shape="poly" title=" " alt="" coords="180,172,225,166,225,171,180,178"/>
<area shape="rect" href="../../d9/dd9/classUserService.html#a1872aead8ca74b027f64d050173cb99e" title="Fetch user profile." alt="" coords="228,195,392,235"/>
<area shape="poly" title=" " alt="" coords="180,195,215,200,214,205,180,201"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a500bef2349c277d5949296f58acb06d1" title="Handle incoming HTTP request." alt="" coords="231,259,389,299"/>
<area shape="poly" title=" " alt="" coords="139,204,229,244,245,251,243,256,227,249,137,209"/>
<area shape="rect" href="../../d6/d38/classAuthService.html#a317a5a19edc3cd4f1f630a456dbfa80b" title="Verify user authentication." alt="" coords="237,355,383,395"/>
<area shape="poly" title=" " alt="" coords="117,205,230,309,273,344,270,348,226,313,113,209"/>
<area shape="rect" href="../../d4/df6/classCacheService.html#aa41019d6781f9e11bfc9add60f891cf7" title=" " alt="" coords="440,5,616,45"/>
<area shape="poly" title=" " alt="" coords="388,26,426,25,426,30,389,31"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#a223fc7a06c4646a26f470c05b502080d" title="Display children recursively." alt="" coords="464,94,592,119"/>
<area shape="poly" title=" " alt="" coords="365,142,459,120,460,125,366,147"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ad6c29edae4f675057313e903db6ab0d3" title="Display single span." alt="" coords="664,119,771,145"/>
<area shape="poly" title=" " alt="" coords="381,150,650,133,650,139,382,156"/>
<area shape="poly" title=" " alt="" coords="497,95,490,86,494,76,507,70,528,67,554,71,565,80,562,84,552,76,528,73,508,75,497,79,495,85,501,92"/>
<area shape="poly" title=" " alt="" coords="592,113,651,120,650,126,592,118"/>
<area shape="rect" href="../../d9/dd9/classUserService.html#a50c6d055c937d0d2a9db21988085cf60" title=" " alt="" coords="445,195,611,235"/>
<area shape="poly" title=" " alt="" coords="392,212,431,212,431,217,392,217"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a897ddc9730d7e190d969c0f75068b7fa" title=" " alt="" coords="449,259,607,299"/>
<area shape="poly" title=" " alt="" coords="389,276,436,276,436,281,389,281"/>
<area shape="rect" href="../../d2/d3d/classApiGatewayService.html#a17c9767c8539e7be96b2450eac5f966c" title=" " alt="" coords="449,323,607,363"/>
<area shape="poly" title=" " alt="" coords="380,296,447,316,446,321,378,301"/>
<area shape="rect" href="../../d6/d38/classAuthService.html#a403187118c01aaa409e26026ea183261" title=" " alt="" coords="445,387,611,427"/>
<area shape="poly" title=" " alt="" coords="383,383,431,390,431,395,383,388"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_icgraph.png" border="0" usemap="#ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_icgraph" alt=""/></div>
<map name="ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_icgraph" id="ad1/da6/multi__service__tracing__example_8cpp_a2b5818410426f9afeebecb5b793215bc_icgraph">
<area shape="rect" title="Simulate complete multi&#45;service request flow." alt="" coords="108,5,283,45"/>
<area shape="rect" href="../../d1/da6/multi__service__tracing__example_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="5,13,60,38"/>
<area shape="poly" title=" " alt="" coords="95,28,60,28,60,23,95,23"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 1 2026 01:41:16 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
