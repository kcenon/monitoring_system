<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monitoring System: kcenon::monitoring::metric_storage Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Monitoring System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/d03/namespacekcenon.html">kcenon</a></li><li class="navelem"><a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html">monitoring</a></li><li class="navelem"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d7/d93/classkcenon_1_1monitoring_1_1metric__storage-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">kcenon::monitoring::metric_storage Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Thread-safe metric storage with ring buffer buffering.  
 <a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for kcenon::monitoring::metric_storage:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d3d/classkcenon_1_1monitoring_1_1metric__storage__coll__graph.png" border="0" usemap="#akcenon_1_1monitoring_1_1metric__storage_coll__map" alt="Collaboration graph"/></div>
<map name="akcenon_1_1monitoring_1_1metric__storage_coll__map" id="akcenon_1_1monitoring_1_1metric__storage_coll__map">
<area shape="rect" title="Thread&#45;safe metric storage with ring buffer buffering." alt="" coords="727,1403,912,1803"/>
<area shape="rect" title=" " alt="" coords="5,1217,140,1283"/>
<area shape="poly" title=" " alt="" coords="97,1281,122,1311,153,1338,222,1382,295,1421,371,1457,446,1488,590,1538,711,1573,710,1578,589,1544,444,1493,368,1462,293,1426,219,1386,150,1342,118,1315,93,1285"/>
<area shape="rect" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html" title="Configuration for metric storage." alt="" coords="164,1160,397,1340"/>
<area shape="poly" title=" " alt="" coords="399,1330,411,1338,714,1532,711,1537,409,1342,396,1334"/>
<area shape="rect" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html" title="Statistics for metric storage performance." alt="" coords="422,1210,598,1290"/>
<area shape="poly" title=" " alt="" coords="546,1288,718,1482,714,1486,542,1292"/>
<area shape="rect" title=" " alt="" coords="433,966,587,1031"/>
<area shape="poly" title=" " alt="" coords="513,1031,513,1193,507,1193,507,1031"/>
<area shape="rect" title=" " alt="" coords="622,1203,822,1297"/>
<area shape="poly" title=" " alt="" coords="737,1297,762,1386,757,1388,732,1298"/>
<area shape="rect" title=" " alt="" coords="846,1195,1070,1305"/>
<area shape="poly" title=" " alt="" coords="939,1306,907,1388,902,1386,934,1304"/>
<area shape="rect" title=" " alt="" coords="931,295,1009,361"/>
<area shape="poly" title=" " alt="" coords="972,361,962,1179,956,1179,967,361"/>
<area shape="rect" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html" title="Thread&#45;safe time series data storage." alt="" coords="685,471,842,831"/>
<area shape="poly" title=" " alt="" coords="945,363,894,410,872,421,863,426,853,434,835,458,831,455,849,430,860,421,870,416,891,406,941,359"/>
<area shape="rect" title=" " alt="" coords="1022,855,1193,935"/>
<area shape="poly" title=" " alt="" coords="980,360,1097,838,1091,839,975,361"/>
<area shape="rect" title=" " alt="" coords="905,55,1035,135"/>
<area shape="poly" title=" " alt="" coords="973,149,973,295,967,295,967,149"/>
<area shape="rect" title=" " alt="" coords="705,959,897,1039"/>
<area shape="poly" title=" " alt="" coords="822,1038,876,1135,908,1180,903,1183,872,1137,817,1040"/>
<area shape="poly" title=" " alt="" coords="785,830,797,942,792,942,780,831"/>
<area shape="rect" title=" " alt="" coords="396,295,480,361"/>
<area shape="poly" title=" " alt="" coords="460,359,495,406,584,497,673,575,670,579,580,500,491,410,455,362"/>
<area shape="rect" title=" " alt="" coords="505,281,675,375"/>
<area shape="poly" title=" " alt="" coords="617,374,679,488,675,491,613,377"/>
<area shape="rect" href="../../da/df4/structkcenon_1_1monitoring_1_1time__point__data.html" title="Single data point in time series." alt="" coords="517,5,663,185"/>
<area shape="poly" title=" " alt="" coords="593,186,593,264,587,264,587,186"/>
<area shape="rect" href="../../d3/d52/structkcenon_1_1monitoring_1_1time__series__config.html" title="Configuration for time series storage." alt="" coords="700,248,880,408"/>
<area shape="poly" title=" " alt="" coords="771,408,767,432,765,454,760,454,762,432,766,408"/>
<area shape="poly" title=" " alt="" coords="1116,934,1124,1012,1126,1115,1123,1172,1116,1229,1103,1286,1084,1341,1054,1397,1015,1448,971,1493,927,1531,923,1527,968,1489,1011,1444,1050,1394,1080,1339,1098,1285,1110,1228,1118,1171,1121,1115,1118,1012,1111,935"/>
<area shape="rect" title=" " alt="" coords="1145,1217,1291,1283"/>
<area shape="poly" title=" " alt="" coords="1201,1284,1169,1332,1128,1381,1080,1425,1028,1467,927,1539,924,1534,1025,1463,1076,1421,1124,1377,1165,1328,1197,1281"/>
<area shape="rect" title=" " alt="" coords="1315,1217,1399,1283"/>
<area shape="poly" title=" " alt="" coords="1345,1284,1328,1314,1305,1342,1262,1380,1215,1415,1115,1477,1016,1527,929,1565,926,1560,1014,1522,1112,1473,1212,1411,1258,1376,1301,1338,1324,1311,1341,1282"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4f92dfb6d1405eb1565b28e6a1cb9b9f" id="r_a4f92dfb6d1405eb1565b28e6a1cb9b9f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a4f92dfb6d1405eb1565b28e6a1cb9b9f">metric_storage</a> (const <a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a> &amp;config={})</td></tr>
<tr class="memdesc:a4f92dfb6d1405eb1565b28e6a1cb9b9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor with configuration.  <br /></td></tr>
<tr class="separator:a4f92dfb6d1405eb1565b28e6a1cb9b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd3bcd4bcd3b63ffdb60e3256efac1f" id="r_adcd3bcd4bcd3b63ffdb60e3256efac1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#adcd3bcd4bcd3b63ffdb60e3256efac1f">~metric_storage</a> ()</td></tr>
<tr class="memdesc:adcd3bcd4bcd3b63ffdb60e3256efac1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <br /></td></tr>
<tr class="separator:adcd3bcd4bcd3b63ffdb60e3256efac1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b8727f24d49b7831f7e3935fd9cce58" id="r_a3b8727f24d49b7831f7e3935fd9cce58"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3b8727f24d49b7831f7e3935fd9cce58">metric_storage</a> (const <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp;)=delete</td></tr>
<tr class="separator:a3b8727f24d49b7831f7e3935fd9cce58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac913d5534aeb66faefe3c135ec824bd1" id="r_ac913d5534aeb66faefe3c135ec824bd1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac913d5534aeb66faefe3c135ec824bd1">operator=</a> (const <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp;)=delete</td></tr>
<tr class="separator:ac913d5534aeb66faefe3c135ec824bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13cf48aad601ee1819a1247f6efe1d76" id="r_a13cf48aad601ee1819a1247f6efe1d76"><td class="memItemLeft" align="right" valign="top">common::VoidResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a13cf48aad601ee1819a1247f6efe1d76">store_metric</a> (const std::string &amp;name, double value, <a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727">metric_type</a> type=<a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a>)</td></tr>
<tr class="memdesc:a13cf48aad601ee1819a1247f6efe1d76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a single metric value.  <br /></td></tr>
<tr class="separator:a13cf48aad601ee1819a1247f6efe1d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3295fc1a2ba674fc613206a0e57a8c7c" id="r_a3295fc1a2ba674fc613206a0e57a8c7c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3295fc1a2ba674fc613206a0e57a8c7c">store_metrics_batch</a> (const <a class="el" href="../../d2/d88/structkcenon_1_1monitoring_1_1metric__batch.html">metric_batch</a> &amp;batch)</td></tr>
<tr class="memdesc:a3295fc1a2ba674fc613206a0e57a8c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a batch of metrics.  <br /></td></tr>
<tr class="separator:a3295fc1a2ba674fc613206a0e57a8c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3209ae0b783c7d1bb89e501c5ea2304c" id="r_a3209ae0b783c7d1bb89e501c5ea2304c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3209ae0b783c7d1bb89e501c5ea2304c">flush</a> ()</td></tr>
<tr class="memdesc:a3209ae0b783c7d1bb89e501c5ea2304c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush buffered metrics to time series.  <br /></td></tr>
<tr class="separator:a3209ae0b783c7d1bb89e501c5ea2304c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ca40b9b91eabee43b14fa3b2d94c9b" id="r_a63ca40b9b91eabee43b14fa3b2d94c9b"><td class="memItemLeft" align="right" valign="top">common::Result&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a63ca40b9b91eabee43b14fa3b2d94c9b">get_latest_value</a> (const std::string &amp;name) const</td></tr>
<tr class="memdesc:a63ca40b9b91eabee43b14fa3b2d94c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the latest value for a metric.  <br /></td></tr>
<tr class="separator:a63ca40b9b91eabee43b14fa3b2d94c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294713de0db37a38181a7fc2d254a121" id="r_a294713de0db37a38181a7fc2d254a121"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a294713de0db37a38181a7fc2d254a121">get_metric_names</a> () const</td></tr>
<tr class="memdesc:a294713de0db37a38181a7fc2d254a121"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all metric names.  <br /></td></tr>
<tr class="separator:a294713de0db37a38181a7fc2d254a121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5536cdb4d83ea6dee8173f687af2659b" id="r_a5536cdb4d83ea6dee8173f687af2659b"><td class="memItemLeft" align="right" valign="top">common::Result&lt; <a class="el" href="../../d2/d1f/structkcenon_1_1monitoring_1_1aggregation__result.html">aggregation_result</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a5536cdb4d83ea6dee8173f687af2659b">query_metric</a> (const std::string &amp;name, const <a class="el" href="../../d2/dff/structkcenon_1_1monitoring_1_1time__series__query.html">time_series_query</a> &amp;query) const</td></tr>
<tr class="memdesc:a5536cdb4d83ea6dee8173f687af2659b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query metric data.  <br /></td></tr>
<tr class="separator:a5536cdb4d83ea6dee8173f687af2659b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c9d7330c4b45ef29edc10fe5403a6b2" id="r_a5c9d7330c4b45ef29edc10fe5403a6b2"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html">metric_storage_stats</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a5c9d7330c4b45ef29edc10fe5403a6b2">get_stats</a> () const noexcept</td></tr>
<tr class="memdesc:a5c9d7330c4b45ef29edc10fe5403a6b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get storage statistics.  <br /></td></tr>
<tr class="separator:a5c9d7330c4b45ef29edc10fe5403a6b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec0b3307eff8e94d2645f6d7e704104" id="r_aaec0b3307eff8e94d2645f6d7e704104"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aaec0b3307eff8e94d2645f6d7e704104">get_config</a> () const noexcept</td></tr>
<tr class="memdesc:aaec0b3307eff8e94d2645f6d7e704104"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get configuration.  <br /></td></tr>
<tr class="separator:aaec0b3307eff8e94d2645f6d7e704104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87df67e75c9ce7a03dd958b7458ef1bb" id="r_a87df67e75c9ce7a03dd958b7458ef1bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a87df67e75c9ce7a03dd958b7458ef1bb">clear</a> ()</td></tr>
<tr class="memdesc:a87df67e75c9ce7a03dd958b7458ef1bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all stored metrics.  <br /></td></tr>
<tr class="separator:a87df67e75c9ce7a03dd958b7458ef1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1058dd0c1eeaa236b7832ba4ee627f22" id="r_a1058dd0c1eeaa236b7832ba4ee627f22"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a1058dd0c1eeaa236b7832ba4ee627f22">series_count</a> () const</td></tr>
<tr class="memdesc:a1058dd0c1eeaa236b7832ba4ee627f22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of active metric series.  <br /></td></tr>
<tr class="separator:a1058dd0c1eeaa236b7832ba4ee627f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bbe800dbd2449a2a9aca89d63c3624" id="r_a40bbe800dbd2449a2a9aca89d63c3624"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a40bbe800dbd2449a2a9aca89d63c3624">memory_footprint</a> () const</td></tr>
<tr class="memdesc:a40bbe800dbd2449a2a9aca89d63c3624"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get memory footprint estimate.  <br /></td></tr>
<tr class="separator:a40bbe800dbd2449a2a9aca89d63c3624"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a01dcd33f327314464ec5e016ec6a2b1d" id="r_a01dcd33f327314464ec5e016ec6a2b1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a01dcd33f327314464ec5e016ec6a2b1d">background_processor</a> ()</td></tr>
<tr class="memdesc:a01dcd33f327314464ec5e016ec6a2b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Background processing loop.  <br /></td></tr>
<tr class="separator:a01dcd33f327314464ec5e016ec6a2b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff8102487ae4d5809f01e5dc61c9916" id="r_a3ff8102487ae4d5809f01e5dc61c9916"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html">time_series</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3ff8102487ae4d5809f01e5dc61c9916">get_or_create_series</a> (const std::string &amp;name)</td></tr>
<tr class="memdesc:a3ff8102487ae4d5809f01e5dc61c9916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get or create time series for a metric.  <br /></td></tr>
<tr class="separator:a3ff8102487ae4d5809f01e5dc61c9916"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac43714e09db55d65b8fe62528556928d" id="r_ac43714e09db55d65b8fe62528556928d"><td class="memItemLeft" align="right" valign="top">std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a></td></tr>
<tr class="separator:ac43714e09db55d65b8fe62528556928d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3faebb98e61204944474180cf74e1bff" id="r_a3faebb98e61204944474180cf74e1bff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a></td></tr>
<tr class="separator:a3faebb98e61204944474180cf74e1bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f11820be37aa662812ad7f4da3961de" id="r_a2f11820be37aa662812ad7f4da3961de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html">metric_storage_stats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a></td></tr>
<tr class="separator:a2f11820be37aa662812ad7f4da3961de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa81e2e4167f7b02ff832bf16307bcccd" id="r_aa81e2e4167f7b02ff832bf16307bcccd"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; ring_buffer&lt; <a class="el" href="../../d0/d41/structkcenon_1_1monitoring_1_1compact__metric__value.html">compact_metric_value</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a></td></tr>
<tr class="separator:aa81e2e4167f7b02ff832bf16307bcccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fcf87e098ffe44e01451bf43c5de2ee" id="r_a8fcf87e098ffe44e01451bf43c5de2ee"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, std::unique_ptr&lt; <a class="el" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html">time_series</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a></td></tr>
<tr class="separator:a8fcf87e098ffe44e01451bf43c5de2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571c377fdfa7f0544ae1ab4af4193883" id="r_a571c377fdfa7f0544ae1ab4af4193883"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; uint32_t, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a></td></tr>
<tr class="separator:a571c377fdfa7f0544ae1ab4af4193883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5180e7aa0c50f6b000c43cadcdcecc0" id="r_aa5180e7aa0c50f6b000c43cadcdcecc0"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a> {false}</td></tr>
<tr class="separator:aa5180e7aa0c50f6b000c43cadcdcecc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac193778277912528f3dc60b95b0d2d91" id="r_ac193778277912528f3dc60b95b0d2d91"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac193778277912528f3dc60b95b0d2d91">background_thread_</a></td></tr>
<tr class="separator:ac193778277912528f3dc60b95b0d2d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Thread-safe metric storage with ring buffer buffering. </p>
<p>Provides efficient metric storage using ring buffers for incoming data and time series for historical queries. Supports background processing for automatic flushing. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00097">97</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4f92dfb6d1405eb1565b28e6a1cb9b9f" name="a4f92dfb6d1405eb1565b28e6a1cb9b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f92dfb6d1405eb1565b28e6a1cb9b9f">&#9670;&#160;</a></span>metric_storage() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kcenon::monitoring::metric_storage::metric_storage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor with configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00166">166</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  166</span>                                                                  {})</div>
<div class="line"><span class="lineno">  167</span>        : <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>(config) {</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>        <span class="keyword">auto</span> validation = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_function" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#af15c4dbfa5b67451720dbf85cb788556">validate</a>();</div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordflow">if</span> (validation.is_err()) {</div>
<div class="line"><span class="lineno">  171</span>            <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Invalid metric storage configuration: &quot;</span> +</div>
<div class="line"><span class="lineno">  172</span>                                       validation.error().message);</div>
<div class="line"><span class="lineno">  173</span>        }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>        <span class="comment">// Initialize ring buffer</span></div>
<div class="line"><span class="lineno">  176</span>        ring_buffer_config rb_config;</div>
<div class="line"><span class="lineno">  177</span>        rb_config.capacity = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#ae062270c40cade358422ff50539c32ac">ring_buffer_capacity</a>;</div>
<div class="line"><span class="lineno">  178</span>        rb_config.overwrite_old = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  179</span>        rb_config.batch_size = (std::min)(rb_config.capacity / 2, <span class="keywordtype">size_t</span>(64));</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">if</span> (rb_config.batch_size == 0) rb_config.batch_size = 1;</div>
<div class="line"><span class="lineno">  181</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a> = std::make_unique&lt;ring_buffer&lt;compact_metric_value&gt;&gt;(rb_config);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="comment">// Start background processing if enabled</span></div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a9d50af06c0120435552b7dbec8f4d23f">enable_background_processing</a>) {</div>
<div class="line"><span class="lineno">  185</span>            <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a>.store(<span class="keyword">true</span>, std::memory_order_release);</div>
<div class="line"><span class="lineno">  186</span>            <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac193778277912528f3dc60b95b0d2d91">background_thread_</a> = std::thread(&amp;<a class="code hl_function" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a01dcd33f327314464ec5e016ec6a2b1d">metric_storage::background_processor</a>, <span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  187</span>        }</div>
<div class="line"><span class="lineno">  188</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a01dcd33f327314464ec5e016ec6a2b1d"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a01dcd33f327314464ec5e016ec6a2b1d">kcenon::monitoring::metric_storage::background_processor</a></div><div class="ttdeci">void background_processor()</div><div class="ttdoc">Background processing loop.</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00119">metric_storage.h:119</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a3faebb98e61204944474180cf74e1bff"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">kcenon::monitoring::metric_storage::config_</a></div><div class="ttdeci">metric_storage_config config_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00100">metric_storage.h:100</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_aa5180e7aa0c50f6b000c43cadcdcecc0"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">kcenon::monitoring::metric_storage::running_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; running_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00113">metric_storage.h:113</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_aa81e2e4167f7b02ff832bf16307bcccd"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">kcenon::monitoring::metric_storage::incoming_buffer_</a></div><div class="ttdeci">std::unique_ptr&lt; ring_buffer&lt; compact_metric_value &gt; &gt; incoming_buffer_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00104">metric_storage.h:104</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_ac193778277912528f3dc60b95b0d2d91"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac193778277912528f3dc60b95b0d2d91">kcenon::monitoring::metric_storage::background_thread_</a></div><div class="ttdeci">std::thread background_thread_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00114">metric_storage.h:114</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_a9d50af06c0120435552b7dbec8f4d23f"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a9d50af06c0120435552b7dbec8f4d23f">kcenon::monitoring::metric_storage_config::enable_background_processing</a></div><div class="ttdeci">bool enable_background_processing</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00041">metric_storage.h:41</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_ae062270c40cade358422ff50539c32ac"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#ae062270c40cade358422ff50539c32ac">kcenon::monitoring::metric_storage_config::ring_buffer_capacity</a></div><div class="ttdeci">size_t ring_buffer_capacity</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00039">metric_storage.h:39</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_af15c4dbfa5b67451720dbf85cb788556"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#af15c4dbfa5b67451720dbf85cb788556">kcenon::monitoring::metric_storage_config::validate</a></div><div class="ttdeci">common::VoidResult validate() const</div><div class="ttdoc">Validate configuration.</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00049">metric_storage.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adcd3bcd4bcd3b63ffdb60e3256efac1f" name="adcd3bcd4bcd3b63ffdb60e3256efac1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd3bcd4bcd3b63ffdb60e3256efac1f">&#9670;&#160;</a></span>~metric_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kcenon::monitoring::metric_storage::~metric_storage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00193">193</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  193</span>                      {</div>
<div class="line"><span class="lineno">  194</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a>.load(std::memory_order_acquire)) {</div>
<div class="line"><span class="lineno">  195</span>            <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a>.store(<span class="keyword">false</span>, std::memory_order_release);</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac193778277912528f3dc60b95b0d2d91">background_thread_</a>.joinable()) {</div>
<div class="line"><span class="lineno">  197</span>                <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac193778277912528f3dc60b95b0d2d91">background_thread_</a>.join();</div>
<div class="line"><span class="lineno">  198</span>            }</div>
<div class="line"><span class="lineno">  199</span>        }</div>
<div class="line"><span class="lineno">  200</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b8727f24d49b7831f7e3935fd9cce58" name="a3b8727f24d49b7831f7e3935fd9cce58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8727f24d49b7831f7e3935fd9cce58">&#9670;&#160;</a></span>metric_storage() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kcenon::monitoring::metric_storage::metric_storage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a01dcd33f327314464ec5e016ec6a2b1d" name="a01dcd33f327314464ec5e016ec6a2b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01dcd33f327314464ec5e016ec6a2b1d">&#9670;&#160;</a></span>background_processor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kcenon::monitoring::metric_storage::background_processor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Background processing loop. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00119">119</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>                                {</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">while</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a>.load(std::memory_order_acquire)) {</div>
<div class="line"><span class="lineno">  121</span>            std::this_thread::sleep_for(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a403236ae65f4427a1b26b9ad40ceaaa2">flush_interval</a>);</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa5180e7aa0c50f6b000c43cadcdcecc0">running_</a>.load(std::memory_order_acquire)) {</div>
<div class="line"><span class="lineno">  123</span>                <a class="code hl_function" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3209ae0b783c7d1bb89e501c5ea2304c">flush</a>();</div>
<div class="line"><span class="lineno">  124</span>            }</div>
<div class="line"><span class="lineno">  125</span>        }</div>
<div class="line"><span class="lineno">  126</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a3209ae0b783c7d1bb89e501c5ea2304c"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3209ae0b783c7d1bb89e501c5ea2304c">kcenon::monitoring::metric_storage::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdoc">Flush buffered metrics to time series.</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00260">metric_storage.h:260</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_a403236ae65f4427a1b26b9ad40ceaaa2"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a403236ae65f4427a1b26b9ad40ceaaa2">kcenon::monitoring::metric_storage_config::flush_interval</a></div><div class="ttdeci">std::chrono::milliseconds flush_interval</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00042">metric_storage.h:42</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a01dcd33f327314464ec5e016ec6a2b1d_cgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a01dcd33f327314464ec5e016ec6a2b1d_cgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a01dcd33f327314464ec5e016ec6a2b1d_cgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a01dcd33f327314464ec5e016ec6a2b1d_cgraph">
<area shape="rect" title="Background processing loop." alt="" coords="5,30,217,85"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3209ae0b783c7d1bb89e501c5ea2304c" title="Flush buffered metrics to time series." alt="" coords="265,37,432,77"/>
<area shape="poly" title=" " alt="" coords="218,55,252,55,252,60,218,60"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3ff8102487ae4d5809f01e5dc61c9916" title="Get or create time series for a metric." alt="" coords="480,30,637,85"/>
<area shape="poly" title=" " alt="" coords="433,55,466,55,466,60,433,60"/>
<area shape="rect" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html#a5d69cafc71acd36d5bff31d782ec2474" title="Factory method to create time_series with validation." alt="" coords="685,5,840,45"/>
<area shape="poly" title=" " alt="" coords="637,42,671,37,672,42,638,48"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d" title="Hash function for metric names." alt="" coords="685,69,840,109"/>
<area shape="poly" title=" " alt="" coords="638,67,672,72,671,78,637,72"/>
</map>
</div>

</div>
</div>
<a id="a87df67e75c9ce7a03dd958b7458ef1bb" name="a87df67e75c9ce7a03dd958b7458ef1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87df67e75c9ce7a03dd958b7458ef1bb">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kcenon::monitoring::metric_storage::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear all stored metrics. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00366">366</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  366</span>                 {</div>
<div class="line"><span class="lineno">  367</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  368</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a>-&gt;clear();</div>
<div class="line"><span class="lineno">  369</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.clear();</div>
<div class="line"><span class="lineno">  370</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>.clear();</div>
<div class="line"><span class="lineno">  371</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a70badf11cb57364fffebf5279116a773">active_metric_series</a>.store(0, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  372</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a2f11820be37aa662812ad7f4da3961de"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">kcenon::monitoring::metric_storage::stats_</a></div><div class="ttdeci">metric_storage_stats stats_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00101">metric_storage.h:101</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a571c377fdfa7f0544ae1ab4af4193883"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">kcenon::monitoring::metric_storage::hash_to_name_</a></div><div class="ttdeci">std::unordered_map&lt; uint32_t, std::string &gt; hash_to_name_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00110">metric_storage.h:110</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a8fcf87e098ffe44e01451bf43c5de2ee"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">kcenon::monitoring::metric_storage::time_series_map_</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::unique_ptr&lt; time_series &gt; &gt; time_series_map_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00107">metric_storage.h:107</a></div></div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_ac43714e09db55d65b8fe62528556928d"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">kcenon::monitoring::metric_storage::mutex_</a></div><div class="ttdeci">std::shared_mutex mutex_</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00099">metric_storage.h:99</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__stats_html_a70badf11cb57364fffebf5279116a773"><div class="ttname"><a href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a70badf11cb57364fffebf5279116a773">kcenon::monitoring::metric_storage_stats::active_metric_series</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; active_metric_series</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00081">metric_storage.h:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3209ae0b783c7d1bb89e501c5ea2304c" name="a3209ae0b783c7d1bb89e501c5ea2304c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3209ae0b783c7d1bb89e501c5ea2304c">&#9670;&#160;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kcenon::monitoring::metric_storage::flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush buffered metrics to time series. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00260">260</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  260</span>                 {</div>
<div class="line"><span class="lineno">  261</span>        std::vector&lt;compact_metric_value&gt; flushed_metrics;</div>
<div class="line"><span class="lineno">  262</span>        flushed_metrics.reserve(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#ae062270c40cade358422ff50539c32ac">ring_buffer_capacity</a>);</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>        <span class="comment">// Read all available metrics from buffer</span></div>
<div class="line"><span class="lineno">  265</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a>-&gt;read_batch(flushed_metrics, <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#ae062270c40cade358422ff50539c32ac">ring_buffer_capacity</a>);</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">if</span> (flushed_metrics.empty()) {</div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  269</span>        }</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>        std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; metric : flushed_metrics) {</div>
<div class="line"><span class="lineno">  274</span>            <span class="comment">// Find metric name from hash</span></div>
<div class="line"><span class="lineno">  275</span>            <span class="keyword">auto</span> name_it = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>.find(metric.metadata.name_hash);</div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">if</span> (name_it == <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>.end()) {</div>
<div class="line"><span class="lineno">  277</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  278</span>            }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>            <span class="keyword">const</span> std::string&amp; name = name_it-&gt;second;</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>            <span class="comment">// Get or create time series</span></div>
<div class="line"><span class="lineno">  283</span>            <span class="keyword">auto</span>* series = <a class="code hl_function" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3ff8102487ae4d5809f01e5dc61c9916">get_or_create_series</a>(name);</div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">if</span> (series == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  285</span>                <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#adaf80f0acf91056502a5aa8e46688e2b">failed_flushes</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  287</span>            }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>            <span class="comment">// Add data point to time series</span></div>
<div class="line"><span class="lineno">  290</span>            series-&gt;add_point(metric.as_double(), metric.get_timestamp());</div>
<div class="line"><span class="lineno">  291</span>        }</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a66315e7732854727750f9023b881b234">flush_count</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  294</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a3ff8102487ae4d5809f01e5dc61c9916"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3ff8102487ae4d5809f01e5dc61c9916">kcenon::monitoring::metric_storage::get_or_create_series</a></div><div class="ttdeci">time_series * get_or_create_series(const std::string &amp;name)</div><div class="ttdoc">Get or create time series for a metric.</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00131">metric_storage.h:131</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__stats_html_a66315e7732854727750f9023b881b234"><div class="ttname"><a href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a66315e7732854727750f9023b881b234">kcenon::monitoring::metric_storage_stats::flush_count</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; flush_count</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00082">metric_storage.h:82</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__stats_html_adaf80f0acf91056502a5aa8e46688e2b"><div class="ttname"><a href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#adaf80f0acf91056502a5aa8e46688e2b">kcenon::monitoring::metric_storage_stats::failed_flushes</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; failed_flushes</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00083">metric_storage.h:83</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_cgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_cgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_cgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_cgraph">
<area shape="rect" title="Flush buffered metrics to time series." alt="" coords="5,37,172,77"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3ff8102487ae4d5809f01e5dc61c9916" title="Get or create time series for a metric." alt="" coords="220,30,377,85"/>
<area shape="poly" title=" " alt="" coords="173,55,206,55,206,60,173,60"/>
<area shape="rect" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html#a5d69cafc71acd36d5bff31d782ec2474" title="Factory method to create time_series with validation." alt="" coords="425,5,580,45"/>
<area shape="poly" title=" " alt="" coords="377,42,411,37,412,42,378,48"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d" title="Hash function for metric names." alt="" coords="425,69,580,109"/>
<area shape="poly" title=" " alt="" coords="378,67,412,72,411,78,377,72"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_icgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_icgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_icgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3209ae0b783c7d1bb89e501c5ea2304c_icgraph">
<area shape="rect" title="Flush buffered metrics to time series." alt="" coords="265,45,432,85"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a01dcd33f327314464ec5e016ec6a2b1d" title="Background processing loop." alt="" coords="5,5,217,60"/>
<area shape="poly" title=" " alt="" coords="252,54,217,50,218,44,252,49"/>
<area shape="rect" href="../../d3/d9d/test__metric__storage_8cpp.html#a536c85c7481d543bc4971d7869072237" title=" " alt="" coords="77,84,146,109"/>
<area shape="poly" title=" " alt="" coords="252,80,146,95,146,89,251,75"/>
</map>
</div>

</div>
</div>
<a id="aaec0b3307eff8e94d2645f6d7e704104" name="aaec0b3307eff8e94d2645f6d7e704104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec0b3307eff8e94d2645f6d7e704104">&#9670;&#160;</a></span>get_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a> &amp; kcenon::monitoring::metric_storage::get_config </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00359">359</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  359</span>                                                             {</div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>;</div>
<div class="line"><span class="lineno">  361</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a63ca40b9b91eabee43b14fa3b2d94c9b" name="a63ca40b9b91eabee43b14fa3b2d94c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ca40b9b91eabee43b14fa3b2d94c9b">&#9670;&#160;</a></span>get_latest_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::Result&lt; double &gt; kcenon::monitoring::metric_storage::get_latest_value </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the latest value for a metric. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Metric name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Optional containing the latest value if available </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00301">301</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                       {</div>
<div class="line"><span class="lineno">  302</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.find(name);</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.end()) {</div>
<div class="line"><span class="lineno">  306</span>            <span class="keywordflow">return</span> common::Result&lt;double&gt;::err(error_info(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83eaafc9260fbeeb30ca568c4e0da034c8dc">monitoring_error_code::collection_failed</a>,</div>
<div class="line"><span class="lineno">  307</span>                                      <span class="stringliteral">&quot;Metric not found: &quot;</span> + name, <span class="stringliteral">&quot;monitoring_system&quot;</span>).to_common_error());</div>
<div class="line"><span class="lineno">  308</span>        }</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">return</span> it-&gt;second-&gt;get_latest_value();</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_ab0f9a44e05c0521f5686fd2ac5d2c83eaafc9260fbeeb30ca568c4e0da034c8dc"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83eaafc9260fbeeb30ca568c4e0da034c8dc">kcenon::monitoring::monitoring_error_code::collection_failed</a></div><div class="ttdeci">@ collection_failed</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a294713de0db37a38181a7fc2d254a121" name="a294713de0db37a38181a7fc2d254a121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a294713de0db37a38181a7fc2d254a121">&#9670;&#160;</a></span>get_metric_names()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; kcenon::monitoring::metric_storage::get_metric_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get all metric names. </p>
<dl class="section return"><dt>Returns</dt><dd>Vector of metric names </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00317">317</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  317</span>                                                  {</div>
<div class="line"><span class="lineno">  318</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>        std::vector&lt;std::string&gt; names;</div>
<div class="line"><span class="lineno">  321</span>        names.reserve(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.size());</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>) {</div>
<div class="line"><span class="lineno">  324</span>            names.push_back(pair.first);</div>
<div class="line"><span class="lineno">  325</span>        }</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">return</span> names;</div>
<div class="line"><span class="lineno">  328</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ff8102487ae4d5809f01e5dc61c9916" name="a3ff8102487ae4d5809f01e5dc61c9916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ff8102487ae4d5809f01e5dc61c9916">&#9670;&#160;</a></span>get_or_create_series()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html">time_series</a> * kcenon::monitoring::metric_storage::get_or_create_series </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get or create time series for a metric. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00131">131</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>                                                             {</div>
<div class="line"><span class="lineno">  132</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.find(name);</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.end()) {</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">return</span> it-&gt;second.get();</div>
<div class="line"><span class="lineno">  135</span>        }</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>        <span class="comment">// Check if we&#39;re at capacity</span></div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.size() &gt;= <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a6d69508f27fb0be0907cdee9818d81e7">max_metrics</a>) {</div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>        <span class="comment">// Create new time series</span></div>
<div class="line"><span class="lineno">  143</span>        time_series_config ts_config;</div>
<div class="line"><span class="lineno">  144</span>        ts_config.max_points = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a00bc831e985e6e92c251373e08229f5c">time_series_max_points</a>;</div>
<div class="line"><span class="lineno">  145</span>        ts_config.retention_period = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a332b6b4b0a9d05c07bccacc0eef72129">retention_period</a>;</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        <span class="keyword">auto</span> result = <a class="code hl_function" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html#a5d69cafc71acd36d5bff31d782ec2474">time_series::create</a>(name, ts_config);</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">if</span> (result.is_err()) {</div>
<div class="line"><span class="lineno">  149</span>            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  150</span>        }</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>        <span class="keyword">auto</span>* ptr = result.value().get();</div>
<div class="line"><span class="lineno">  153</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>[name] = std::move(result.value());</div>
<div class="line"><span class="lineno">  154</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a70badf11cb57364fffebf5279116a773">active_metric_series</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>        <span class="comment">// Store hash mapping</span></div>
<div class="line"><span class="lineno">  157</span>        <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>[<a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d">hash_metric_name</a>(name)] = name;</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">return</span> ptr;</div>
<div class="line"><span class="lineno">  160</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1time__series_html_a5d69cafc71acd36d5bff31d782ec2474"><div class="ttname"><a href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html#a5d69cafc71acd36d5bff31d782ec2474">kcenon::monitoring::time_series::create</a></div><div class="ttdeci">static common::Result&lt; std::unique_ptr&lt; time_series &gt; &gt; create(const std::string &amp;name, const time_series_config &amp;config={})</div><div class="ttdoc">Factory method to create time_series with validation.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d51/time__series_8h_source.html#l00293">time_series.h:293</a></div></div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a1816c549412066a46de9f31c42f7dc2d"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d">kcenon::monitoring::hash_metric_name</a></div><div class="ttdeci">uint32_t hash_metric_name(const std::string &amp;name) noexcept</div><div class="ttdoc">Hash function for metric names.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4b/metric__types_8h_source.html#l00605">metric_types.h:605</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_a00bc831e985e6e92c251373e08229f5c"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a00bc831e985e6e92c251373e08229f5c">kcenon::monitoring::metric_storage_config::time_series_max_points</a></div><div class="ttdeci">size_t time_series_max_points</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00043">metric_storage.h:43</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_a332b6b4b0a9d05c07bccacc0eef72129"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a332b6b4b0a9d05c07bccacc0eef72129">kcenon::monitoring::metric_storage_config::retention_period</a></div><div class="ttdeci">std::chrono::seconds retention_period</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00044">metric_storage.h:44</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__config_html_a6d69508f27fb0be0907cdee9818d81e7"><div class="ttname"><a href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#a6d69508f27fb0be0907cdee9818d81e7">kcenon::monitoring::metric_storage_config::max_metrics</a></div><div class="ttdeci">size_t max_metrics</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00040">metric_storage.h:40</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_cgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_cgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_cgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_cgraph">
<area shape="rect" title="Get or create time series for a metric." alt="" coords="5,30,163,85"/>
<area shape="rect" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html#a5d69cafc71acd36d5bff31d782ec2474" title="Factory method to create time_series with validation." alt="" coords="211,5,365,45"/>
<area shape="poly" title=" " alt="" coords="163,42,197,37,198,42,164,48"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d" title="Hash function for metric names." alt="" coords="211,69,365,109"/>
<area shape="poly" title=" " alt="" coords="164,67,198,72,197,78,163,72"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_icgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_icgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_icgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a3ff8102487ae4d5809f01e5dc61c9916_icgraph">
<area shape="rect" title="Get or create time series for a metric." alt="" coords="480,37,637,92"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3209ae0b783c7d1bb89e501c5ea2304c" title="Flush buffered metrics to time series." alt="" coords="265,45,432,85"/>
<area shape="poly" title=" " alt="" coords="466,67,432,67,432,62,466,62"/>
<area shape="rect" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a01dcd33f327314464ec5e016ec6a2b1d" title="Background processing loop." alt="" coords="5,5,217,60"/>
<area shape="poly" title=" " alt="" coords="252,54,217,50,218,44,252,49"/>
<area shape="rect" href="../../d3/d9d/test__metric__storage_8cpp.html#a536c85c7481d543bc4971d7869072237" title=" " alt="" coords="77,84,146,109"/>
<area shape="poly" title=" " alt="" coords="252,80,146,95,146,89,251,75"/>
</map>
</div>

</div>
</div>
<a id="a5c9d7330c4b45ef29edc10fe5403a6b2" name="a5c9d7330c4b45ef29edc10fe5403a6b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c9d7330c4b45ef29edc10fe5403a6b2">&#9670;&#160;</a></span>get_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html">metric_storage_stats</a> &amp; kcenon::monitoring::metric_storage::get_stats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get storage statistics. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00352">352</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  352</span>                                                           {</div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>;</div>
<div class="line"><span class="lineno">  354</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a40bbe800dbd2449a2a9aca89d63c3624" name="a40bbe800dbd2449a2a9aca89d63c3624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bbe800dbd2449a2a9aca89d63c3624">&#9670;&#160;</a></span>memory_footprint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t kcenon::monitoring::metric_storage::memory_footprint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get memory footprint estimate. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00385">385</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  385</span>                                    {</div>
<div class="line"><span class="lineno">  386</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordtype">size_t</span> total = <span class="keyword">sizeof</span>(<a class="code hl_function" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a4f92dfb6d1405eb1565b28e6a1cb9b9f">metric_storage</a>);</div>
<div class="line"><span class="lineno">  389</span>        total += <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a3faebb98e61204944474180cf74e1bff">config_</a>.<a class="code hl_variable" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html#ae062270c40cade358422ff50539c32ac">ring_buffer_capacity</a> * <span class="keyword">sizeof</span>(compact_metric_value);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pair : <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>) {</div>
<div class="line"><span class="lineno">  392</span>            total += pair.first.capacity();</div>
<div class="line"><span class="lineno">  393</span>            total += pair.second-&gt;memory_footprint();</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">return</span> total;</div>
<div class="line"><span class="lineno">  397</span>    }</div>
<div class="ttc" id="aclasskcenon_1_1monitoring_1_1metric__storage_html_a4f92dfb6d1405eb1565b28e6a1cb9b9f"><div class="ttname"><a href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a4f92dfb6d1405eb1565b28e6a1cb9b9f">kcenon::monitoring::metric_storage::metric_storage</a></div><div class="ttdeci">metric_storage(const metric_storage_config &amp;config={})</div><div class="ttdoc">Constructor with configuration.</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00166">metric_storage.h:166</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac913d5534aeb66faefe3c135ec824bd1" name="ac913d5534aeb66faefe3c135ec824bd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac913d5534aeb66faefe3c135ec824bd1">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp; kcenon::monitoring::metric_storage::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html">metric_storage</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5536cdb4d83ea6dee8173f687af2659b" name="a5536cdb4d83ea6dee8173f687af2659b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5536cdb4d83ea6dee8173f687af2659b">&#9670;&#160;</a></span>query_metric()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::Result&lt; <a class="el" href="../../d2/d1f/structkcenon_1_1monitoring_1_1aggregation__result.html">aggregation_result</a> &gt; kcenon::monitoring::metric_storage::query_metric </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/dff/structkcenon_1_1monitoring_1_1time__series__query.html">time_series_query</a> &amp;&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query metric data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Metric name </td></tr>
    <tr><td class="paramname">query</td><td>Query parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Aggregation result </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00336">336</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>                                                                                  {</div>
<div class="line"><span class="lineno">  338</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.find(name);</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.end()) {</div>
<div class="line"><span class="lineno">  342</span>            <span class="keywordflow">return</span> common::Result&lt;aggregation_result&gt;::err(error_info(<a class="code hl_enumvalue" href="../../db/d50/namespacekcenon_1_1monitoring.html#ab0f9a44e05c0521f5686fd2ac5d2c83eaafc9260fbeeb30ca568c4e0da034c8dc">monitoring_error_code::collection_failed</a>,</div>
<div class="line"><span class="lineno">  343</span>                                                 <span class="stringliteral">&quot;Metric not found: &quot;</span> + name, <span class="stringliteral">&quot;monitoring_system&quot;</span>).to_common_error());</div>
<div class="line"><span class="lineno">  344</span>        }</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">return</span> it-&gt;second-&gt;query(query);</div>
<div class="line"><span class="lineno">  347</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1058dd0c1eeaa236b7832ba4ee627f22" name="a1058dd0c1eeaa236b7832ba4ee627f22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1058dd0c1eeaa236b7832ba4ee627f22">&#9670;&#160;</a></span>series_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t kcenon::monitoring::metric_storage::series_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get number of active metric series. </p>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00377">377</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  377</span>                                {</div>
<div class="line"><span class="lineno">  378</span>        std::shared_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a8fcf87e098ffe44e01451bf43c5de2ee">time_series_map_</a>.size();</div>
<div class="line"><span class="lineno">  380</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a13cf48aad601ee1819a1247f6efe1d76" name="a13cf48aad601ee1819a1247f6efe1d76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13cf48aad601ee1819a1247f6efe1d76">&#9670;&#160;</a></span>store_metric()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">common::VoidResult kcenon::monitoring::metric_storage::store_metric </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727">metric_type</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="../../db/d50/namespacekcenon_1_1monitoring.html#a02c7867f24a6cbd907fdc07b4f294727a37e1a9c3ba6042b79266687d13f3c5ff">metric_type::gauge</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store a single metric value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Metric name </td></tr>
    <tr><td class="paramname">value</td><td>Metric value </td></tr>
    <tr><td class="paramname">type</td><td>Metric type (default: gauge) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result indicating success or failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00213">213</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  214</span>                                                                 {</div>
<div class="line"><span class="lineno">  215</span>        <span class="keyword">auto</span> metadata = <a class="code hl_function" href="../../db/d50/namespacekcenon_1_1monitoring.html#a9b12cc704f476358d17e70a46991cb6c">create_metric_metadata</a>(name, type);</div>
<div class="line"><span class="lineno">  216</span>        compact_metric_value metric(metadata, value);</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        <span class="keyword">auto</span> result = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a>-&gt;write(std::move(metric));</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> (result.is_ok()) {</div>
<div class="line"><span class="lineno">  220</span>            <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a4856a8dcfff6f521daca96ebf3c9ec58">total_metrics_stored</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>            <span class="comment">// Store name mapping</span></div>
<div class="line"><span class="lineno">  223</span>            std::unique_lock&lt;std::shared_mutex&gt; lock(<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#ac43714e09db55d65b8fe62528556928d">mutex_</a>);</div>
<div class="line"><span class="lineno">  224</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>.find(metadata.name_hash) == <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>.end()) {</div>
<div class="line"><span class="lineno">  225</span>                <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a571c377fdfa7f0544ae1ab4af4193883">hash_to_name_</a>[metadata.name_hash] = name;</div>
<div class="line"><span class="lineno">  226</span>            }</div>
<div class="line"><span class="lineno">  227</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  228</span>            <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#ab05f14b164fdd8fec4c1d74d00583337">total_metrics_dropped</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  229</span>        }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  232</span>    }</div>
<div class="ttc" id="anamespacekcenon_1_1monitoring_html_a9b12cc704f476358d17e70a46991cb6c"><div class="ttname"><a href="../../db/d50/namespacekcenon_1_1monitoring.html#a9b12cc704f476358d17e70a46991cb6c">kcenon::monitoring::create_metric_metadata</a></div><div class="ttdeci">metric_metadata create_metric_metadata(const std::string &amp;name, metric_type type, size_t tag_count=0)</div><div class="ttdoc">Create metric metadata from name and type.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d4b/metric__types_8h_source.html#l00618">metric_types.h:618</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__stats_html_a4856a8dcfff6f521daca96ebf3c9ec58"><div class="ttname"><a href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a4856a8dcfff6f521daca96ebf3c9ec58">kcenon::monitoring::metric_storage_stats::total_metrics_stored</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; total_metrics_stored</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00079">metric_storage.h:79</a></div></div>
<div class="ttc" id="astructkcenon_1_1monitoring_1_1metric__storage__stats_html_ab05f14b164fdd8fec4c1d74d00583337"><div class="ttname"><a href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#ab05f14b164fdd8fec4c1d74d00583337">kcenon::monitoring::metric_storage_stats::total_metrics_dropped</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; total_metrics_dropped</div><div class="ttdef"><b>Definition</b> <a href="../../df/df1/metric__storage_8h_source.html#l00080">metric_storage.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a13cf48aad601ee1819a1247f6efe1d76_cgraph.png" border="0" usemap="#ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a13cf48aad601ee1819a1247f6efe1d76_cgraph" alt=""/></div>
<map name="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a13cf48aad601ee1819a1247f6efe1d76_cgraph" id="ad4/dc5/classkcenon_1_1monitoring_1_1metric__storage_a13cf48aad601ee1819a1247f6efe1d76_cgraph">
<area shape="rect" title="Store a single metric value." alt="" coords="5,5,175,60"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a9b12cc704f476358d17e70a46991cb6c" title="Create metric metadata from name and type." alt="" coords="223,13,413,53"/>
<area shape="poly" title=" " alt="" coords="175,30,209,30,209,35,175,35"/>
<area shape="rect" href="../../db/d50/namespacekcenon_1_1monitoring.html#a1816c549412066a46de9f31c42f7dc2d" title="Hash function for metric names." alt="" coords="461,13,616,53"/>
<area shape="poly" title=" " alt="" coords="414,30,448,30,448,35,414,35"/>
</map>
</div>

</div>
</div>
<a id="a3295fc1a2ba674fc613206a0e57a8c7c" name="a3295fc1a2ba674fc613206a0e57a8c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3295fc1a2ba674fc613206a0e57a8c7c">&#9670;&#160;</a></span>store_metrics_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t kcenon::monitoring::metric_storage::store_metrics_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d88/structkcenon_1_1monitoring_1_1metric__batch.html">metric_batch</a> &amp;&#160;</td>
          <td class="paramname"><em>batch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store a batch of metrics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">batch</td><td>Metric batch to store </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of metrics successfully stored </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00240">240</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  240</span>                                                          {</div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordtype">size_t</span> stored = 0;</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; metric : batch.metrics) {</div>
<div class="line"><span class="lineno">  244</span>            compact_metric_value copy = metric;</div>
<div class="line"><span class="lineno">  245</span>            <span class="keyword">auto</span> result = <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#aa81e2e4167f7b02ff832bf16307bcccd">incoming_buffer_</a>-&gt;write(std::move(copy));</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">if</span> (result.is_ok()) {</div>
<div class="line"><span class="lineno">  247</span>                stored++;</div>
<div class="line"><span class="lineno">  248</span>                <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#a4856a8dcfff6f521daca96ebf3c9ec58">total_metrics_stored</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  249</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  250</span>                <a class="code hl_variable" href="../../d4/dc5/classkcenon_1_1monitoring_1_1metric__storage.html#a2f11820be37aa662812ad7f4da3961de">stats_</a>.<a class="code hl_variable" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html#ab05f14b164fdd8fec4c1d74d00583337">total_metrics_dropped</a>.fetch_add(1, std::memory_order_relaxed);</div>
<div class="line"><span class="lineno">  251</span>            }</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">return</span> stored;</div>
<div class="line"><span class="lineno">  255</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac193778277912528f3dc60b95b0d2d91" name="ac193778277912528f3dc60b95b0d2d91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac193778277912528f3dc60b95b0d2d91">&#9670;&#160;</a></span>background_thread_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread kcenon::monitoring::metric_storage::background_thread_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00114">114</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="a3faebb98e61204944474180cf74e1bff" name="a3faebb98e61204944474180cf74e1bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3faebb98e61204944474180cf74e1bff">&#9670;&#160;</a></span>config_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d17/structkcenon_1_1monitoring_1_1metric__storage__config.html">metric_storage_config</a> kcenon::monitoring::metric_storage::config_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00100">100</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="a571c377fdfa7f0544ae1ab4af4193883" name="a571c377fdfa7f0544ae1ab4af4193883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a571c377fdfa7f0544ae1ab4af4193883">&#9670;&#160;</a></span>hash_to_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;uint32_t, std::string&gt; kcenon::monitoring::metric_storage::hash_to_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00110">110</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="aa81e2e4167f7b02ff832bf16307bcccd" name="aa81e2e4167f7b02ff832bf16307bcccd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa81e2e4167f7b02ff832bf16307bcccd">&#9670;&#160;</a></span>incoming_buffer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;ring_buffer&lt;<a class="el" href="../../d0/d41/structkcenon_1_1monitoring_1_1compact__metric__value.html">compact_metric_value</a>&gt; &gt; kcenon::monitoring::metric_storage::incoming_buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00104">104</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="ac43714e09db55d65b8fe62528556928d" name="ac43714e09db55d65b8fe62528556928d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac43714e09db55d65b8fe62528556928d">&#9670;&#160;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_mutex kcenon::monitoring::metric_storage::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00099">99</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="aa5180e7aa0c50f6b000c43cadcdcecc0" name="aa5180e7aa0c50f6b000c43cadcdcecc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5180e7aa0c50f6b000c43cadcdcecc0">&#9670;&#160;</a></span>running_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; kcenon::monitoring::metric_storage::running_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00113">113</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>{<span class="keyword">false</span>};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f11820be37aa662812ad7f4da3961de" name="a2f11820be37aa662812ad7f4da3961de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f11820be37aa662812ad7f4da3961de">&#9670;&#160;</a></span>stats_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d85/structkcenon_1_1monitoring_1_1metric__storage__stats.html">metric_storage_stats</a> kcenon::monitoring::metric_storage::stats_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00101">101</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<a id="a8fcf87e098ffe44e01451bf43c5de2ee" name="a8fcf87e098ffe44e01451bf43c5de2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fcf87e098ffe44e01451bf43c5de2ee">&#9670;&#160;</a></span>time_series_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, std::unique_ptr&lt;<a class="el" href="../../dc/d3c/classkcenon_1_1monitoring_1_1time__series.html">time_series</a>&gt; &gt; kcenon::monitoring::metric_storage::time_series_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/df1/metric__storage_8h_source.html#l00107">107</a> of file <a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/kcenon/monitoring/utils/<a class="el" href="../../df/df1/metric__storage_8h_source.html">metric_storage.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 20 2026 10:28:35 for Monitoring System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
